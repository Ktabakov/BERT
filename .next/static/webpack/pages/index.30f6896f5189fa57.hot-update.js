"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./public/walletActions.ts":
/*!*********************************!*\
  !*** ./public/walletActions.ts ***!
  \*********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateCountdown: function() { return /* binding */ calculateCountdown; },\n/* harmony export */   claimTokens: function() { return /* binding */ claimTokens; },\n/* harmony export */   send: function() { return /* binding */ send; }\n/* harmony export */ });\n/* harmony import */ var _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @hyperionbt/helios */ \"./node_modules/@hyperionbt/helios/helios.js\");\n/* harmony import */ var _common_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/network */ \"./common/network.ts\");\n/* harmony import */ var _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/GameReward.hl */ \"./contracts/GameReward.hl\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\n // Ensure correct path to your contract\nconst optimize = false;\n// Calculate the reward based on the time elapsed since contract deployment\nfunction calculateRewardInTime() {\n    const TimeBeginContract = Math.floor(new Date(Date.UTC(2024, 11, 25, 13, 45, 0)).getTime()) / 1000;\n    console.log(\"TimeBeginContract\" + TimeBeginContract);\n    const HALVING_PERIOD = 7776000; // 3 months in seconds \n    const MAX_HALVINGS = 2; // Limit halvings to 2 times\n    const BASE_REWARD = 10000; // Initial reward in tokens\n    // Get current time in seconds\n    const TimeNow = Math.floor(Date.now() / 1000);\n    // Calculate the elapsed time in seconds\n    const timeElapsed = TimeNow - TimeBeginContract;\n    // Determine halving steps based on elapsed time, but limit to MAX_HALVINGS\n    let halvingSteps = Math.floor(timeElapsed / HALVING_PERIOD);\n    halvingSteps = Math.min(halvingSteps, MAX_HALVINGS); // Cap halvings at MAX_HALVINGS\n    // Ensure the number of halving steps doesn't exceed the maximum allowed\n    const effectiveHalvings = Math.min(halvingSteps, MAX_HALVINGS);\n    console.log(\"Halvings\" + effectiveHalvings);\n    // Directly calculate reward based on halving steps using a bit shift\n    const reward = BASE_REWARD / 2 ** effectiveHalvings;\n    // Return the reward, ensuring it doesn't fall below a minimum value\n    return reward < 1 ? 1 : reward;\n}\nfunction calculateCountdown() {\n    const TimeBeginContract = Math.floor(new Date(Date.UTC(2024, 11, 25, 13, 45, 0)).getTime());\n    const TimeNow = Math.floor(Date.now());\n    const CYCLE_DURATION = 600 // 10 minutes \n    ;\n    const offsetInMs = 89680;\n    const elapsedTime = TimeNow - offsetInMs - TimeBeginContract;\n    const elapsedTimeInSeconds = elapsedTime / 1000;\n    const positionInCycle = elapsedTimeInSeconds % CYCLE_DURATION;\n    return positionInCycle;\n}\nasync function claimTokens(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw new Error(\"Wallet API is not set.\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Cip30Wallet(walletAPI);\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.WalletHelper(cip30WalletAPI);\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.NetworkParams(networkParamsJson);\n        const policyId = \"e16c2dc8ae937e8d3790c7fd7168d7b994621ba14ca11415f39fed72\";\n        const name = Buffer.from(\"MIN\", \"utf8\").toString(\"hex\");\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.AssetClass({\n            mph: mph,\n            tokenName: name\n        });\n        console.log(assetClass);\n        const utxos = await walletHelper.getUtxos();\n        console.log(\"utxos\" + utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const gameReward = new _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        // Compile the vesting validator\n        const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Address.fromHashes(compiledProgram.validatorHash);\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        console.dir(scriptAddress, {\n            depth: null\n        });\n        const sortedUtxos = await fetchUtxos(scriptAddress.toBech32());\n        // const TOTAL_SUPPLY = 10000; // Total token supply\n        const CLAIM_WINDOW = 20; // 20 seconds \n        //const remainingSupply = getTokenAmountFromUtxos(filteredUtxos, assetClass);\n        const dynamicReward = calculateRewardInTime();\n        const positionInCycle = calculateCountdown();\n        console.log(\"positionInCycle\" + positionInCycle);\n        window.onerror = ()=>positionInCycle < CLAIM_WINDOW;\n        //const dynamicReward = calculateReward(Number(remainingSupply), TOTAL_SUPPLY, BASE_REWARD);\n        const testValueBenefitiary = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Assets([\n            [\n                assetClass,\n                BigInt(dynamicReward)\n            ]\n        ]);\n        //const totalAmountUtxo = getTokenAmountFromUtxos(sortedUtxos.selected, assetClass);\n        const amountToSendBack = BigInt(sortedUtxos.totalAmount) - BigInt(dynamicReward);\n        const firstPartToSendBack = amountToSendBack / 2n; // First part is half of the total amount\n        const secondPartToSendBack = amountToSendBack - firstPartToSendBack; // Second part is the remainder\n        console.log(\"First \" + firstPartToSendBack);\n        console.log(\"Sevond \" + secondPartToSendBack);\n        console.log(dynamicReward);\n        const valueContract1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Assets([\n            [\n                assetClass,\n                firstPartToSendBack\n            ]\n        ]);\n        const valueContract2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Assets([\n            [\n                assetClass,\n                secondPartToSendBack\n            ]\n        ]);\n        const gameDatum = new gameReward.types.Datum(benefitiary.pubKeyHash);\n        // Create the vesting claim redeemer\n        const redeember = new gameReward.types.Redeemer.Claim(benefitiary.pubKeyHash)._toUplcData();\n        //console.log(filteredUtxos);\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Tx();\n        //tx.addInputs(utxos[0]);\n        tx.addInputs(sortedUtxos.selected, redeember);\n        tx.attachScript(compiledProgram);\n        var userClaimOutput = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.TxOutput(benefitiary, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(undefined, testValueBenefitiary));\n        tx.addOutput(userClaimOutput);\n        //Shiiit, fix. Someone could rediredt the rest of the tokens\n        // const addressStr = \"addr_test1qrarqhmklnhwcw3q0zm6sgm3g3l7pua0y36sql9k5ru8dsucglsked5f5yrcf9e9xgxjgmt7xk52knh8h0dgayc00arqlh7g60\";\n        // const address = Address.fromBech32(addressStr);\n        // tx.addOutput(new TxOutput(\n        //   address,\n        //   new Value(undefined, testValueContract) // The amount being claimed\n        // ));\n        // Calculate total ADA in the selected script inputs\n        let totalAdaInInputs = BigInt(0);\n        sortedUtxos.selected.forEach((utxo)=>{\n            totalAdaInInputs += BigInt(utxo.output.value.lovelace);\n        });\n        // Distribute ADA equally (or as required) among script outputs\n        const adaPerScriptOutput = totalAdaInInputs / 2n; // Assuming two script outputs\n        if (amountToSendBack != BigInt(0)) {\n            var scriptUtxo1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(adaPerScriptOutput, valueContract1), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Datum.inline(gameDatum) // Contract requires datum\n            );\n            tx.addOutput(scriptUtxo1);\n            var scriptUtxo2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(totalAdaInInputs - adaPerScriptOutput, valueContract2), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Datum.inline(gameDatum) // Contract requires datum\n            );\n            tx.addOutput(scriptUtxo2);\n        }\n        //var inputFees = await walletHelper.pickUtxos(new Value(tokenAmountFees));\n        //tx.addInputs(inputFees[0]);\n        console.log(\"We attatched everything!\");\n        await tx.finalize(networkParams, benefitiary, utxos);\n        console.log(\"dali finalizirahme?\");\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"Dali q signirahme?\");\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        console.error(\"submit tx failed\", err);\n        throw err;\n    }\n}\nasync function send(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw console.error(\"walletAPI is not set\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Cip30Wallet(walletAPI);\n        // const blockfrost = new BlockFrostIPFS({\n        //   network: network,\n        //   projectId: \"preprodJExO0MAMRgfpXz9Il4IqB2u9ddoylZBT\",\n        // });\n        console.log(\"gmmm\");\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.WalletHelper(cip30WalletAPI);\n        const policyId = \"e16c2dc8ae937e8d3790c7fd7168d7b994621ba14ca11415f39fed72\";\n        const name = Buffer.from(\"MIN\", \"utf8\").toString(\"hex\");\n        // const policyId = \"\";\n        // const name = Buffer.from(\"\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.AssetClass({\n            mph: mph,\n            tokenName: name // Convert to hex string\n        });\n        console.log(assetClass);\n        const minAda = 1000000; // minimum lovelace to send\n        const minAdaVal = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(BigInt(minAda));\n        //  const benefitiaryValue = new Value(BigInt(10000), new Assets([\n        //   [mph, [[name, BigInt(10000)]]]\n        // ]))\n        const testValueScript = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Assets([\n            [\n                assetClass,\n                BigInt(125550)\n            ]\n        ]);\n        // Get wallet UTXOs\n        const utxos = await walletHelper.pickUtxos(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(undefined, testValueScript));\n        console.log(utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const gameReward = new _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        // Compile the vesting validator\n        const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Address.fromHashes(compiledProgram.validatorHash);\n        //remove\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        // Construct the vesting datum\n        const gameDatum = new gameReward.types.Datum(benefitiary.pubKeyHash);\n        //const redeember = (new gameReward.types.Redeemer.Claim())._toUplcData();\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Tx();\n        tx.addInputs(utxos[0]);\n        tx.addOutput(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Value(undefined, testValueScript), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.Datum.inline(gameDatum)));\n        // tx.addOutput(new TxOutput(\n        //   benefitiary,\n        //   minAdaVal,\n        // ));\n        console.log(\"We attatched everything!\");\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.NetworkParams(networkParamsJson);\n        // Send any change back to the buyer\n        await tx.finalize(networkParams, benefitiary, utxos[1]);\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"signed\");\n        // Submit the signed tx\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        throw console.error(\"submit tx failed\", err);\n    }\n}\nasync function fetchUtxos(scriptAddress) {\n    const response = await fetch(\"http://192.168.1.101:3001/api/getUtxos\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            scriptAddress\n        })\n    });\n    const data = await response.json(); // Raw JSON array from backend\n    // `Convert JSON back to TxInput objects\n    const selectedUtxos = data.selected.map((utxo)=>_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_2__.TxInput.fromFullCbor(utxo));\n    const totalAmount = BigInt(data.totalAmount);\n    return {\n        selected: selectedUtxos,\n        totalAmount\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFPQSxDQUFDb0ksWUFBWSxDQUFDbEM7SUFDNUUsTUFBTXJCLGNBQXNCRixPQUFPcUQsS0FBS25ELFdBQVc7SUFFbkQsT0FBTztRQUNMYyxVQUFVdUM7UUFDVnJEO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9wdWJsaWMvd2FsbGV0QWN0aW9ucy50cz81YjA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxyXG4gICAgTmV0d29ya1BhcmFtcyxcclxuICAgIFZhbHVlLFxyXG4gICAgVHhPdXRwdXQsXHJcbiAgICBUeCxcclxuICAgIFR4SW5wdXQsXHJcbiAgICBDaXAzMFdhbGxldCxcclxuICAgIERhdHVtLFxyXG4gICAgQXNzZXRzLFxyXG4gICAgV2FsbGV0SGVscGVyLFxyXG4gICAgTWludGluZ1BvbGljeUhhc2gsXHJcbiAgICBBc3NldENsYXNzLFxyXG4gICAgQWRkcmVzcyxcclxuICB9IGZyb20gXCJAaHlwZXJpb25idC9oZWxpb3NcIjtcclxuICBpbXBvcnQgeyBuZXR3b3JrLCBnZXROZXR3b3JrUGFyYW1zIH0gZnJvbSAnLi4vY29tbW9uL25ldHdvcmsnO1xyXG4gIGltcG9ydCBHYW1lUmV3YXJkIGZyb20gJy4uL2NvbnRyYWN0cy9HYW1lUmV3YXJkLmhsJzsgLy8gRW5zdXJlIGNvcnJlY3QgcGF0aCB0byB5b3VyIGNvbnRyYWN0XHJcbiAgXHJcbiAgY29uc3Qgb3B0aW1pemUgPSBmYWxzZTtcclxuICBcclxuICAvLyBDYWxjdWxhdGUgdGhlIHJld2FyZCBiYXNlZCBvbiB0aGUgdGltZSBlbGFwc2VkIHNpbmNlIGNvbnRyYWN0IGRlcGxveW1lbnRcclxuICBmdW5jdGlvbiBjYWxjdWxhdGVSZXdhcmRJblRpbWUoKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IFRpbWVCZWdpbkNvbnRyYWN0ID0gTWF0aC5mbG9vcihuZXcgRGF0ZShEYXRlLlVUQygyMDI0LCAxMSwgMjUsIDEzLCA0NSwgMCkpLmdldFRpbWUoKSkgLyAxMDAwO1xyXG4gICAgY29uc29sZS5sb2coXCJUaW1lQmVnaW5Db250cmFjdFwiICsgVGltZUJlZ2luQ29udHJhY3QpXHJcblxyXG4gICAgY29uc3QgSEFMVklOR19QRVJJT0Q6IG51bWJlciA9IDc3NzYwMDA7IC8vIDMgbW9udGhzIGluIHNlY29uZHMgXHJcbiAgICBjb25zdCBNQVhfSEFMVklOR1M6IG51bWJlciA9IDI7IC8vIExpbWl0IGhhbHZpbmdzIHRvIDIgdGltZXNcclxuICAgIGNvbnN0IEJBU0VfUkVXQVJEOiBudW1iZXIgPSAxMDAwMDsgLy8gSW5pdGlhbCByZXdhcmQgaW4gdG9rZW5zXHJcbiAgXHJcbiAgICAvLyBHZXQgY3VycmVudCB0aW1lIGluIHNlY29uZHNcclxuICAgIGNvbnN0IFRpbWVOb3c6IG51bWJlciA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMDApOyBcclxuICBcclxuICAgIC8vIENhbGN1bGF0ZSB0aGUgZWxhcHNlZCB0aW1lIGluIHNlY29uZHNcclxuICAgIGNvbnN0IHRpbWVFbGFwc2VkOiBudW1iZXIgPSBUaW1lTm93IC0gVGltZUJlZ2luQ29udHJhY3Q7XHJcbiAgICAvLyBEZXRlcm1pbmUgaGFsdmluZyBzdGVwcyBiYXNlZCBvbiBlbGFwc2VkIHRpbWUsIGJ1dCBsaW1pdCB0byBNQVhfSEFMVklOR1NcclxuICAgIGxldCBoYWx2aW5nU3RlcHM6IG51bWJlciA9IE1hdGguZmxvb3IodGltZUVsYXBzZWQgLyBIQUxWSU5HX1BFUklPRCk7XHJcbiAgICBoYWx2aW5nU3RlcHMgPSBNYXRoLm1pbihoYWx2aW5nU3RlcHMsIE1BWF9IQUxWSU5HUyk7IC8vIENhcCBoYWx2aW5ncyBhdCBNQVhfSEFMVklOR1NcclxuICBcclxuICAgICAvLyBFbnN1cmUgdGhlIG51bWJlciBvZiBoYWx2aW5nIHN0ZXBzIGRvZXNuJ3QgZXhjZWVkIHRoZSBtYXhpbXVtIGFsbG93ZWRcclxuICAgICBjb25zdCBlZmZlY3RpdmVIYWx2aW5nczogbnVtYmVyID0gTWF0aC5taW4oaGFsdmluZ1N0ZXBzLCBNQVhfSEFMVklOR1MpO1xyXG4gICAgY29uc29sZS5sb2coXCJIYWx2aW5nc1wiICsgZWZmZWN0aXZlSGFsdmluZ3MpXHJcbiAgICAgLy8gRGlyZWN0bHkgY2FsY3VsYXRlIHJld2FyZCBiYXNlZCBvbiBoYWx2aW5nIHN0ZXBzIHVzaW5nIGEgYml0IHNoaWZ0XHJcbiAgICAgY29uc3QgcmV3YXJkOiBudW1iZXIgPSBCQVNFX1JFV0FSRCAvICgyICoqIGVmZmVjdGl2ZUhhbHZpbmdzKTtcclxuICAgXHJcbiAgICAgLy8gUmV0dXJuIHRoZSByZXdhcmQsIGVuc3VyaW5nIGl0IGRvZXNuJ3QgZmFsbCBiZWxvdyBhIG1pbmltdW0gdmFsdWVcclxuICAgICByZXR1cm4gcmV3YXJkIDwgMSA/IDEgOiByZXdhcmQ7XHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVDb3VudGRvd24oKTogbnVtYmVyIHtcclxuICBcclxuICAgIGNvbnN0IFRpbWVCZWdpbkNvbnRyYWN0ID0gTWF0aC5mbG9vcihuZXcgRGF0ZShEYXRlLlVUQygyMDI0LCAxMSwgMjUsIDEzLCA0NSwgMCkpLmdldFRpbWUoKSk7XHJcblxyXG4gICAgY29uc3QgVGltZU5vdzogbnVtYmVyID0gTWF0aC5mbG9vcihEYXRlLm5vdygpKTsgXHJcbiAgICBjb25zdCBDWUNMRV9EVVJBVElPTiA9IDYwMCAvLyAxMCBtaW51dGVzIFxyXG4gICAgY29uc3Qgb2Zmc2V0SW5NcyA9IDg5NjgwO1xyXG4gICAgY29uc3QgZWxhcHNlZFRpbWUgPSBUaW1lTm93IC0gKG9mZnNldEluTXMpIC0gVGltZUJlZ2luQ29udHJhY3Q7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZUluU2Vjb25kcyA9IGVsYXBzZWRUaW1lIC8gMTAwMDtcclxuICAgIGNvbnN0IHBvc2l0aW9uSW5DeWNsZSA9IGVsYXBzZWRUaW1lSW5TZWNvbmRzICUgQ1lDTEVfRFVSQVRJT047XHJcbiAgXHJcbiAgICByZXR1cm4gcG9zaXRpb25JbkN5Y2xlO1xyXG4gIH0gXHJcbiAgXHJcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNsYWltVG9rZW5zKHdhbGxldEFQSTogYW55LCBzZXRJc0xvYWRpbmc6ICh2YWw6IGJvb2xlYW4pID0+IHZvaWQsIHNldFR4OiAodmFsOiB7dHhJZDogc3RyaW5nfSkgPT4gdm9pZCkge1xyXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIGlmICghd2FsbGV0QVBJKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiV2FsbGV0IEFQSSBpcyBub3Qgc2V0LlwiKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNpcDMwV2FsbGV0QVBJID0gbmV3IENpcDMwV2FsbGV0KHdhbGxldEFQSSk7XHJcblxyXG4gICAgICBjb25zdCB3YWxsZXRIZWxwZXIgPSBuZXcgV2FsbGV0SGVscGVyKGNpcDMwV2FsbGV0QVBJKTtcclxuICAgICAgLy8gUmVhZCBpbiB0aGUgbmV0d29yayBwYXJhbWV0ZXIgZmlsZVxyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zSnNvbiA9IGF3YWl0IGdldE5ldHdvcmtQYXJhbXMobmV0d29yayk7XHJcbiAgICAgIGNvbnN0IG5ldHdvcmtQYXJhbXMgPSBuZXcgTmV0d29ya1BhcmFtcyhuZXR3b3JrUGFyYW1zSnNvbik7XHJcblxyXG4gICAgICBjb25zdCBwb2xpY3lJZCA9IFwiZTE2YzJkYzhhZTkzN2U4ZDM3OTBjN2ZkNzE2OGQ3Yjk5NDYyMWJhMTRjYTExNDE1ZjM5ZmVkNzJcIjtcclxuICAgICAgY29uc3QgbmFtZSA9IEJ1ZmZlci5mcm9tKFwiTUlOXCIsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xyXG5cclxuICAgICAgY29uc3QgbXBoID0gTWludGluZ1BvbGljeUhhc2guZnJvbUhleChwb2xpY3lJZCk7XHJcblxyXG4gICAgICBjb25zdCBhc3NldENsYXNzID0gbmV3IEFzc2V0Q2xhc3Moe1xyXG4gICAgICAgIG1waDogbXBoLCBcclxuICAgICAgICB0b2tlbk5hbWU6IG5hbWVcclxuICAgICAgfSk7IFxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhhc3NldENsYXNzKVxyXG5cclxuICAgICAgY29uc3QgdXR4b3MgPSBhd2FpdCB3YWxsZXRIZWxwZXIuZ2V0VXR4b3MoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJ1dHhvc1wiICsgdXR4b3MpO1xyXG5cclxuICAgICAgLy8gR2V0IGNoYW5nZSBhZGRyZXNzXHJcbiAgICAgIGNvbnN0IGJlbmVmaXRpYXJ5ID0gYXdhaXQgd2FsbGV0SGVscGVyLmNoYW5nZUFkZHJlc3M7XHJcbiAgICAgIC8vIExvYWQgaW4gdGhlIHZlc3RpbmcgdmFsaWRhdG9yIHNjcmlwdCAocHJvZ3JhbSlcclxuICAgICAgY29uc3QgZ2FtZVJld2FyZCA9IG5ldyBHYW1lUmV3YXJkKCk7XHJcblxyXG4gICAgICAvLyBDb21waWxlIHRoZSB2ZXN0aW5nIHZhbGlkYXRvclxyXG4gICAgICBjb25zdCBjb21waWxlZFByb2dyYW0gPSBnYW1lUmV3YXJkLmNvbXBpbGUob3B0aW1pemUpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIldhbGxldCBhZGRyZXNzOiBcIiArIGJlbmVmaXRpYXJ5KVxyXG4gICAgICBjb25zdCBzY3JpcHRBZGRyZXNzID0gQWRkcmVzcy5mcm9tSGFzaGVzKGNvbXBpbGVkUHJvZ3JhbS52YWxpZGF0b3JIYXNoKVxyXG4gICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKHNjcmlwdEFkZHJlc3MudG9CZWNoMzIoKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU2NyaXB0IEFkZHJlc3M6XCIgKyBzY3JpcHRBZGRyZXNzKVxyXG4gICAgICBcclxuICAgICAgY29uc29sZS5kaXIoc2NyaXB0QWRkcmVzcywgeyBkZXB0aDogbnVsbCB9KTtcclxuXHJcbiAgICAgIGNvbnN0IHNvcnRlZFV0eG9zID0gYXdhaXQgZmV0Y2hVdHhvcyhzY3JpcHRBZGRyZXNzLnRvQmVjaDMyKCkpXHJcblxyXG4gICAgICAvLyBjb25zdCBUT1RBTF9TVVBQTFkgPSAxMDAwMDsgLy8gVG90YWwgdG9rZW4gc3VwcGx5XHJcbiAgICAgIGNvbnN0IENMQUlNX1dJTkRPVyA9IDIwOyAvLyAyMCBzZWNvbmRzIFxyXG5cclxuICAgICAgLy9jb25zdCByZW1haW5pbmdTdXBwbHkgPSBnZXRUb2tlbkFtb3VudEZyb21VdHhvcyhmaWx0ZXJlZFV0eG9zLCBhc3NldENsYXNzKTtcclxuICAgICAgY29uc3QgZHluYW1pY1Jld2FyZCA9IGNhbGN1bGF0ZVJld2FyZEluVGltZSgpXHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uSW5DeWNsZSA9IGNhbGN1bGF0ZUNvdW50ZG93bigpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uSW5DeWNsZVwiICsgcG9zaXRpb25JbkN5Y2xlKTtcclxuICAgICAgd2luZG93Lm9uZXJyb3IgPSAoKSA9PiBwb3NpdGlvbkluQ3ljbGUgPCBDTEFJTV9XSU5ET1c7XHJcbiAgICAgIC8vY29uc3QgZHluYW1pY1Jld2FyZCA9IGNhbGN1bGF0ZVJld2FyZChOdW1iZXIocmVtYWluaW5nU3VwcGx5KSwgVE9UQUxfU1VQUExZLCBCQVNFX1JFV0FSRCk7XHJcbiAgICAgIGNvbnN0IHRlc3RWYWx1ZUJlbmVmaXRpYXJ5PSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgQmlnSW50KGR5bmFtaWNSZXdhcmQpXV0pO1xyXG4gICAgICBcclxuICAgICAgLy9jb25zdCB0b3RhbEFtb3VudFV0eG8gPSBnZXRUb2tlbkFtb3VudEZyb21VdHhvcyhzb3J0ZWRVdHhvcy5zZWxlY3RlZCwgYXNzZXRDbGFzcyk7XHJcbiAgICAgIGNvbnN0IGFtb3VudFRvU2VuZEJhY2sgPSBCaWdJbnQoc29ydGVkVXR4b3MudG90YWxBbW91bnQpIC0gQmlnSW50KGR5bmFtaWNSZXdhcmQpO1xyXG5cclxuICAgICAgY29uc3QgZmlyc3RQYXJ0VG9TZW5kQmFjayA9IGFtb3VudFRvU2VuZEJhY2sgLyAybjsgLy8gRmlyc3QgcGFydCBpcyBoYWxmIG9mIHRoZSB0b3RhbCBhbW91bnRcclxuICAgICAgY29uc3Qgc2Vjb25kUGFydFRvU2VuZEJhY2sgPSBhbW91bnRUb1NlbmRCYWNrIC0gZmlyc3RQYXJ0VG9TZW5kQmFjazsgLy8gU2Vjb25kIHBhcnQgaXMgdGhlIHJlbWFpbmRlclxyXG4gICAgICBjb25zb2xlLmxvZyhcIkZpcnN0IFwiICsgZmlyc3RQYXJ0VG9TZW5kQmFjaylcclxuICAgICAgY29uc29sZS5sb2coXCJTZXZvbmQgXCIgKyBzZWNvbmRQYXJ0VG9TZW5kQmFjaylcclxuICAgICAgY29uc29sZS5sb2coZHluYW1pY1Jld2FyZFx0KVxyXG5cclxuICAgICAgY29uc3QgdmFsdWVDb250cmFjdDE9IG5ldyBBc3NldHMoW1thc3NldENsYXNzLCBmaXJzdFBhcnRUb1NlbmRCYWNrXV0pO1xyXG4gICAgICBjb25zdCB2YWx1ZUNvbnRyYWN0Mj0gbmV3IEFzc2V0cyhbW2Fzc2V0Q2xhc3MsIHNlY29uZFBhcnRUb1NlbmRCYWNrXV0pO1xyXG5cclxuXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IG5ldyBnYW1lUmV3YXJkLnR5cGVzLkRhdHVtKFxyXG4gICAgICAgIGJlbmVmaXRpYXJ5LnB1YktleUhhc2gsXHJcbiAgICAgIClcclxuXHJcbiAgICAgICAvLyBDcmVhdGUgdGhlIHZlc3RpbmcgY2xhaW0gcmVkZWVtZXJcclxuICAgICAgIGNvbnN0IHJlZGVlbWJlciA9IChuZXcgZ2FtZVJld2FyZC50eXBlcy5SZWRlZW1lci5DbGFpbShiZW5lZml0aWFyeS5wdWJLZXlIYXNoKSlcclxuICAgICAgIC5fdG9VcGxjRGF0YSgpO1xyXG4gICAgXHJcbiAgICAgIC8vY29uc29sZS5sb2coZmlsdGVyZWRVdHhvcyk7XHJcbiAgICAgIGNvbnN0IHR4ID0gbmV3IFR4KCk7XHJcblxyXG4gICAgICAvL3R4LmFkZElucHV0cyh1dHhvc1swXSk7XHJcbiAgICAgIHR4LmFkZElucHV0cyhzb3J0ZWRVdHhvcy5zZWxlY3RlZCwgcmVkZWVtYmVyKTtcclxuICAgICAgdHguYXR0YWNoU2NyaXB0KGNvbXBpbGVkUHJvZ3JhbSk7XHJcblxyXG4gICAgICB2YXIgdXNlckNsYWltT3V0cHV0ID0gbmV3IFR4T3V0cHV0KFxyXG4gICAgICAgIGJlbmVmaXRpYXJ5LFxyXG4gICAgICAgIG5ldyBWYWx1ZSh1bmRlZmluZWQsIHRlc3RWYWx1ZUJlbmVmaXRpYXJ5KSk7XHJcblxyXG4gICAgICB0eC5hZGRPdXRwdXQodXNlckNsYWltT3V0cHV0KTtcclxuXHJcbiAgICBcclxuICAgIC8vU2hpaWl0LCBmaXguIFNvbWVvbmUgY291bGQgcmVkaXJlZHQgdGhlIHJlc3Qgb2YgdGhlIHRva2Vuc1xyXG4gICAgLy8gY29uc3QgYWRkcmVzc1N0ciA9IFwiYWRkcl90ZXN0MXFyYXJxaG1rbG5od2N3M3Ewem02c2dtM2czbDdwdWEweTM2c3FsOWs1cnU4ZHN1Y2dsc2tlZDVmNXlyY2Y5ZTl4Z3hqZ210N3hrNTJrbmg4aDBkZ2F5YzAwYXJxbGg3ZzYwXCI7XHJcbiAgICAvLyBjb25zdCBhZGRyZXNzID0gQWRkcmVzcy5mcm9tQmVjaDMyKGFkZHJlc3NTdHIpO1xyXG4gICAgLy8gdHguYWRkT3V0cHV0KG5ldyBUeE91dHB1dChcclxuICAgIC8vICAgYWRkcmVzcyxcclxuICAgIC8vICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlQ29udHJhY3QpIC8vIFRoZSBhbW91bnQgYmVpbmcgY2xhaW1lZFxyXG4gICAgLy8gKSk7XHJcbiAgICBcclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBBREEgaW4gdGhlIHNlbGVjdGVkIHNjcmlwdCBpbnB1dHNcclxuICAgIGxldCB0b3RhbEFkYUluSW5wdXRzID0gQmlnSW50KDApO1xyXG4gICAgc29ydGVkVXR4b3Muc2VsZWN0ZWQuZm9yRWFjaCh1dHhvID0+IHtcclxuICAgICAgICB0b3RhbEFkYUluSW5wdXRzICs9IEJpZ0ludCh1dHhvLm91dHB1dC52YWx1ZS5sb3ZlbGFjZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEaXN0cmlidXRlIEFEQSBlcXVhbGx5IChvciBhcyByZXF1aXJlZCkgYW1vbmcgc2NyaXB0IG91dHB1dHNcclxuICAgIGNvbnN0IGFkYVBlclNjcmlwdE91dHB1dCA9IHRvdGFsQWRhSW5JbnB1dHMgLyAybjsgLy8gQXNzdW1pbmcgdHdvIHNjcmlwdCBvdXRwdXRzXHJcblxyXG4gICAgaWYgKGFtb3VudFRvU2VuZEJhY2sgIT0gQmlnSW50KDApKXtcclxuICAgICAgdmFyIHNjcmlwdFV0eG8xID1uZXcgVHhPdXRwdXQoXHJcbiAgICAgICAgc2NyaXB0QWRkcmVzcyxcclxuICAgICAgICBuZXcgVmFsdWUoYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MSksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgRGF0dW0uaW5saW5lKGdhbWVEYXR1bSkgLy8gQ29udHJhY3QgcmVxdWlyZXMgZGF0dW1cclxuICAgICAgICk7XHJcblxyXG4gICAgICAgdHguYWRkT3V0cHV0KHNjcmlwdFV0eG8xKTtcclxuXHJcbiAgICAgIHZhciBzY3JpcHRVdHhvMiA9IG5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZSh0b3RhbEFkYUluSW5wdXRzIC0gYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MiksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgRGF0dW0uaW5saW5lKGdhbWVEYXR1bSkgLy8gQ29udHJhY3QgcmVxdWlyZXMgZGF0dW1cclxuICAgICAgICk7XHJcbiAgICBcclxuICAgICAgIHR4LmFkZE91dHB1dChzY3JpcHRVdHhvMik7XHJcbiAgICB9ICBcclxuXHJcbiAgICAgIC8vdmFyIGlucHV0RmVlcyA9IGF3YWl0IHdhbGxldEhlbHBlci5waWNrVXR4b3MobmV3IFZhbHVlKHRva2VuQW1vdW50RmVlcykpO1xyXG4gICAgICBcclxuICAgICAgLy90eC5hZGRJbnB1dHMoaW5wdXRGZWVzWzBdKTtcclxuICAgICAgY29uc29sZS5sb2coXCJXZSBhdHRhdGNoZWQgZXZlcnl0aGluZyFcIilcclxuXHJcbiAgICAgIFxyXG5cclxuICAgICAgYXdhaXQgdHguZmluYWxpemUobmV0d29ya1BhcmFtcywgYmVuZWZpdGlhcnksIHV0eG9zKTtcclxuICAgICAgY29uc29sZS5sb2coXCJkYWxpIGZpbmFsaXppcmFobWU/XCIpXHJcbiAgICAgIC8vIFNpZ24gdGhlIHVuc2lnbmVkIHR4IHRvIGdldCB0aGUgd2l0bmVzc1xyXG4gICAgICBjb25zdCBzaWduYXR1cmVzID0gYXdhaXQgY2lwMzBXYWxsZXRBUEkuc2lnblR4KHR4KTtcclxuICAgICAgdHguYWRkU2lnbmF0dXJlcyhzaWduYXR1cmVzKTtcclxuICAgICAgY29uc29sZS5sb2coXCJEYWxpIHEgc2lnbmlyYWhtZT9cIilcclxuXHJcbiAgICAgIGNvbnN0IHR4SGFzaCA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnN1Ym1pdFR4KHR4KTtcclxuXHJcbiAgICAgIHNldFR4KHsgdHhJZDogdHhIYXNoLmhleCB9KTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzdWJtaXQgdHggZmFpbGVkXCIsIGVycik7XHJcbiAgICAgICAgdGhyb3cgZXJyOyBcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmQod2FsbGV0QVBJOiBhbnksIHNldElzTG9hZGluZzogKHZhbDogYm9vbGVhbikgPT4gdm9pZCwgc2V0VHg6ICh2YWw6IHt0eElkOiBzdHJpbmd9KSA9PiB2b2lkKSB7XHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgaWYgKCF3YWxsZXRBUEkpIHtcclxuICAgICAgdGhyb3cgY29uc29sZS5lcnJvcihcIndhbGxldEFQSSBpcyBub3Qgc2V0XCIpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2lwMzBXYWxsZXRBUEkgPSBuZXcgQ2lwMzBXYWxsZXQod2FsbGV0QVBJKTtcclxuICAgICAgLy8gY29uc3QgYmxvY2tmcm9zdCA9IG5ldyBCbG9ja0Zyb3N0SVBGUyh7XHJcbiAgICAgIC8vICAgbmV0d29yazogbmV0d29yayxcclxuICAgICAgLy8gICBwcm9qZWN0SWQ6IFwicHJlcHJvZEpFeE8wTUFNUmdmcFh6OUlsNElxQjJ1OWRkb3lsWkJUXCIsXHJcbiAgICAgIC8vIH0pO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImdtbW1cIilcclxuXHJcbiAgICAgIGNvbnN0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIoY2lwMzBXYWxsZXRBUEkpO1xyXG5cclxuICAgICAgY29uc3QgcG9saWN5SWQgPSBcImUxNmMyZGM4YWU5MzdlOGQzNzkwYzdmZDcxNjhkN2I5OTQ2MjFiYTE0Y2ExMTQxNWYzOWZlZDcyXCI7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBCdWZmZXIuZnJvbShcIk1JTlwiLCAndXRmOCcpLnRvU3RyaW5nKCdoZXgnKTtcclxuXHJcbiAgICAgIC8vIGNvbnN0IHBvbGljeUlkID0gXCJcIjtcclxuICAgICAgLy8gY29uc3QgbmFtZSA9IEJ1ZmZlci5mcm9tKFwiXCIsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xyXG5cclxuICAgICAgY29uc3QgbXBoID0gTWludGluZ1BvbGljeUhhc2guZnJvbUhleChwb2xpY3lJZCk7XHJcblxyXG4gICAgICBjb25zdCBhc3NldENsYXNzID0gbmV3IEFzc2V0Q2xhc3Moe1xyXG4gICAgICAgIG1waDogbXBoLCAvLyBZb3VyIHBvbGljeSBoYXNoXHJcbiAgICAgICAgdG9rZW5OYW1lOiBuYW1lLy8gQ29udmVydCB0byBoZXggc3RyaW5nXHJcbiAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYXNzZXRDbGFzcylcclxuXHJcbiAgICAgIGNvbnN0IG1pbkFkYSA6IG51bWJlciA9IDFfMDAwXzAwMDsgLy8gbWluaW11bSBsb3ZlbGFjZSB0byBzZW5kXHJcbiAgICAgIGNvbnN0IG1pbkFkYVZhbCA9IG5ldyBWYWx1ZShCaWdJbnQobWluQWRhKSk7XHJcblxyXG4gICAgICAvLyAgY29uc3QgYmVuZWZpdGlhcnlWYWx1ZSA9IG5ldyBWYWx1ZShCaWdJbnQoMTAwMDApLCBuZXcgQXNzZXRzKFtcclxuICAgICAgLy8gICBbbXBoLCBbW25hbWUsIEJpZ0ludCgxMDAwMCldXV1cclxuICAgICAgLy8gXSkpXHJcblxyXG5cclxuICAgICAgY29uc3QgdGVzdFZhbHVlU2NyaXB0ID0gbmV3IEFzc2V0cyhbW2Fzc2V0Q2xhc3MsIEJpZ0ludCgxMjU1NTApXV0pO1xyXG5cclxuXHJcbiAgICAgIC8vIEdldCB3YWxsZXQgVVRYT3NcclxuICAgICAgY29uc3QgdXR4b3MgPSBhd2FpdCB3YWxsZXRIZWxwZXIucGlja1V0eG9zKG5ldyBWYWx1ZSh1bmRlZmluZWQsIHRlc3RWYWx1ZVNjcmlwdCkpO1xyXG4gICAgICBjb25zb2xlLmxvZyh1dHhvcyk7XHJcblxyXG4gICAgICAvLyBHZXQgY2hhbmdlIGFkZHJlc3NcclxuICAgICAgY29uc3QgYmVuZWZpdGlhcnkgPSBhd2FpdCB3YWxsZXRIZWxwZXIuY2hhbmdlQWRkcmVzcztcclxuICAgICAgLy8gTG9hZCBpbiB0aGUgdmVzdGluZyB2YWxpZGF0b3Igc2NyaXB0IChwcm9ncmFtKVxyXG4gICAgICBjb25zdCBnYW1lUmV3YXJkID0gbmV3IEdhbWVSZXdhcmQoKTtcclxuXHJcbiAgICAgIC8vIENvbXBpbGUgdGhlIHZlc3RpbmcgdmFsaWRhdG9yXHJcbiAgICAgIGNvbnN0IGNvbXBpbGVkUHJvZ3JhbSA9IGdhbWVSZXdhcmQuY29tcGlsZShvcHRpbWl6ZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2FsbGV0IGFkZHJlc3M6IFwiICsgYmVuZWZpdGlhcnkpXHJcbiAgICAgIGNvbnN0IHNjcmlwdEFkZHJlc3MgPSBBZGRyZXNzLmZyb21IYXNoZXMoY29tcGlsZWRQcm9ncmFtLnZhbGlkYXRvckhhc2gpXHJcbiAgICBcclxuICAgICAgICAvL3JlbW92ZVxyXG4gICAgICBjb25zb2xlLmxvZyhzY3JpcHRBZGRyZXNzLnRvQmVjaDMyKCkpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNjcmlwdCBBZGRyZXNzOlwiICsgc2NyaXB0QWRkcmVzcylcclxuICAgICAgXHJcbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgdmVzdGluZyBkYXR1bVxyXG4gICAgICBjb25zdCBnYW1lRGF0dW0gPSBuZXcgZ2FtZVJld2FyZC50eXBlcy5EYXR1bShcclxuICAgICAgICBiZW5lZml0aWFyeS5wdWJLZXlIYXNoLFxyXG4gICAgICApXHJcbiAgICBcclxuICAgIC8vY29uc3QgcmVkZWVtYmVyID0gKG5ldyBnYW1lUmV3YXJkLnR5cGVzLlJlZGVlbWVyLkNsYWltKCkpLl90b1VwbGNEYXRhKCk7XHJcbiAgICBcclxuICAgICAgY29uc3QgdHggPSBuZXcgVHgoKTtcclxuICAgICAgdHguYWRkSW5wdXRzKHV0eG9zWzBdKTtcclxuICAgICAgdHguYWRkT3V0cHV0KG5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZSh1bmRlZmluZWQsIHRlc3RWYWx1ZVNjcmlwdCksXHJcbiAgICAgICAgRGF0dW0uaW5saW5lKGdhbWVEYXR1bSlcclxuICAgICAgKSk7XHJcblxyXG4gICAgICAvLyB0eC5hZGRPdXRwdXQobmV3IFR4T3V0cHV0KFxyXG4gICAgICAvLyAgIGJlbmVmaXRpYXJ5LFxyXG4gICAgICAvLyAgIG1pbkFkYVZhbCxcclxuICAgICAgLy8gKSk7XHJcbiAgICBcclxuICAgICAgY29uc29sZS5sb2coXCJXZSBhdHRhdGNoZWQgZXZlcnl0aGluZyFcIilcclxuXHJcbiAgICAgIC8vIFJlYWQgaW4gdGhlIG5ldHdvcmsgcGFyYW1ldGVyIGZpbGVcclxuICAgICAgY29uc3QgbmV0d29ya1BhcmFtc0pzb24gPSBhd2FpdCBnZXROZXR3b3JrUGFyYW1zKG5ldHdvcmspO1xyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zID0gbmV3IE5ldHdvcmtQYXJhbXMobmV0d29ya1BhcmFtc0pzb24pO1xyXG5cclxuICAgICAgLy8gU2VuZCBhbnkgY2hhbmdlIGJhY2sgdG8gdGhlIGJ1eWVyXHJcbiAgICAgIGF3YWl0IHR4LmZpbmFsaXplKG5ldHdvcmtQYXJhbXMsIGJlbmVmaXRpYXJ5LCB1dHhvc1sxXSk7XHJcblxyXG4gICAgICAvLyBTaWduIHRoZSB1bnNpZ25lZCB0eCB0byBnZXQgdGhlIHdpdG5lc3NcclxuICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnNpZ25UeCh0eCk7XHJcbiAgICAgIHR4LmFkZFNpZ25hdHVyZXMoc2lnbmF0dXJlcyk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZyhcInNpZ25lZFwiKTtcclxuICAgICAgLy8gU3VibWl0IHRoZSBzaWduZWQgdHhcclxuICAgICAgY29uc3QgdHhIYXNoID0gYXdhaXQgY2lwMzBXYWxsZXRBUEkuc3VibWl0VHgodHgpO1xyXG5cclxuICAgICAgc2V0VHgoeyB0eElkOiB0eEhhc2guaGV4IH0pO1xyXG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG5cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgdGhyb3cgY29uc29sZS5lcnJvcihcInN1Ym1pdCB0eCBmYWlsZWRcIiwgZXJyKTtcclxuICAgIH1cclxuICB9XHJcbiAgICBcclxuICBhc3luYyBmdW5jdGlvbiBmZXRjaFV0eG9zKHNjcmlwdEFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8eyBzZWxlY3RlZDogVHhJbnB1dFtdOyB0b3RhbEFtb3VudDogYmlnaW50IH0+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYGh0dHA6Ly8xOTIuMTY4LjEuMTAxOjMwMDEvYXBpL2dldFV0eG9zYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2NyaXB0QWRkcmVzc30pLFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBSYXcgSlNPTiBhcnJheSBmcm9tIGJhY2tlbmRcclxuICBcclxuICAgIC8vIGBDb252ZXJ0IEpTT04gYmFjayB0byBUeElucHV0IG9iamVjdHNcclxuICAgIGNvbnN0IHNlbGVjdGVkVXR4b3MgPSBkYXRhLnNlbGVjdGVkLm1hcCgodXR4bzogYW55KSA9PiBUeElucHV0LmZyb21GdWxsQ2Jvcih1dHhvKSk7XHJcbiAgICBjb25zdCB0b3RhbEFtb3VudDogYmlnaW50ID0gQmlnSW50KGRhdGEudG90YWxBbW91bnQpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHNlbGVjdGVkOiBzZWxlY3RlZFV0eG9zLFxyXG4gICAgICB0b3RhbEFtb3VudCxcclxuICAgIH07XHJcbiAgfVxyXG4gICJdLCJuYW1lcyI6WyJOZXR3b3JrUGFyYW1zIiwiVmFsdWUiLCJUeE91dHB1dCIsIlR4IiwiVHhJbnB1dCIsIkNpcDMwV2FsbGV0IiwiRGF0dW0iLCJBc3NldHMiLCJXYWxsZXRIZWxwZXIiLCJNaW50aW5nUG9saWN5SGFzaCIsIkFzc2V0Q2xhc3MiLCJBZGRyZXNzIiwibmV0d29yayIsImdldE5ldHdvcmtQYXJhbXMiLCJHYW1lUmV3YXJkIiwib3B0aW1pemUiLCJjYWxjdWxhdGVSZXdhcmRJblRpbWUiLCJUaW1lQmVnaW5Db250cmFjdCIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJVVEMiLCJnZXRUaW1lIiwiY29uc29sZSIsImxvZyIsIkhBTFZJTkdfUEVSSU9EIiwiTUFYX0hBTFZJTkdTIiwiQkFTRV9SRVdBUkQiLCJUaW1lTm93Iiwibm93IiwidGltZUVsYXBzZWQiLCJoYWx2aW5nU3RlcHMiLCJtaW4iLCJlZmZlY3RpdmVIYWx2aW5ncyIsInJld2FyZCIsImNhbGN1bGF0ZUNvdW50ZG93biIsIkNZQ0xFX0RVUkFUSU9OIiwib2Zmc2V0SW5NcyIsImVsYXBzZWRUaW1lIiwiZWxhcHNlZFRpbWVJblNlY29uZHMiLCJwb3NpdGlvbkluQ3ljbGUiLCJjbGFpbVRva2VucyIsIndhbGxldEFQSSIsInNldElzTG9hZGluZyIsInNldFR4IiwiRXJyb3IiLCJjaXAzMFdhbGxldEFQSSIsIndhbGxldEhlbHBlciIsIm5ldHdvcmtQYXJhbXNKc29uIiwibmV0d29ya1BhcmFtcyIsInBvbGljeUlkIiwibmFtZSIsIkJ1ZmZlciIsImZyb20iLCJ0b1N0cmluZyIsIm1waCIsImZyb21IZXgiLCJhc3NldENsYXNzIiwidG9rZW5OYW1lIiwidXR4b3MiLCJnZXRVdHhvcyIsImJlbmVmaXRpYXJ5IiwiY2hhbmdlQWRkcmVzcyIsImdhbWVSZXdhcmQiLCJjb21waWxlZFByb2dyYW0iLCJjb21waWxlIiwic2NyaXB0QWRkcmVzcyIsImZyb21IYXNoZXMiLCJ2YWxpZGF0b3JIYXNoIiwidG9CZWNoMzIiLCJkaXIiLCJkZXB0aCIsInNvcnRlZFV0eG9zIiwiZmV0Y2hVdHhvcyIsIkNMQUlNX1dJTkRPVyIsImR5bmFtaWNSZXdhcmQiLCJ3aW5kb3ciLCJvbmVycm9yIiwidGVzdFZhbHVlQmVuZWZpdGlhcnkiLCJCaWdJbnQiLCJhbW91bnRUb1NlbmRCYWNrIiwidG90YWxBbW91bnQiLCJmaXJzdFBhcnRUb1NlbmRCYWNrIiwic2Vjb25kUGFydFRvU2VuZEJhY2siLCJ2YWx1ZUNvbnRyYWN0MSIsInZhbHVlQ29udHJhY3QyIiwiZ2FtZURhdHVtIiwidHlwZXMiLCJwdWJLZXlIYXNoIiwicmVkZWVtYmVyIiwiUmVkZWVtZXIiLCJDbGFpbSIsIl90b1VwbGNEYXRhIiwidHgiLCJhZGRJbnB1dHMiLCJzZWxlY3RlZCIsImF0dGFjaFNjcmlwdCIsInVzZXJDbGFpbU91dHB1dCIsInVuZGVmaW5lZCIsImFkZE91dHB1dCIsInRvdGFsQWRhSW5JbnB1dHMiLCJmb3JFYWNoIiwidXR4byIsIm91dHB1dCIsInZhbHVlIiwibG92ZWxhY2UiLCJhZGFQZXJTY3JpcHRPdXRwdXQiLCJzY3JpcHRVdHhvMSIsImlubGluZSIsInNjcmlwdFV0eG8yIiwiZmluYWxpemUiLCJzaWduYXR1cmVzIiwic2lnblR4IiwiYWRkU2lnbmF0dXJlcyIsInR4SGFzaCIsInN1Ym1pdFR4IiwidHhJZCIsImhleCIsImVyciIsImVycm9yIiwic2VuZCIsIm1pbkFkYSIsIm1pbkFkYVZhbCIsInRlc3RWYWx1ZVNjcmlwdCIsInBpY2tVdHhvcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkYXRhIiwianNvbiIsInNlbGVjdGVkVXR4b3MiLCJtYXAiLCJmcm9tRnVsbENib3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./public/walletActions.ts\n"));

/***/ })

});