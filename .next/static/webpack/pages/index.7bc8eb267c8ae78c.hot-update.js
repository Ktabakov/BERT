"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./public/walletActions.ts":
/*!*********************************!*\
  !*** ./public/walletActions.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RedeemerVariant: () => (/* binding */ RedeemerVariant),\n/* harmony export */   calculateCountdown: () => (/* binding */ calculateCountdown),\n/* harmony export */   claimTokens: () => (/* binding */ claimTokens),\n/* harmony export */   send: () => (/* binding */ send)\n/* harmony export */ });\n/* harmony import */ var _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @hyperionbt/helios */ \"./node_modules/@hyperionbt/helios/helios.js\");\n/* harmony import */ var _common_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/network */ \"./common/network.ts\");\n/* harmony import */ var _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/GameReward.hl */ \"./contracts/GameReward.hl\");\n/* harmony import */ var _contracts_GameRewardCbor1_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contracts/GameRewardCbor1.json */ \"./contracts/GameRewardCbor1.json\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\n // Ensure correct path to your contract\nconst optimize = false;\nfunction calculateCountdown() {\n    const TimeBeginContract = 1736073600000;\n    const TimeNow = Math.floor(Date.now());\n    const CYCLE_DURATION = 600 // 10 minutes \n    ;\n    const offsetInMs = 89680;\n    const elapsedTime = TimeNow - offsetInMs - TimeBeginContract;\n    const elapsedTimeInSeconds = elapsedTime / 1000;\n    const positionInCycle = elapsedTimeInSeconds % CYCLE_DURATION;\n    return positionInCycle;\n}\nvar RedeemerVariant = /*#__PURE__*/ function(RedeemerVariant) {\n    RedeemerVariant[RedeemerVariant[\"Cancel\"] = 0] = \"Cancel\";\n    RedeemerVariant[RedeemerVariant[\"Claim\"] = 1] = \"Claim\"; // Corresponds to 'Claim' variant\n    return RedeemerVariant;\n}({});\n // { cborHex: \"4e4d010000...\" }\nasync function claimTokens(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw new Error(\"Wallet API is not set.\");\n    }\n    try {\n        var _benefitiary_pubKeyHash;\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        const policyId = \"5b9006e5051296968c46a3e9206f2f02c8157ff041871290960d6adf\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name\n        });\n        console.log(assetClass);\n        const utxos = await walletHelper.getUtxos();\n        console.log(\"utxos\", utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const cborHex = _contracts_GameRewardCbor1_json__WEBPACK_IMPORTED_MODULE_2__.cborHex;\n        //const compiledProgram = Program.new(cborHex); \n        //const uplcProgram = new NativeScript(cborHex as unknown as number);\n        const uplcProgram = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.UplcProgram.fromCbor(cborHex);\n        //console.log(\"compiledProgram\" + compiledProgram);\n        console.log(\"benefitiary.pubKeyHash?.hex!)\" + ((_benefitiary_pubKeyHash = benefitiary.pubKeyHash) === null || _benefitiary_pubKeyHash === void 0 ? void 0 : _benefitiary_pubKeyHash.hex));\n        //const gameReward = new GameReward();\n        // Compile the vesting validator\n        //const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromBech32(\"addr1wygd2q56lc098fn0yrx9n6ngrjfjylxefxqztas6fffz7dsl4y9kn\");\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        console.dir(scriptAddress, {\n            depth: null\n        });\n        console.log(\"benefitiary.pubKeyHash!.hex\", benefitiary.pubKeyHash.hex);\n        const gameDatum = createGameDatum(benefitiary.pubKeyHash.hex);\n        console.log(\"gameDatum\", gameDatum);\n        // console.log(\"Datum\",  Datum.inline(\n        //   new ConstrData(0, [ new ByteArrayData(hexToBytes(benefitiary.pubKeyHash?.hex!)) ])\n        // ))\n        // console.log(\"Datum2\",new ConstrData(0, [ new ByteArrayData(hexToBytes(benefitiary.pubKeyHash?.hex!)) ]))\n        // const gameDatum = new gameReward.types.Datum(\n        //   benefitiary.pubKeyHash,\n        // )\n        // Create the vesting claim redeemer\n        //  const redeember = (new gameReward.types.Redeemer.Claim(benefitiary.pubKeyHash))\n        //  ._toUplcData();\n        // // Convert the hex string to bytes\n        // const recepiantBytes = hexToBytes(benefitiary.hex);\n        // // Create a PubKeyHash object\n        // const recepiantPkh = makePubKeyHash(recepiantBytes);\n        // Convert PubKeyHash to UplcData\n        //const dataRedeemer = recepiantPkh.toUplcData();\n        //const claimRedeemer = makeTxSpendingRedeemer(RedeemerVariant.Claim, dataRedeemer).toCbor();\n        const claimRedeemer = createClaimRedeemer(benefitiary.pubKeyHash.hex);\n        console.log(\"claimRedeemer\", claimRedeemer);\n        console.log(\"benefitiary.pubKeyHash\", benefitiary.pubKeyHash);\n        console.log(\"benefitiary.pubKeyHash!.hex\", benefitiary.pubKeyHash.hex);\n        //console.log(filteredUtxos);\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        const sortedUtxos = await fetchUtxos(scriptAddress.toBech32());\n        console.log(\"sortedUtxos\", sortedUtxos);\n        const CLAIM_WINDOW = 20; // 20 seconds \n        const positionInCycle = calculateCountdown();\n        console.log(\"positionInCycle\" + positionInCycle);\n        window.onerror = ()=>positionInCycle < CLAIM_WINDOW;\n        //const dynamicReward = calculateReward(Number(remainingSupply), TOTAL_SUPPLY, BASE_REWARD);\n        const testValueBenefitiary = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(sortedUtxos.dynamicReward)\n            ]\n        ]);\n        //const totalAmountUtxo = getTokenAmountFromUtxos(sortedUtxos.selected, assetClass);\n        const amountToSendBack = BigInt(sortedUtxos.totalAmount) - BigInt(sortedUtxos.dynamicReward);\n        const firstPartToSendBack = amountToSendBack / 2n; // First part is half of the total amount\n        const secondPartToSendBack = amountToSendBack - firstPartToSendBack; // Second part is the remainder\n        console.log(\"First \" + firstPartToSendBack);\n        console.log(\"Sevond \" + secondPartToSendBack);\n        console.log(sortedUtxos.dynamicReward);\n        const valueContract1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                firstPartToSendBack\n            ]\n        ]);\n        const valueContract2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                secondPartToSendBack\n            ]\n        ]);\n        //tx.addInputs(utxos[0]);\n        tx.addInputs(sortedUtxos.selected, claimRedeemer);\n        tx.attachScript(uplcProgram);\n        var userClaimOutput = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(benefitiary, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueBenefitiary));\n        tx.addOutput(userClaimOutput);\n        //Shiiit, fix. Someone could rediredt the rest of the tokens\n        // const addressStr = \"addr_test1qrarqhmklnhwcw3q0zm6sgm3g3l7pua0y36sql9k5ru8dsucglsked5f5yrcf9e9xgxjgmt7xk52knh8h0dgayc00arqlh7g60\";\n        // const address = Address.fromBech32(addressStr);\n        // tx.addOutput(new TxOutput(\n        //   address,\n        //   new Value(undefined, testValueContract) // The amount being claimed\n        // ));\n        // Calculate total ADA in the selected script inputs\n        let totalAdaInInputs = BigInt(0);\n        sortedUtxos.selected.forEach((utxo)=>{\n            totalAdaInInputs += BigInt(utxo.output.value.lovelace);\n        });\n        // Distribute ADA equally (or as required) among script outputs\n        const adaPerScriptOutput = totalAdaInInputs / 2n; // Assuming two script outputs\\\n        if (amountToSendBack != BigInt(0)) {\n            var scriptUtxo1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(adaPerScriptOutput, valueContract1), gameDatum);\n            tx.addOutput(scriptUtxo1);\n            var scriptUtxo2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(totalAdaInInputs - adaPerScriptOutput, valueContract2), gameDatum);\n            tx.addOutput(scriptUtxo2);\n        }\n        //var inputFees = await walletHelper.pickUtxos(new Value(tokenAmountFees));\n        //tx.addInputs(inputFees[0]);\n        console.log(\"We attatched everything!\");\n        await tx.finalize(networkParams, benefitiary, utxos);\n        console.log(\"dali finalizirahme?\");\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"Dali q signirahme?\");\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        console.error(\"submit tx failed\", err);\n        throw err;\n    }\n}\nasync function send(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw console.error(\"walletAPI is not set\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        // const blockfrost = new BlockFrostIPFS({\n        //   network: network,\n        //   projectId: \"preprodJExO0MAMRgfpXz9Il4IqB2u9ddoylZBT\",\n        // });\n        console.log(\"gmmm\");\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        const policyId = \"5b9006e5051296968c46a3e9206f2f02c8157ff041871290960d6adf\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name // Convert to hex string\n        });\n        console.log(assetClass);\n        const minAda = 1000000; // minimum lovelace to send\n        const minAdaVal = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(BigInt(minAda));\n        const testValueScript = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(125550)\n            ]\n        ]);\n        // Get wallet UTXOs\n        const utxos = await walletHelper.pickUtxos(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript));\n        console.log(utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const gameReward = new _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        // Compile the vesting validator\n        const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromHashes(compiledProgram.validatorHash);\n        //remove\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        // Construct the vesting datum\n        const gameDatum = new gameReward.types.Datum(benefitiary.pubKeyHash);\n        //const redeember = (new gameReward.types.Redeemer.Claim())._toUplcData();\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        tx.addInputs(utxos[0]);\n        tx.addOutput(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(gameDatum)));\n        // tx.addOutput(new TxOutput(\n        //   benefitiary,\n        //   minAdaVal,\n        // ));\n        console.log(\"We attatched everything!\");\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        // Send any change back to the buyer\n        await tx.finalize(networkParams, benefitiary, utxos[1]);\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"signed\");\n        // Submit the signed tx\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        throw console.error(\"submit tx failed\", err);\n    }\n}\nasync function fetchUtxos(scriptAddress) {\n    const response = await fetch(\"/api/getUtxos\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            scriptAddress\n        })\n    });\n    const data = await response.json(); // Raw JSON array from backend\n    // `Convert JSON back to TxInput objects\n    const selectedUtxos = data.selected.map((utxo)=>_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxInput.fromFullCbor(utxo));\n    const dynamicReward = BigInt(data.dynamicReward);\n    const totalAmount = BigInt(data.totalAmount);\n    console.log(\"selectedUtxos\" + selectedUtxos);\n    console.log(\"dynamicReward\" + dynamicReward);\n    console.log(\"totalAmount\" + totalAmount);\n    return {\n        selected: selectedUtxos,\n        totalAmount: totalAmount,\n        dynamicReward: dynamicReward\n    };\n}\nfunction createClaimRedeemer(recepiantHashHex) {\n    // Convert hex string to byte array\n    const bytes = (0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(recepiantHashHex);\n    console.log(\"Redeemer bytes length:\", bytes.length);\n    // Validate the length of PubKeyHash\n    if (bytes.length !== 28) {\n        throw new Error(\"Invalid PubKeyHash length: expected 28 bytes, got \".concat(bytes.length, \" bytes\"));\n    }\n    // Wrap the byte array in ByteArrayData\n    const byteArrayData = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData(bytes);\n    // Construct ConstrData with constructor index 1 for Claim\n    const constrData = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(1, [\n        byteArrayData\n    ]);\n    return constrData;\n}\nfunction createGameDatum(beneficiaryHashHex) {\n    // Convert hex string to byte array\n    const bytes = (0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(beneficiaryHashHex);\n    console.log(\"Datum bytes length:\", bytes.length);\n    // Validate the length of PubKeyHash\n    if (bytes.length !== 28) {\n        throw new Error(\"Invalid PubKeyHash length for Datum: expected 28 bytes, got \".concat(bytes.length, \" bytes\"));\n    }\n    // Wrap the byte array in ByteArrayData\n    const byteArrayData = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData(bytes);\n    // Create inline Datum without constructor indices\n    return _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(byteArrayData);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvd2FsbGV0QWN0aW9ucy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFvQjhCO0FBQ2tDO0FBQ1YsQ0FBQyx1Q0FBdUM7QUFJNUYsTUFBTW1CLFdBQVc7QUFFVixTQUFTQztJQUVkLE1BQU1DLG9CQUFvQjtJQUUxQixNQUFNQyxVQUFrQkMsS0FBS0MsS0FBSyxDQUFDQyxLQUFLQyxHQUFHO0lBQzNDLE1BQU1DLGlCQUFpQixJQUFJLGNBQWM7O0lBQ3pDLE1BQU1DLGFBQWE7SUFDbkIsTUFBTUMsY0FBY1AsVUFBV00sYUFBY1A7SUFDN0MsTUFBTVMsdUJBQXVCRCxjQUFjO0lBQzNDLE1BQU1FLGtCQUFrQkQsdUJBQXVCSDtJQUUvQyxPQUFPSTtBQUNUO0FBRU8sNkNBQUtDOzs2REFFRSxpQ0FBaUM7V0FGbkNBO01BR2I7QUFFdUUsQ0FBQywrQkFBK0I7QUFFL0YsZUFBZUUsWUFBWUMsU0FBYyxFQUFFQyxZQUFvQyxFQUFFQyxLQUFvQztJQUMxSEQsYUFBYTtJQUViLElBQUksQ0FBQ0QsV0FBVztRQUNaLE1BQU0sSUFBSUcsTUFBTTtJQUNwQjtJQUNBLElBQUk7WUFpQzRDQztRQWhDOUMsTUFBTUMsaUJBQWlCLElBQUluQywyREFBV0EsQ0FBQzhCO1FBRXZDLE1BQU1NLGVBQWUsSUFBSWpDLDREQUFZQSxDQUFDZ0M7UUFDdEMscUNBQXFDO1FBQ3JDLE1BQU1FLG9CQUFvQixNQUFNekIsaUVBQWdCQSxDQUFDRCxvREFBT0E7UUFDeEQsTUFBTTJCLGdCQUFnQixJQUFJM0MsNkRBQWFBLENBQUMwQztRQUV4QyxNQUFNRSxXQUFXO1FBQ2pCLE1BQU1DLE9BQU9DLE1BQU1BLENBQUNDLElBQUksQ0FBQyxRQUFRLFFBQVFDLFFBQVEsQ0FBQztRQUVsRCxNQUFNQyxNQUFNeEMsaUVBQWlCQSxDQUFDeUMsT0FBTyxDQUFDTjtRQUV0QyxNQUFNTyxhQUFhLElBQUl4QywwREFBVUEsQ0FBQztZQUNoQ3NDLEtBQUtBO1lBQ0xHLFdBQVdQO1FBQ2I7UUFFRVEsUUFBUUMsR0FBRyxDQUFDSDtRQUVkLE1BQU1JLFFBQVEsTUFBTWQsYUFBYWUsUUFBUTtRQUN6Q0gsUUFBUUMsR0FBRyxDQUFDLFNBQVVDO1FBRXRCLHFCQUFxQjtRQUNyQixNQUFNaEIsY0FBYyxNQUFNRSxhQUFhZ0IsYUFBYTtRQUNwRCxpREFBaUQ7UUFFakQsTUFBTUMsVUFBVXpCLG9FQUE2QjtRQUM3QyxnREFBZ0Q7UUFDaEQscUVBQXFFO1FBQ3JFLE1BQU0wQixjQUFjakQsMkRBQVdBLENBQUNrRCxRQUFRLENBQUNGO1FBRXpDLG1EQUFtRDtRQUNuREwsUUFBUUMsR0FBRyxDQUFDLG9DQUFrQ2YsMEJBQUFBLFlBQVlzQixVQUFVLGNBQXRCdEIsOENBQUFBLHdCQUF3QnVCLEdBQUc7UUFHekUsc0NBQXNDO1FBRXRDLGdDQUFnQztRQUNoQyx1REFBdUQ7UUFDdkRULFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJmO1FBQ2pDLE1BQU13QixnQkFBZ0JuRCx1REFBT0EsQ0FBQ29ELFVBQVUsQ0FBQztRQUV6Q1gsUUFBUUMsR0FBRyxDQUFDUyxjQUFjRSxRQUFRO1FBQ2xDWixRQUFRQyxHQUFHLENBQUMsb0JBQW9CUztRQUVoQ1YsUUFBUWEsR0FBRyxDQUFDSCxlQUFlO1lBQUVJLE9BQU87UUFBSztRQUd6Q2QsUUFBUUMsR0FBRyxDQUFDLCtCQUErQmYsWUFBWXNCLFVBQVUsQ0FBRUMsR0FBRztRQUN0RSxNQUFNTSxZQUFZQyxnQkFBZ0I5QixZQUFZc0IsVUFBVSxDQUFFQyxHQUFHO1FBQzdEVCxRQUFRQyxHQUFHLENBQUMsYUFBYWM7UUFDekIsc0NBQXNDO1FBQ3RDLHVGQUF1RjtRQUN2RixLQUFLO1FBQ0wsMkdBQTJHO1FBQzNHLGdEQUFnRDtRQUNoRCw0QkFBNEI7UUFDNUIsSUFBSTtRQUVILG9DQUFvQztRQUNyQyxtRkFBbUY7UUFDbkYsbUJBQW1CO1FBR25CLHFDQUFxQztRQUNyQyxzREFBc0Q7UUFFdEQsZ0NBQWdDO1FBQ2hDLHVEQUF1RDtRQUV2RCxpQ0FBaUM7UUFDakMsaURBQWlEO1FBQ2pELDZGQUE2RjtRQUU3RixNQUFNRSxnQkFBZ0JDLG9CQUFvQmhDLFlBQVlzQixVQUFVLENBQUVDLEdBQUc7UUFFckVULFFBQVFDLEdBQUcsQ0FBQyxpQkFBaUJnQjtRQUM3QmpCLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJmLFlBQVlzQixVQUFVO1FBQzVEUixRQUFRQyxHQUFHLENBQUMsK0JBQStCZixZQUFZc0IsVUFBVSxDQUFFQyxHQUFHO1FBRXRFLDZCQUE2QjtRQUM3QixNQUFNVSxLQUFLLElBQUlyRSxrREFBRUE7UUFFakIsTUFBTXNFLGNBQWMsTUFBTUMsV0FBV1gsY0FBY0UsUUFBUTtRQUMzRFosUUFBUUMsR0FBRyxDQUFDLGVBQWVtQjtRQUMzQixNQUFNRSxlQUFlLElBQUksY0FBYztRQUV2QyxNQUFNNUMsa0JBQWtCWDtRQUN4QmlDLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0J2QjtRQUNoQzZDLE9BQU9DLE9BQU8sR0FBRyxJQUFNOUMsa0JBQWtCNEM7UUFDekMsNEZBQTRGO1FBQzVGLE1BQU1HLHVCQUFzQixJQUFJdkUsc0RBQU1BLENBQUM7WUFBQztnQkFBQzRDO2dCQUFZNEIsT0FBT04sWUFBWU8sYUFBYTthQUFFO1NBQUM7UUFFeEYsb0ZBQW9GO1FBQ3BGLE1BQU1DLG1CQUFtQkYsT0FBT04sWUFBWVMsV0FBVyxJQUFJSCxPQUFPTixZQUFZTyxhQUFhO1FBRTNGLE1BQU1HLHNCQUFzQkYsbUJBQW1CLEVBQUUsRUFBRSx5Q0FBeUM7UUFDNUYsTUFBTUcsdUJBQXVCSCxtQkFBbUJFLHFCQUFxQiwrQkFBK0I7UUFDcEc5QixRQUFRQyxHQUFHLENBQUMsV0FBVzZCO1FBQ3ZCOUIsUUFBUUMsR0FBRyxDQUFDLFlBQVk4QjtRQUN4Qi9CLFFBQVFDLEdBQUcsQ0FBQ21CLFlBQVlPLGFBQWE7UUFFckMsTUFBTUssaUJBQWdCLElBQUk5RSxzREFBTUEsQ0FBQztZQUFDO2dCQUFDNEM7Z0JBQVlnQzthQUFvQjtTQUFDO1FBQ3BFLE1BQU1HLGlCQUFnQixJQUFJL0Usc0RBQU1BLENBQUM7WUFBQztnQkFBQzRDO2dCQUFZaUM7YUFBcUI7U0FBQztRQUVyRSx5QkFBeUI7UUFDekJaLEdBQUdlLFNBQVMsQ0FBQ2QsWUFBWWUsUUFBUSxFQUFFbEI7UUFDbkNFLEdBQUdpQixZQUFZLENBQUM5QjtRQUVoQixJQUFJK0Isa0JBQWtCLElBQUl4Rix3REFBUUEsQ0FDaENxQyxhQUNBLElBQUl0QyxxREFBS0EsQ0FBQzBGLFdBQVdiO1FBRXZCTixHQUFHb0IsU0FBUyxDQUFDRjtRQUdmLDREQUE0RDtRQUM1RCxxSUFBcUk7UUFDckksa0RBQWtEO1FBQ2xELDZCQUE2QjtRQUM3QixhQUFhO1FBQ2Isd0VBQXdFO1FBQ3hFLE1BQU07UUFFTixvREFBb0Q7UUFDcEQsSUFBSUcsbUJBQW1CZCxPQUFPO1FBQzlCTixZQUFZZSxRQUFRLENBQUNNLE9BQU8sQ0FBQ0MsQ0FBQUE7WUFDekJGLG9CQUFvQmQsT0FBT2dCLEtBQUtDLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDQyxRQUFRO1FBQ3pEO1FBRUEsK0RBQStEO1FBQy9ELE1BQU1DLHFCQUFxQk4sbUJBQW1CLEVBQUUsRUFBRSwrQkFBK0I7UUFFakYsSUFBSVosb0JBQW9CRixPQUFPLElBQUc7WUFDaEMsSUFBSXFCLGNBQWEsSUFBSWxHLHdEQUFRQSxDQUMzQjZELGVBQ0EsSUFBSTlELHFEQUFLQSxDQUFDa0csb0JBQW9CZCxpQkFDOUJqQjtZQUdESSxHQUFHb0IsU0FBUyxDQUFDUTtZQUVkLElBQUlDLGNBQWMsSUFBSW5HLHdEQUFRQSxDQUM1QjZELGVBQ0EsSUFBSTlELHFEQUFLQSxDQUFDNEYsbUJBQW1CTSxvQkFBb0JiLGlCQUNqRGxCO1lBR0RJLEdBQUdvQixTQUFTLENBQUNTO1FBQ2hCO1FBRUUsMkVBQTJFO1FBRTNFLDZCQUE2QjtRQUM3QmhELFFBQVFDLEdBQUcsQ0FBQztRQUlaLE1BQU1rQixHQUFHOEIsUUFBUSxDQUFDM0QsZUFBZUosYUFBYWdCO1FBQzlDRixRQUFRQyxHQUFHLENBQUM7UUFDWiwwQ0FBMEM7UUFDMUMsTUFBTWlELGFBQWEsTUFBTS9ELGVBQWVnRSxNQUFNLENBQUNoQztRQUMvQ0EsR0FBR2lDLGFBQWEsQ0FBQ0Y7UUFDakJsRCxRQUFRQyxHQUFHLENBQUM7UUFFWixNQUFNb0QsU0FBUyxNQUFNbEUsZUFBZW1FLFFBQVEsQ0FBQ25DO1FBRTdDbkMsTUFBTTtZQUFFdUUsTUFBTUYsT0FBTzVDLEdBQUc7UUFBQztRQUN6QjFCLGFBQWE7SUFFZixFQUFFLE9BQU95RSxLQUFLO1FBQ1Z6RSxhQUFhO1FBQ2JpQixRQUFReUQsS0FBSyxDQUFDLG9CQUFvQkQ7UUFDbEMsTUFBTUE7SUFDVjtBQUNGO0FBRU8sZUFBZUUsS0FBSzVFLFNBQWMsRUFBRUMsWUFBb0MsRUFBRUMsS0FBb0M7SUFDbkhELGFBQWE7SUFFYixJQUFJLENBQUNELFdBQVc7UUFDZCxNQUFNa0IsUUFBUXlELEtBQUssQ0FBQztJQUN0QjtJQUNBLElBQUk7UUFDRixNQUFNdEUsaUJBQWlCLElBQUluQywyREFBV0EsQ0FBQzhCO1FBQ3ZDLDBDQUEwQztRQUMxQyxzQkFBc0I7UUFDdEIsMERBQTBEO1FBQzFELE1BQU07UUFDTmtCLFFBQVFDLEdBQUcsQ0FBQztRQUVaLE1BQU1iLGVBQWUsSUFBSWpDLDREQUFZQSxDQUFDZ0M7UUFFdEMsTUFBTUksV0FBVztRQUNqQixNQUFNQyxPQUFPQyxNQUFNQSxDQUFDQyxJQUFJLENBQUMsUUFBUSxRQUFRQyxRQUFRLENBQUM7UUFFbEQsTUFBTUMsTUFBTXhDLGlFQUFpQkEsQ0FBQ3lDLE9BQU8sQ0FBQ047UUFFdEMsTUFBTU8sYUFBYSxJQUFJeEMsMERBQVVBLENBQUM7WUFDaENzQyxLQUFLQTtZQUNMRyxXQUFXUCxLQUFJLHdCQUF3QjtRQUN6QztRQUVFUSxRQUFRQyxHQUFHLENBQUNIO1FBRWQsTUFBTTZELFNBQWtCLFNBQVcsMkJBQTJCO1FBQzlELE1BQU1DLFlBQVksSUFBSWhILHFEQUFLQSxDQUFDOEUsT0FBT2lDO1FBRW5DLE1BQU1FLGtCQUFrQixJQUFJM0csc0RBQU1BLENBQUM7WUFBQztnQkFBQzRDO2dCQUFZNEIsT0FBTzthQUFRO1NBQUM7UUFFakUsbUJBQW1CO1FBQ25CLE1BQU14QixRQUFRLE1BQU1kLGFBQWEwRSxTQUFTLENBQUMsSUFBSWxILHFEQUFLQSxDQUFDMEYsV0FBV3VCO1FBQ2hFN0QsUUFBUUMsR0FBRyxDQUFDQztRQUVaLHFCQUFxQjtRQUNyQixNQUFNaEIsY0FBYyxNQUFNRSxhQUFhZ0IsYUFBYTtRQUNwRCxpREFBaUQ7UUFFakQsTUFBTTJELGFBQWEsSUFBSWxHLGdFQUFVQTtRQUVqQyxnQ0FBZ0M7UUFDaEMsTUFBTW1HLGtCQUFrQkQsV0FBV0UsT0FBTyxDQUFDbkc7UUFDM0NrQyxRQUFRQyxHQUFHLENBQUMscUJBQXFCZjtRQUNqQyxNQUFNd0IsZ0JBQWdCbkQsdURBQU9BLENBQUMyRyxVQUFVLENBQUNGLGdCQUFnQkcsYUFBYTtRQUVwRSxRQUFRO1FBQ1ZuRSxRQUFRQyxHQUFHLENBQUNTLGNBQWNFLFFBQVE7UUFDbENaLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JTO1FBRWhDLDhCQUE4QjtRQUM5QixNQUFNSyxZQUFZLElBQUlnRCxXQUFXSyxLQUFLLENBQUNuSCxLQUFLLENBQzFDaUMsWUFBWXNCLFVBQVU7UUFHMUIsMEVBQTBFO1FBRXhFLE1BQU1XLEtBQUssSUFBSXJFLGtEQUFFQTtRQUNqQnFFLEdBQUdlLFNBQVMsQ0FBQ2hDLEtBQUssQ0FBQyxFQUFFO1FBQ3JCaUIsR0FBR29CLFNBQVMsQ0FBQyxJQUFJMUYsd0RBQVFBLENBQ3ZCNkQsZUFDQSxJQUFJOUQscURBQUtBLENBQUMwRixXQUFXdUIsa0JBQ3JCNUcscURBQUtBLENBQUNvSCxNQUFNLENBQUN0RDtRQUdmLDZCQUE2QjtRQUM3QixpQkFBaUI7UUFDakIsZUFBZTtRQUNmLE1BQU07UUFFTmYsUUFBUUMsR0FBRyxDQUFDO1FBRVoscUNBQXFDO1FBQ3JDLE1BQU1aLG9CQUFvQixNQUFNekIsaUVBQWdCQSxDQUFDRCxvREFBT0E7UUFDeEQsTUFBTTJCLGdCQUFnQixJQUFJM0MsNkRBQWFBLENBQUMwQztRQUV4QyxvQ0FBb0M7UUFDcEMsTUFBTThCLEdBQUc4QixRQUFRLENBQUMzRCxlQUFlSixhQUFhZ0IsS0FBSyxDQUFDLEVBQUU7UUFFdEQsMENBQTBDO1FBQzFDLE1BQU1nRCxhQUFhLE1BQU0vRCxlQUFlZ0UsTUFBTSxDQUFDaEM7UUFDL0NBLEdBQUdpQyxhQUFhLENBQUNGO1FBRWpCbEQsUUFBUUMsR0FBRyxDQUFDO1FBQ1osdUJBQXVCO1FBQ3ZCLE1BQU1vRCxTQUFTLE1BQU1sRSxlQUFlbUUsUUFBUSxDQUFDbkM7UUFFN0NuQyxNQUFNO1lBQUV1RSxNQUFNRixPQUFPNUMsR0FBRztRQUFDO1FBQ3pCMUIsYUFBYTtJQUVmLEVBQUUsT0FBT3lFLEtBQUs7UUFDVnpFLGFBQWE7UUFDYixNQUFNaUIsUUFBUXlELEtBQUssQ0FBQyxvQkFBb0JEO0lBQzVDO0FBQ0Y7QUFFQSxlQUFlbkMsV0FBV1gsYUFBcUI7SUFDN0MsTUFBTTRELFdBQVcsTUFBTUMsTUFBTyxpQkFBZ0I7UUFDNUNDLFFBQVE7UUFDUkMsU0FBUztZQUFFLGdCQUFnQjtRQUFtQjtRQUM5Q0MsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO1lBQUVsRTtRQUFhO0lBQ3RDO0lBRUEsTUFBTW1FLE9BQU8sTUFBTVAsU0FBU1EsSUFBSSxJQUFJLDhCQUE4QjtJQUVsRSx3Q0FBd0M7SUFDeEMsTUFBTUMsZ0JBQWdCRixLQUFLMUMsUUFBUSxDQUFDNkMsR0FBRyxDQUFDLENBQUN0QyxPQUFjM0YsdURBQU9BLENBQUNrSSxZQUFZLENBQUN2QztJQUM1RSxNQUFNZixnQkFBd0JELE9BQU9tRCxLQUFLbEQsYUFBYTtJQUN2RCxNQUFNRSxjQUFzQkgsT0FBT21ELEtBQUtoRCxXQUFXO0lBQ25EN0IsUUFBUUMsR0FBRyxDQUFDLGtCQUFpQjhFO0lBQzdCL0UsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQjBCO0lBQzlCM0IsUUFBUUMsR0FBRyxDQUFDLGdCQUFlNEI7SUFFM0IsT0FBTztRQUNMTSxVQUFVNEM7UUFDVmxELGFBQWFBO1FBQ2JGLGVBQWVBO0lBQ2pCO0FBQ0Y7QUFHQSxTQUFTVCxvQkFBb0JnRSxnQkFBd0I7SUFDbkQsbUNBQW1DO0lBQ25DLE1BQU1DLFFBQVF6SCw4REFBVUEsQ0FBQ3dIO0lBQ3pCbEYsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQmtGLE1BQU1DLE1BQU07SUFFbEQsb0NBQW9DO0lBQ3BDLElBQUlELE1BQU1DLE1BQU0sS0FBSyxJQUFJO1FBQ3JCLE1BQU0sSUFBSW5HLE1BQU0scURBQWtFLE9BQWJrRyxNQUFNQyxNQUFNLEVBQUM7SUFDdEY7SUFFQSx1Q0FBdUM7SUFDdkMsTUFBTUMsZ0JBQWdCLElBQUk1SCw2REFBYUEsQ0FBQzBIO0lBRXhDLDBEQUEwRDtJQUMxRCxNQUFNRyxhQUFhLElBQUk5SCwwREFBVUEsQ0FBQyxHQUFHO1FBQUM2SDtLQUFjO0lBRXBELE9BQU9DO0FBQ1g7QUFJQSxTQUFTdEUsZ0JBQWdCdUUsa0JBQTBCO0lBQ2pELG1DQUFtQztJQUNuQyxNQUFNSixRQUFRekgsOERBQVVBLENBQUM2SDtJQUN6QnZGLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJrRixNQUFNQyxNQUFNO0lBRS9DLG9DQUFvQztJQUNwQyxJQUFJRCxNQUFNQyxNQUFNLEtBQUssSUFBSTtRQUNyQixNQUFNLElBQUluRyxNQUFNLCtEQUE0RSxPQUFia0csTUFBTUMsTUFBTSxFQUFDO0lBQ2hHO0lBRUEsdUNBQXVDO0lBQ3ZDLE1BQU1DLGdCQUFnQixJQUFJNUgsNkRBQWFBLENBQUMwSDtJQUV4QyxrREFBa0Q7SUFDbEQsT0FBT2xJLHFEQUFLQSxDQUFDb0gsTUFBTSxDQUFDZ0I7QUFDdEIiLCJzb3VyY2VzIjpbIkQ6XFxVbHRpbWF0ZS1DYXJkYW5vLVNtYXJ0LUNvbnRyYWN0c1xcRmxhcHB5QmlyZEdhbWVcXGhlbGlvc1xcR2FtZVJld2FyZFxccHVibGljXFx3YWxsZXRBY3Rpb25zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxyXG4gICAgTmV0d29ya1BhcmFtcyxcclxuICAgIFZhbHVlLFxyXG4gICAgVHhPdXRwdXQsXHJcbiAgICBUeCxcclxuICAgIFR4SW5wdXQsXHJcbiAgICBDaXAzMFdhbGxldCxcclxuICAgIERhdHVtLFxyXG4gICAgQXNzZXRzLFxyXG4gICAgV2FsbGV0SGVscGVyLFxyXG4gICAgTWludGluZ1BvbGljeUhhc2gsXHJcbiAgICBVcGxjUHJvZ3JhbSxcclxuICAgIFVwbGNEYXRhVmFsdWUsXHJcbiAgICBBc3NldENsYXNzLFxyXG4gICAgUHViS2V5SGFzaCxcclxuICAgIEFkZHJlc3MsXHJcbiAgICBDb25zdHJEYXRhLFxyXG4gICAgVXBsY0RhdGEsXHJcbiAgICBCeXRlQXJyYXlEYXRhLFxyXG4gICAgaGV4VG9CeXRlcyxcclxuICB9IGZyb20gXCJAaHlwZXJpb25idC9oZWxpb3NcIjtcclxuICBpbXBvcnQgeyBuZXR3b3JrLCBnZXROZXR3b3JrUGFyYW1zIH0gZnJvbSAnLi4vY29tbW9uL25ldHdvcmsnO1xyXG4gIGltcG9ydCBHYW1lUmV3YXJkIGZyb20gJy4uL2NvbnRyYWN0cy9HYW1lUmV3YXJkLmhsJzsgLy8gRW5zdXJlIGNvcnJlY3QgcGF0aCB0byB5b3VyIGNvbnRyYWN0XHJcbiAgaW1wb3J0IHsgbWFrZVB1YktleUhhc2gsIG1ha2VUeFNwZW5kaW5nUmVkZWVtZXIgfSBmcm9tIFwiQGhlbGlvcy1sYW5nL2xlZGdlclwiO1xyXG4gIGltcG9ydCB7IG1ha2VDb25zdHJEYXRhIH0gZnJvbSBcIkBoZWxpb3MtbGFuZy91cGxjXCI7XHJcblxyXG4gIGNvbnN0IG9wdGltaXplID0gZmFsc2U7XHJcbiAgXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUNvdW50ZG93bigpOiBudW1iZXIge1xyXG4gIFxyXG4gICAgY29uc3QgVGltZUJlZ2luQ29udHJhY3QgPSAxNzM2MDczNjAwMDAwO1xyXG5cclxuICAgIGNvbnN0IFRpbWVOb3c6IG51bWJlciA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSk7IFxyXG4gICAgY29uc3QgQ1lDTEVfRFVSQVRJT04gPSA2MDAgLy8gMTAgbWludXRlcyBcclxuICAgIGNvbnN0IG9mZnNldEluTXMgPSA4OTY4MDtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gVGltZU5vdyAtIChvZmZzZXRJbk1zKSAtIFRpbWVCZWdpbkNvbnRyYWN0O1xyXG4gICAgY29uc3QgZWxhcHNlZFRpbWVJblNlY29uZHMgPSBlbGFwc2VkVGltZSAvIDEwMDA7XHJcbiAgICBjb25zdCBwb3NpdGlvbkluQ3ljbGUgPSBlbGFwc2VkVGltZUluU2Vjb25kcyAlIENZQ0xFX0RVUkFUSU9OO1xyXG4gIFxyXG4gICAgcmV0dXJuIHBvc2l0aW9uSW5DeWNsZTtcclxuICB9IFxyXG4gIFxyXG4gIGV4cG9ydCBlbnVtIFJlZGVlbWVyVmFyaWFudCB7XHJcbiAgICBDYW5jZWwgPSAwLCAvLyBDb3JyZXNwb25kcyB0byAnQ2FuY2VsJyB2YXJpYW50XHJcbiAgICBDbGFpbSA9IDEgICAvLyBDb3JyZXNwb25kcyB0byAnQ2xhaW0nIHZhcmlhbnRcclxufVxyXG5cclxuICBpbXBvcnQgR0FNRV9SRVdBUkRfQ0JPUl9KU09OIGZyb20gJy4uL2NvbnRyYWN0cy9HYW1lUmV3YXJkQ2JvcjEuanNvbic7IC8vIHsgY2JvckhleDogXCI0ZTRkMDEwMDAwLi4uXCIgfVxyXG5cclxuICBleHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xhaW1Ub2tlbnMod2FsbGV0QVBJOiBhbnksIHNldElzTG9hZGluZzogKHZhbDogYm9vbGVhbikgPT4gdm9pZCwgc2V0VHg6ICh2YWw6IHt0eElkOiBzdHJpbmd9KSA9PiB2b2lkKSB7XHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgaWYgKCF3YWxsZXRBUEkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXYWxsZXQgQVBJIGlzIG5vdCBzZXQuXCIpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2lwMzBXYWxsZXRBUEkgPSBuZXcgQ2lwMzBXYWxsZXQod2FsbGV0QVBJKTtcclxuXHJcbiAgICAgIGNvbnN0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIoY2lwMzBXYWxsZXRBUEkpO1xyXG4gICAgICAvLyBSZWFkIGluIHRoZSBuZXR3b3JrIHBhcmFtZXRlciBmaWxlXHJcbiAgICAgIGNvbnN0IG5ldHdvcmtQYXJhbXNKc29uID0gYXdhaXQgZ2V0TmV0d29ya1BhcmFtcyhuZXR3b3JrKTtcclxuICAgICAgY29uc3QgbmV0d29ya1BhcmFtcyA9IG5ldyBOZXR3b3JrUGFyYW1zKG5ldHdvcmtQYXJhbXNKc29uKTtcclxuXHJcbiAgICAgIGNvbnN0IHBvbGljeUlkID0gXCI1YjkwMDZlNTA1MTI5Njk2OGM0NmEzZTkyMDZmMmYwMmM4MTU3ZmYwNDE4NzEyOTA5NjBkNmFkZlwiO1xyXG4gICAgICBjb25zdCBuYW1lID0gQnVmZmVyLmZyb20oXCJCRVJUXCIsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xyXG5cclxuICAgICAgY29uc3QgbXBoID0gTWludGluZ1BvbGljeUhhc2guZnJvbUhleChwb2xpY3lJZCk7XHJcblxyXG4gICAgICBjb25zdCBhc3NldENsYXNzID0gbmV3IEFzc2V0Q2xhc3Moe1xyXG4gICAgICAgIG1waDogbXBoLCBcclxuICAgICAgICB0b2tlbk5hbWU6IG5hbWVcclxuICAgICAgfSk7IFxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhhc3NldENsYXNzKVxyXG5cclxuICAgICAgY29uc3QgdXR4b3MgPSBhd2FpdCB3YWxsZXRIZWxwZXIuZ2V0VXR4b3MoKTtcclxuICAgICAgY29uc29sZS5sb2coXCJ1dHhvc1wiLCAgdXR4b3MpO1xyXG5cclxuICAgICAgLy8gR2V0IGNoYW5nZSBhZGRyZXNzXHJcbiAgICAgIGNvbnN0IGJlbmVmaXRpYXJ5ID0gYXdhaXQgd2FsbGV0SGVscGVyLmNoYW5nZUFkZHJlc3M7XHJcbiAgICAgIC8vIExvYWQgaW4gdGhlIHZlc3RpbmcgdmFsaWRhdG9yIHNjcmlwdCAocHJvZ3JhbSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNib3JIZXggPSBHQU1FX1JFV0FSRF9DQk9SX0pTT04uY2JvckhleDsgXHJcbiAgICAgIC8vY29uc3QgY29tcGlsZWRQcm9ncmFtID0gUHJvZ3JhbS5uZXcoY2JvckhleCk7IFxyXG4gICAgICAvL2NvbnN0IHVwbGNQcm9ncmFtID0gbmV3IE5hdGl2ZVNjcmlwdChjYm9ySGV4IGFzIHVua25vd24gYXMgbnVtYmVyKTtcclxuICAgICAgY29uc3QgdXBsY1Byb2dyYW0gPSBVcGxjUHJvZ3JhbS5mcm9tQ2JvcihjYm9ySGV4KTtcclxuICBcclxuICAgICAgLy9jb25zb2xlLmxvZyhcImNvbXBpbGVkUHJvZ3JhbVwiICsgY29tcGlsZWRQcm9ncmFtKTtcclxuICAgICAgY29uc29sZS5sb2coXCJiZW5lZml0aWFyeS5wdWJLZXlIYXNoPy5oZXghKVwiICsgYmVuZWZpdGlhcnkucHViS2V5SGFzaD8uaGV4ISlcclxuXHJcbiAgICBcclxuICAgICAgLy9jb25zdCBnYW1lUmV3YXJkID0gbmV3IEdhbWVSZXdhcmQoKTtcclxuXHJcbiAgICAgIC8vIENvbXBpbGUgdGhlIHZlc3RpbmcgdmFsaWRhdG9yXHJcbiAgICAgIC8vY29uc3QgY29tcGlsZWRQcm9ncmFtID0gZ2FtZVJld2FyZC5jb21waWxlKG9wdGltaXplKTtcclxuICAgICAgY29uc29sZS5sb2coXCJXYWxsZXQgYWRkcmVzczogXCIgKyBiZW5lZml0aWFyeSlcclxuICAgICAgY29uc3Qgc2NyaXB0QWRkcmVzcyA9IEFkZHJlc3MuZnJvbUJlY2gzMihcImFkZHIxd3lnZDJxNTZsYzA5OGZuMHlyeDluNm5ncmpmanlseGVmeHF6dGFzNmZmZno3ZHNsNHk5a25cIilcclxuICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhzY3JpcHRBZGRyZXNzLnRvQmVjaDMyKCkpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIlNjcmlwdCBBZGRyZXNzOlwiICsgc2NyaXB0QWRkcmVzcylcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUuZGlyKHNjcmlwdEFkZHJlc3MsIHsgZGVwdGg6IG51bGwgfSk7XHJcblxyXG4gIFxyXG4gICAgICBjb25zb2xlLmxvZyhcImJlbmVmaXRpYXJ5LnB1YktleUhhc2ghLmhleFwiLCBiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXgpXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IGNyZWF0ZUdhbWVEYXR1bShiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImdhbWVEYXR1bVwiLCBnYW1lRGF0dW0pXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiRGF0dW1cIiwgIERhdHVtLmlubGluZShcclxuICAgICAgLy8gICBuZXcgQ29uc3RyRGF0YSgwLCBbIG5ldyBCeXRlQXJyYXlEYXRhKGhleFRvQnl0ZXMoYmVuZWZpdGlhcnkucHViS2V5SGFzaD8uaGV4ISkpIF0pXHJcbiAgICAgIC8vICkpXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwiRGF0dW0yXCIsbmV3IENvbnN0ckRhdGEoMCwgWyBuZXcgQnl0ZUFycmF5RGF0YShoZXhUb0J5dGVzKGJlbmVmaXRpYXJ5LnB1YktleUhhc2g/LmhleCEpKSBdKSlcclxuICAgICAgLy8gY29uc3QgZ2FtZURhdHVtID0gbmV3IGdhbWVSZXdhcmQudHlwZXMuRGF0dW0oXHJcbiAgICAgIC8vICAgYmVuZWZpdGlhcnkucHViS2V5SGFzaCxcclxuICAgICAgLy8gKVxyXG5cclxuICAgICAgIC8vIENyZWF0ZSB0aGUgdmVzdGluZyBjbGFpbSByZWRlZW1lclxyXG4gICAgICAvLyAgY29uc3QgcmVkZWVtYmVyID0gKG5ldyBnYW1lUmV3YXJkLnR5cGVzLlJlZGVlbWVyLkNsYWltKGJlbmVmaXRpYXJ5LnB1YktleUhhc2gpKVxyXG4gICAgICAvLyAgLl90b1VwbGNEYXRhKCk7XHJcblxyXG4gICAgICBcclxuICAgICAgLy8gLy8gQ29udmVydCB0aGUgaGV4IHN0cmluZyB0byBieXRlc1xyXG4gICAgICAvLyBjb25zdCByZWNlcGlhbnRCeXRlcyA9IGhleFRvQnl0ZXMoYmVuZWZpdGlhcnkuaGV4KTtcclxuICAgICAgXHJcbiAgICAgIC8vIC8vIENyZWF0ZSBhIFB1YktleUhhc2ggb2JqZWN0XHJcbiAgICAgIC8vIGNvbnN0IHJlY2VwaWFudFBraCA9IG1ha2VQdWJLZXlIYXNoKHJlY2VwaWFudEJ5dGVzKTtcclxuICAgICAgXHJcbiAgICAgIC8vIENvbnZlcnQgUHViS2V5SGFzaCB0byBVcGxjRGF0YVxyXG4gICAgICAvL2NvbnN0IGRhdGFSZWRlZW1lciA9IHJlY2VwaWFudFBraC50b1VwbGNEYXRhKCk7XHJcbiAgICAgIC8vY29uc3QgY2xhaW1SZWRlZW1lciA9IG1ha2VUeFNwZW5kaW5nUmVkZWVtZXIoUmVkZWVtZXJWYXJpYW50LkNsYWltLCBkYXRhUmVkZWVtZXIpLnRvQ2JvcigpO1xyXG5cclxuICAgICAgY29uc3QgY2xhaW1SZWRlZW1lciA9IGNyZWF0ZUNsYWltUmVkZWVtZXIoYmVuZWZpdGlhcnkucHViS2V5SGFzaCEuaGV4KTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xhaW1SZWRlZW1lclwiLCBjbGFpbVJlZGVlbWVyKVxyXG4gICAgICBjb25zb2xlLmxvZyhcImJlbmVmaXRpYXJ5LnB1YktleUhhc2hcIiwgYmVuZWZpdGlhcnkucHViS2V5SGFzaClcclxuICAgICAgY29uc29sZS5sb2coXCJiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXhcIiwgYmVuZWZpdGlhcnkucHViS2V5SGFzaCEuaGV4KVxyXG5cclxuICAgICAgLy9jb25zb2xlLmxvZyhmaWx0ZXJlZFV0eG9zKTtcclxuICAgICAgY29uc3QgdHggPSBuZXcgVHgoKTtcclxuXHJcbiAgICAgIGNvbnN0IHNvcnRlZFV0eG9zID0gYXdhaXQgZmV0Y2hVdHhvcyhzY3JpcHRBZGRyZXNzLnRvQmVjaDMyKCkpXHJcbiAgICAgIGNvbnNvbGUubG9nKFwic29ydGVkVXR4b3NcIiwgc29ydGVkVXR4b3MpXHJcbiAgICAgIGNvbnN0IENMQUlNX1dJTkRPVyA9IDIwOyAvLyAyMCBzZWNvbmRzIFxyXG5cclxuICAgICAgY29uc3QgcG9zaXRpb25JbkN5Y2xlID0gY2FsY3VsYXRlQ291bnRkb3duKCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwicG9zaXRpb25JbkN5Y2xlXCIgKyBwb3NpdGlvbkluQ3ljbGUpO1xyXG4gICAgICB3aW5kb3cub25lcnJvciA9ICgpID0+IHBvc2l0aW9uSW5DeWNsZSA8IENMQUlNX1dJTkRPVztcclxuICAgICAgLy9jb25zdCBkeW5hbWljUmV3YXJkID0gY2FsY3VsYXRlUmV3YXJkKE51bWJlcihyZW1haW5pbmdTdXBwbHkpLCBUT1RBTF9TVVBQTFksIEJBU0VfUkVXQVJEKTtcclxuICAgICAgY29uc3QgdGVzdFZhbHVlQmVuZWZpdGlhcnk9IG5ldyBBc3NldHMoW1thc3NldENsYXNzLCBCaWdJbnQoc29ydGVkVXR4b3MuZHluYW1pY1Jld2FyZCldXSk7XHJcbiAgICAgIFxyXG4gICAgICAvL2NvbnN0IHRvdGFsQW1vdW50VXR4byA9IGdldFRva2VuQW1vdW50RnJvbVV0eG9zKHNvcnRlZFV0eG9zLnNlbGVjdGVkLCBhc3NldENsYXNzKTtcclxuICAgICAgY29uc3QgYW1vdW50VG9TZW5kQmFjayA9IEJpZ0ludChzb3J0ZWRVdHhvcy50b3RhbEFtb3VudCkgLSBCaWdJbnQoc29ydGVkVXR4b3MuZHluYW1pY1Jld2FyZCk7XHJcblxyXG4gICAgICBjb25zdCBmaXJzdFBhcnRUb1NlbmRCYWNrID0gYW1vdW50VG9TZW5kQmFjayAvIDJuOyAvLyBGaXJzdCBwYXJ0IGlzIGhhbGYgb2YgdGhlIHRvdGFsIGFtb3VudFxyXG4gICAgICBjb25zdCBzZWNvbmRQYXJ0VG9TZW5kQmFjayA9IGFtb3VudFRvU2VuZEJhY2sgLSBmaXJzdFBhcnRUb1NlbmRCYWNrOyAvLyBTZWNvbmQgcGFydCBpcyB0aGUgcmVtYWluZGVyXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRmlyc3QgXCIgKyBmaXJzdFBhcnRUb1NlbmRCYWNrKVxyXG4gICAgICBjb25zb2xlLmxvZyhcIlNldm9uZCBcIiArIHNlY29uZFBhcnRUb1NlbmRCYWNrKVxyXG4gICAgICBjb25zb2xlLmxvZyhzb3J0ZWRVdHhvcy5keW5hbWljUmV3YXJkKVxyXG5cclxuICAgICAgY29uc3QgdmFsdWVDb250cmFjdDE9IG5ldyBBc3NldHMoW1thc3NldENsYXNzLCBmaXJzdFBhcnRUb1NlbmRCYWNrXV0pO1xyXG4gICAgICBjb25zdCB2YWx1ZUNvbnRyYWN0Mj0gbmV3IEFzc2V0cyhbW2Fzc2V0Q2xhc3MsIHNlY29uZFBhcnRUb1NlbmRCYWNrXV0pO1xyXG5cclxuICAgICAgLy90eC5hZGRJbnB1dHModXR4b3NbMF0pO1xyXG4gICAgICB0eC5hZGRJbnB1dHMoc29ydGVkVXR4b3Muc2VsZWN0ZWQsIGNsYWltUmVkZWVtZXIpO1xyXG4gICAgICB0eC5hdHRhY2hTY3JpcHQodXBsY1Byb2dyYW0pO1xyXG5cclxuICAgICAgdmFyIHVzZXJDbGFpbU91dHB1dCA9IG5ldyBUeE91dHB1dChcclxuICAgICAgICBiZW5lZml0aWFyeSxcclxuICAgICAgICBuZXcgVmFsdWUodW5kZWZpbmVkLCB0ZXN0VmFsdWVCZW5lZml0aWFyeSkpO1xyXG5cclxuICAgICAgdHguYWRkT3V0cHV0KHVzZXJDbGFpbU91dHB1dClcclxuXHJcbiAgICBcclxuICAgIC8vU2hpaWl0LCBmaXguIFNvbWVvbmUgY291bGQgcmVkaXJlZHQgdGhlIHJlc3Qgb2YgdGhlIHRva2Vuc1xyXG4gICAgLy8gY29uc3QgYWRkcmVzc1N0ciA9IFwiYWRkcl90ZXN0MXFyYXJxaG1rbG5od2N3M3Ewem02c2dtM2czbDdwdWEweTM2c3FsOWs1cnU4ZHN1Y2dsc2tlZDVmNXlyY2Y5ZTl4Z3hqZ210N3hrNTJrbmg4aDBkZ2F5YzAwYXJxbGg3ZzYwXCI7XHJcbiAgICAvLyBjb25zdCBhZGRyZXNzID0gQWRkcmVzcy5mcm9tQmVjaDMyKGFkZHJlc3NTdHIpO1xyXG4gICAgLy8gdHguYWRkT3V0cHV0KG5ldyBUeE91dHB1dChcclxuICAgIC8vICAgYWRkcmVzcyxcclxuICAgIC8vICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlQ29udHJhY3QpIC8vIFRoZSBhbW91bnQgYmVpbmcgY2xhaW1lZFxyXG4gICAgLy8gKSk7XHJcbiAgICBcclxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBBREEgaW4gdGhlIHNlbGVjdGVkIHNjcmlwdCBpbnB1dHNcclxuICAgIGxldCB0b3RhbEFkYUluSW5wdXRzID0gQmlnSW50KDApO1xyXG4gICAgc29ydGVkVXR4b3Muc2VsZWN0ZWQuZm9yRWFjaCh1dHhvID0+IHtcclxuICAgICAgICB0b3RhbEFkYUluSW5wdXRzICs9IEJpZ0ludCh1dHhvLm91dHB1dC52YWx1ZS5sb3ZlbGFjZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBEaXN0cmlidXRlIEFEQSBlcXVhbGx5IChvciBhcyByZXF1aXJlZCkgYW1vbmcgc2NyaXB0IG91dHB1dHNcclxuICAgIGNvbnN0IGFkYVBlclNjcmlwdE91dHB1dCA9IHRvdGFsQWRhSW5JbnB1dHMgLyAybjsgLy8gQXNzdW1pbmcgdHdvIHNjcmlwdCBvdXRwdXRzXFxcclxuXHJcbiAgICBpZiAoYW1vdW50VG9TZW5kQmFjayAhPSBCaWdJbnQoMCkpe1xyXG4gICAgICB2YXIgc2NyaXB0VXR4bzEgPW5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZShhZGFQZXJTY3JpcHRPdXRwdXQsIHZhbHVlQ29udHJhY3QxKSwgIC8vIFJlbWFpbmluZyB0cmVhc3VyeSB0b2tlbnNcclxuICAgICAgICBnYW1lRGF0dW1cclxuICAgICAgICk7XHJcblxyXG4gICAgICAgdHguYWRkT3V0cHV0KHNjcmlwdFV0eG8xKTtcclxuXHJcbiAgICAgIHZhciBzY3JpcHRVdHhvMiA9IG5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZSh0b3RhbEFkYUluSW5wdXRzIC0gYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MiksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgZ2FtZURhdHVtXHJcbiAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICB0eC5hZGRPdXRwdXQoc2NyaXB0VXR4bzIpO1xyXG4gICAgfSAgXHJcblxyXG4gICAgICAvL3ZhciBpbnB1dEZlZXMgPSBhd2FpdCB3YWxsZXRIZWxwZXIucGlja1V0eG9zKG5ldyBWYWx1ZSh0b2tlbkFtb3VudEZlZXMpKTtcclxuICAgICAgXHJcbiAgICAgIC8vdHguYWRkSW5wdXRzKGlucHV0RmVlc1swXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2UgYXR0YXRjaGVkIGV2ZXJ5dGhpbmchXCIpXHJcblxyXG4gICAgICBcclxuXHJcbiAgICAgIGF3YWl0IHR4LmZpbmFsaXplKG5ldHdvcmtQYXJhbXMsIGJlbmVmaXRpYXJ5LCB1dHhvcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiZGFsaSBmaW5hbGl6aXJhaG1lP1wiKVxyXG4gICAgICAvLyBTaWduIHRoZSB1bnNpZ25lZCB0eCB0byBnZXQgdGhlIHdpdG5lc3NcclxuICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnNpZ25UeCh0eCk7XHJcbiAgICAgIHR4LmFkZFNpZ25hdHVyZXMoc2lnbmF0dXJlcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRGFsaSBxIHNpZ25pcmFobWU/XCIpXHJcblxyXG4gICAgICBjb25zdCB0eEhhc2ggPSBhd2FpdCBjaXAzMFdhbGxldEFQSS5zdWJtaXRUeCh0eCk7XHJcblxyXG4gICAgICBzZXRUeCh7IHR4SWQ6IHR4SGFzaC5oZXggfSk7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwic3VibWl0IHR4IGZhaWxlZFwiLCBlcnIpO1xyXG4gICAgICAgIHRocm93IGVycjsgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kKHdhbGxldEFQSTogYW55LCBzZXRJc0xvYWRpbmc6ICh2YWw6IGJvb2xlYW4pID0+IHZvaWQsIHNldFR4OiAodmFsOiB7dHhJZDogc3RyaW5nfSkgPT4gdm9pZCkge1xyXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIGlmICghd2FsbGV0QVBJKSB7XHJcbiAgICAgIHRocm93IGNvbnNvbGUuZXJyb3IoXCJ3YWxsZXRBUEkgaXMgbm90IHNldFwiKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNpcDMwV2FsbGV0QVBJID0gbmV3IENpcDMwV2FsbGV0KHdhbGxldEFQSSk7XHJcbiAgICAgIC8vIGNvbnN0IGJsb2NrZnJvc3QgPSBuZXcgQmxvY2tGcm9zdElQRlMoe1xyXG4gICAgICAvLyAgIG5ldHdvcms6IG5ldHdvcmssXHJcbiAgICAgIC8vICAgcHJvamVjdElkOiBcInByZXByb2RKRXhPME1BTVJnZnBYejlJbDRJcUIydTlkZG95bFpCVFwiLFxyXG4gICAgICAvLyB9KTtcclxuICAgICAgY29uc29sZS5sb2coXCJnbW1tXCIpXHJcblxyXG4gICAgICBjb25zdCB3YWxsZXRIZWxwZXIgPSBuZXcgV2FsbGV0SGVscGVyKGNpcDMwV2FsbGV0QVBJKTtcclxuXHJcbiAgICAgIGNvbnN0IHBvbGljeUlkID0gXCI1YjkwMDZlNTA1MTI5Njk2OGM0NmEzZTkyMDZmMmYwMmM4MTU3ZmYwNDE4NzEyOTA5NjBkNmFkZlwiO1xyXG4gICAgICBjb25zdCBuYW1lID0gQnVmZmVyLmZyb20oXCJCRVJUXCIsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xyXG5cclxuICAgICAgY29uc3QgbXBoID0gTWludGluZ1BvbGljeUhhc2guZnJvbUhleChwb2xpY3lJZCk7XHJcblxyXG4gICAgICBjb25zdCBhc3NldENsYXNzID0gbmV3IEFzc2V0Q2xhc3Moe1xyXG4gICAgICAgIG1waDogbXBoLCAvLyBZb3VyIHBvbGljeSBoYXNoXHJcbiAgICAgICAgdG9rZW5OYW1lOiBuYW1lLy8gQ29udmVydCB0byBoZXggc3RyaW5nXHJcbiAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYXNzZXRDbGFzcylcclxuXHJcbiAgICAgIGNvbnN0IG1pbkFkYSA6IG51bWJlciA9IDFfMDAwXzAwMDsgLy8gbWluaW11bSBsb3ZlbGFjZSB0byBzZW5kXHJcbiAgICAgIGNvbnN0IG1pbkFkYVZhbCA9IG5ldyBWYWx1ZShCaWdJbnQobWluQWRhKSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0VmFsdWVTY3JpcHQgPSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgQmlnSW50KDEyNTU1MCldXSk7XHJcblxyXG4gICAgICAvLyBHZXQgd2FsbGV0IFVUWE9zXHJcbiAgICAgIGNvbnN0IHV0eG9zID0gYXdhaXQgd2FsbGV0SGVscGVyLnBpY2tVdHhvcyhuZXcgVmFsdWUodW5kZWZpbmVkLCB0ZXN0VmFsdWVTY3JpcHQpKTtcclxuICAgICAgY29uc29sZS5sb2codXR4b3MpO1xyXG5cclxuICAgICAgLy8gR2V0IGNoYW5nZSBhZGRyZXNzXHJcbiAgICAgIGNvbnN0IGJlbmVmaXRpYXJ5ID0gYXdhaXQgd2FsbGV0SGVscGVyLmNoYW5nZUFkZHJlc3M7XHJcbiAgICAgIC8vIExvYWQgaW4gdGhlIHZlc3RpbmcgdmFsaWRhdG9yIHNjcmlwdCAocHJvZ3JhbSlcclxuXHJcbiAgICAgIGNvbnN0IGdhbWVSZXdhcmQgPSBuZXcgR2FtZVJld2FyZCgpO1xyXG5cclxuICAgICAgLy8gQ29tcGlsZSB0aGUgdmVzdGluZyB2YWxpZGF0b3JcclxuICAgICAgY29uc3QgY29tcGlsZWRQcm9ncmFtID0gZ2FtZVJld2FyZC5jb21waWxlKG9wdGltaXplKTtcclxuICAgICAgY29uc29sZS5sb2coXCJXYWxsZXQgYWRkcmVzczogXCIgKyBiZW5lZml0aWFyeSlcclxuICAgICAgY29uc3Qgc2NyaXB0QWRkcmVzcyA9IEFkZHJlc3MuZnJvbUhhc2hlcyhjb21waWxlZFByb2dyYW0udmFsaWRhdG9ySGFzaClcclxuICAgIFxyXG4gICAgICAgIC8vcmVtb3ZlXHJcbiAgICAgIGNvbnNvbGUubG9nKHNjcmlwdEFkZHJlc3MudG9CZWNoMzIoKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU2NyaXB0IEFkZHJlc3M6XCIgKyBzY3JpcHRBZGRyZXNzKVxyXG4gICAgICBcclxuICAgICAgLy8gQ29uc3RydWN0IHRoZSB2ZXN0aW5nIGRhdHVtXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IG5ldyBnYW1lUmV3YXJkLnR5cGVzLkRhdHVtKFxyXG4gICAgICAgIGJlbmVmaXRpYXJ5LnB1YktleUhhc2gsXHJcbiAgICAgIClcclxuICAgIFxyXG4gICAgLy9jb25zdCByZWRlZW1iZXIgPSAobmV3IGdhbWVSZXdhcmQudHlwZXMuUmVkZWVtZXIuQ2xhaW0oKSkuX3RvVXBsY0RhdGEoKTtcclxuICAgIFxyXG4gICAgICBjb25zdCB0eCA9IG5ldyBUeCgpO1xyXG4gICAgICB0eC5hZGRJbnB1dHModXR4b3NbMF0pO1xyXG4gICAgICB0eC5hZGRPdXRwdXQobmV3IFR4T3V0cHV0KFxyXG4gICAgICAgIHNjcmlwdEFkZHJlc3MsXHJcbiAgICAgICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlU2NyaXB0KSxcclxuICAgICAgICBEYXR1bS5pbmxpbmUoZ2FtZURhdHVtKVxyXG4gICAgICApKTtcclxuXHJcbiAgICAgIC8vIHR4LmFkZE91dHB1dChuZXcgVHhPdXRwdXQoXHJcbiAgICAgIC8vICAgYmVuZWZpdGlhcnksXHJcbiAgICAgIC8vICAgbWluQWRhVmFsLFxyXG4gICAgICAvLyApKTtcclxuICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhcIldlIGF0dGF0Y2hlZCBldmVyeXRoaW5nIVwiKVxyXG5cclxuICAgICAgLy8gUmVhZCBpbiB0aGUgbmV0d29yayBwYXJhbWV0ZXIgZmlsZVxyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zSnNvbiA9IGF3YWl0IGdldE5ldHdvcmtQYXJhbXMobmV0d29yayk7XHJcbiAgICAgIGNvbnN0IG5ldHdvcmtQYXJhbXMgPSBuZXcgTmV0d29ya1BhcmFtcyhuZXR3b3JrUGFyYW1zSnNvbik7XHJcblxyXG4gICAgICAvLyBTZW5kIGFueSBjaGFuZ2UgYmFjayB0byB0aGUgYnV5ZXJcclxuICAgICAgYXdhaXQgdHguZmluYWxpemUobmV0d29ya1BhcmFtcywgYmVuZWZpdGlhcnksIHV0eG9zWzFdKTtcclxuXHJcbiAgICAgIC8vIFNpZ24gdGhlIHVuc2lnbmVkIHR4IHRvIGdldCB0aGUgd2l0bmVzc1xyXG4gICAgICBjb25zdCBzaWduYXR1cmVzID0gYXdhaXQgY2lwMzBXYWxsZXRBUEkuc2lnblR4KHR4KTtcclxuICAgICAgdHguYWRkU2lnbmF0dXJlcyhzaWduYXR1cmVzKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2lnbmVkXCIpO1xyXG4gICAgICAvLyBTdWJtaXQgdGhlIHNpZ25lZCB0eFxyXG4gICAgICBjb25zdCB0eEhhc2ggPSBhd2FpdCBjaXAzMFdhbGxldEFQSS5zdWJtaXRUeCh0eCk7XHJcblxyXG4gICAgICBzZXRUeCh7IHR4SWQ6IHR4SGFzaC5oZXggfSk7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB0aHJvdyBjb25zb2xlLmVycm9yKFwic3VibWl0IHR4IGZhaWxlZFwiLCBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuICAgIFxyXG4gIGFzeW5jIGZ1bmN0aW9uIGZldGNoVXR4b3Moc2NyaXB0QWRkcmVzczogc3RyaW5nKTogUHJvbWlzZTx7IHNlbGVjdGVkOiBUeElucHV0W107IHRvdGFsQW1vdW50OiBiaWdpbnQsIGR5bmFtaWNSZXdhcmQ6IGJpZ2ludCB9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2dldFV0eG9zYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2NyaXB0QWRkcmVzc30pLFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBSYXcgSlNPTiBhcnJheSBmcm9tIGJhY2tlbmRcclxuICBcclxuICAgIC8vIGBDb252ZXJ0IEpTT04gYmFjayB0byBUeElucHV0IG9iamVjdHNcclxuICAgIGNvbnN0IHNlbGVjdGVkVXR4b3MgPSBkYXRhLnNlbGVjdGVkLm1hcCgodXR4bzogYW55KSA9PiBUeElucHV0LmZyb21GdWxsQ2Jvcih1dHhvKSk7XHJcbiAgICBjb25zdCBkeW5hbWljUmV3YXJkOiBiaWdpbnQgPSBCaWdJbnQoZGF0YS5keW5hbWljUmV3YXJkKTtcclxuICAgIGNvbnN0IHRvdGFsQW1vdW50OiBiaWdpbnQgPSBCaWdJbnQoZGF0YS50b3RhbEFtb3VudCk7XHJcbiAgICBjb25zb2xlLmxvZyhcInNlbGVjdGVkVXR4b3NcIisgc2VsZWN0ZWRVdHhvcyk7XHJcbiAgICBjb25zb2xlLmxvZyhcImR5bmFtaWNSZXdhcmRcIiArIGR5bmFtaWNSZXdhcmQpO1xyXG4gICAgY29uc29sZS5sb2coXCJ0b3RhbEFtb3VudFwiKyB0b3RhbEFtb3VudCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkVXR4b3MsXHJcbiAgICAgIHRvdGFsQW1vdW50OiB0b3RhbEFtb3VudCxcclxuICAgICAgZHluYW1pY1Jld2FyZDogZHluYW1pY1Jld2FyZCxcclxuICAgIH07XHJcbiAgfVxyXG4gIFxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVDbGFpbVJlZGVlbWVyKHJlY2VwaWFudEhhc2hIZXg6IHN0cmluZyk6IFVwbGNEYXRhIHtcclxuICAgIC8vIENvbnZlcnQgaGV4IHN0cmluZyB0byBieXRlIGFycmF5XHJcbiAgICBjb25zdCBieXRlcyA9IGhleFRvQnl0ZXMocmVjZXBpYW50SGFzaEhleCk7XHJcbiAgICBjb25zb2xlLmxvZyhcIlJlZGVlbWVyIGJ5dGVzIGxlbmd0aDpcIiwgYnl0ZXMubGVuZ3RoKTtcclxuICAgIFxyXG4gICAgLy8gVmFsaWRhdGUgdGhlIGxlbmd0aCBvZiBQdWJLZXlIYXNoXHJcbiAgICBpZiAoYnl0ZXMubGVuZ3RoICE9PSAyOCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBQdWJLZXlIYXNoIGxlbmd0aDogZXhwZWN0ZWQgMjggYnl0ZXMsIGdvdCAke2J5dGVzLmxlbmd0aH0gYnl0ZXNgKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gV3JhcCB0aGUgYnl0ZSBhcnJheSBpbiBCeXRlQXJyYXlEYXRhXHJcbiAgICBjb25zdCBieXRlQXJyYXlEYXRhID0gbmV3IEJ5dGVBcnJheURhdGEoYnl0ZXMpO1xyXG4gICAgXHJcbiAgICAvLyBDb25zdHJ1Y3QgQ29uc3RyRGF0YSB3aXRoIGNvbnN0cnVjdG9yIGluZGV4IDEgZm9yIENsYWltXHJcbiAgICBjb25zdCBjb25zdHJEYXRhID0gbmV3IENvbnN0ckRhdGEoMSwgW2J5dGVBcnJheURhdGFdKTtcclxuICAgIFxyXG4gICAgcmV0dXJuIGNvbnN0ckRhdGE7XHJcbn1cclxuXHJcblxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR2FtZURhdHVtKGJlbmVmaWNpYXJ5SGFzaEhleDogc3RyaW5nKTogRGF0dW0ge1xyXG4gIC8vIENvbnZlcnQgaGV4IHN0cmluZyB0byBieXRlIGFycmF5XHJcbiAgY29uc3QgYnl0ZXMgPSBoZXhUb0J5dGVzKGJlbmVmaWNpYXJ5SGFzaEhleCk7XHJcbiAgY29uc29sZS5sb2coXCJEYXR1bSBieXRlcyBsZW5ndGg6XCIsIGJ5dGVzLmxlbmd0aCk7XHJcbiAgXHJcbiAgLy8gVmFsaWRhdGUgdGhlIGxlbmd0aCBvZiBQdWJLZXlIYXNoXHJcbiAgaWYgKGJ5dGVzLmxlbmd0aCAhPT0gMjgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFB1YktleUhhc2ggbGVuZ3RoIGZvciBEYXR1bTogZXhwZWN0ZWQgMjggYnl0ZXMsIGdvdCAke2J5dGVzLmxlbmd0aH0gYnl0ZXNgKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gV3JhcCB0aGUgYnl0ZSBhcnJheSBpbiBCeXRlQXJyYXlEYXRhXHJcbiAgY29uc3QgYnl0ZUFycmF5RGF0YSA9IG5ldyBCeXRlQXJyYXlEYXRhKGJ5dGVzKTtcclxuICBcclxuICAvLyBDcmVhdGUgaW5saW5lIERhdHVtIHdpdGhvdXQgY29uc3RydWN0b3IgaW5kaWNlc1xyXG4gIHJldHVybiBEYXR1bS5pbmxpbmUoYnl0ZUFycmF5RGF0YSk7XHJcbn0iXSwibmFtZXMiOlsiTmV0d29ya1BhcmFtcyIsIlZhbHVlIiwiVHhPdXRwdXQiLCJUeCIsIlR4SW5wdXQiLCJDaXAzMFdhbGxldCIsIkRhdHVtIiwiQXNzZXRzIiwiV2FsbGV0SGVscGVyIiwiTWludGluZ1BvbGljeUhhc2giLCJVcGxjUHJvZ3JhbSIsIkFzc2V0Q2xhc3MiLCJBZGRyZXNzIiwiQ29uc3RyRGF0YSIsIkJ5dGVBcnJheURhdGEiLCJoZXhUb0J5dGVzIiwibmV0d29yayIsImdldE5ldHdvcmtQYXJhbXMiLCJHYW1lUmV3YXJkIiwib3B0aW1pemUiLCJjYWxjdWxhdGVDb3VudGRvd24iLCJUaW1lQmVnaW5Db250cmFjdCIsIlRpbWVOb3ciLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwiQ1lDTEVfRFVSQVRJT04iLCJvZmZzZXRJbk1zIiwiZWxhcHNlZFRpbWUiLCJlbGFwc2VkVGltZUluU2Vjb25kcyIsInBvc2l0aW9uSW5DeWNsZSIsIlJlZGVlbWVyVmFyaWFudCIsIkdBTUVfUkVXQVJEX0NCT1JfSlNPTiIsImNsYWltVG9rZW5zIiwid2FsbGV0QVBJIiwic2V0SXNMb2FkaW5nIiwic2V0VHgiLCJFcnJvciIsImJlbmVmaXRpYXJ5IiwiY2lwMzBXYWxsZXRBUEkiLCJ3YWxsZXRIZWxwZXIiLCJuZXR3b3JrUGFyYW1zSnNvbiIsIm5ldHdvcmtQYXJhbXMiLCJwb2xpY3lJZCIsIm5hbWUiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJtcGgiLCJmcm9tSGV4IiwiYXNzZXRDbGFzcyIsInRva2VuTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJ1dHhvcyIsImdldFV0eG9zIiwiY2hhbmdlQWRkcmVzcyIsImNib3JIZXgiLCJ1cGxjUHJvZ3JhbSIsImZyb21DYm9yIiwicHViS2V5SGFzaCIsImhleCIsInNjcmlwdEFkZHJlc3MiLCJmcm9tQmVjaDMyIiwidG9CZWNoMzIiLCJkaXIiLCJkZXB0aCIsImdhbWVEYXR1bSIsImNyZWF0ZUdhbWVEYXR1bSIsImNsYWltUmVkZWVtZXIiLCJjcmVhdGVDbGFpbVJlZGVlbWVyIiwidHgiLCJzb3J0ZWRVdHhvcyIsImZldGNoVXR4b3MiLCJDTEFJTV9XSU5ET1ciLCJ3aW5kb3ciLCJvbmVycm9yIiwidGVzdFZhbHVlQmVuZWZpdGlhcnkiLCJCaWdJbnQiLCJkeW5hbWljUmV3YXJkIiwiYW1vdW50VG9TZW5kQmFjayIsInRvdGFsQW1vdW50IiwiZmlyc3RQYXJ0VG9TZW5kQmFjayIsInNlY29uZFBhcnRUb1NlbmRCYWNrIiwidmFsdWVDb250cmFjdDEiLCJ2YWx1ZUNvbnRyYWN0MiIsImFkZElucHV0cyIsInNlbGVjdGVkIiwiYXR0YWNoU2NyaXB0IiwidXNlckNsYWltT3V0cHV0IiwidW5kZWZpbmVkIiwiYWRkT3V0cHV0IiwidG90YWxBZGFJbklucHV0cyIsImZvckVhY2giLCJ1dHhvIiwib3V0cHV0IiwidmFsdWUiLCJsb3ZlbGFjZSIsImFkYVBlclNjcmlwdE91dHB1dCIsInNjcmlwdFV0eG8xIiwic2NyaXB0VXR4bzIiLCJmaW5hbGl6ZSIsInNpZ25hdHVyZXMiLCJzaWduVHgiLCJhZGRTaWduYXR1cmVzIiwidHhIYXNoIiwic3VibWl0VHgiLCJ0eElkIiwiZXJyIiwiZXJyb3IiLCJzZW5kIiwibWluQWRhIiwibWluQWRhVmFsIiwidGVzdFZhbHVlU2NyaXB0IiwicGlja1V0eG9zIiwiZ2FtZVJld2FyZCIsImNvbXBpbGVkUHJvZ3JhbSIsImNvbXBpbGUiLCJmcm9tSGFzaGVzIiwidmFsaWRhdG9ySGFzaCIsInR5cGVzIiwiaW5saW5lIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImRhdGEiLCJqc29uIiwic2VsZWN0ZWRVdHhvcyIsIm1hcCIsImZyb21GdWxsQ2JvciIsInJlY2VwaWFudEhhc2hIZXgiLCJieXRlcyIsImxlbmd0aCIsImJ5dGVBcnJheURhdGEiLCJjb25zdHJEYXRhIiwiYmVuZWZpY2lhcnlIYXNoSGV4Il0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./public/walletActions.ts\n"));

/***/ })

});