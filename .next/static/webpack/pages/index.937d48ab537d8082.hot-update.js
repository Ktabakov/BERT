"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./public/walletActions.ts":
/*!*********************************!*\
  !*** ./public/walletActions.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateCountdown: () => (/* binding */ calculateCountdown),\n/* harmony export */   claimTokens: () => (/* binding */ claimTokens),\n/* harmony export */   send: () => (/* binding */ send)\n/* harmony export */ });\n/* harmony import */ var _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @hyperionbt/helios */ \"./node_modules/@hyperionbt/helios/helios.js\");\n/* harmony import */ var _common_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/network */ \"./common/network.ts\");\n/* harmony import */ var _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/GameReward.hl */ \"./contracts/GameReward.hl\");\n/* harmony import */ var _contracts_GameRewardCbor1_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contracts/GameRewardCbor1.json */ \"./contracts/GameRewardCbor1.json\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\n // Ensure correct path to your contract\nconst optimize = false;\nfunction calculateCountdown() {\n    const TimeBeginContract = 1736073600000;\n    const TimeNow = Math.floor(Date.now());\n    const CYCLE_DURATION = 600 // 10 minutes \n    ;\n    const offsetInMs = 89680;\n    const elapsedTime = TimeNow - offsetInMs - TimeBeginContract;\n    const elapsedTimeInSeconds = elapsedTime / 1000;\n    const positionInCycle = elapsedTimeInSeconds % CYCLE_DURATION;\n    return positionInCycle;\n}\n // { cborHex: \"4e4d010000...\" }\nasync function claimTokens(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw new Error(\"Wallet API is not set.\");\n    }\n    try {\n        var _benefitiary_pubKeyHash;\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        const policyId = \"3a8d42fbc0e40b1c72d3ba204651ffbc3e4d4afb116605e6599523d2\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name\n        });\n        console.log(assetClass);\n        const utxos = await walletHelper.getUtxos();\n        console.log(\"utxos\" + utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const cborHex = _contracts_GameRewardCbor1_json__WEBPACK_IMPORTED_MODULE_2__.cborHex;\n        //const compiledProgram = Program.new(cborHex); \n        //const uplcProgram = new NativeScript(cborHex as unknown as number);\n        const uplcProgram = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.UplcProgram.fromCbor(cborHex);\n        //console.log(\"compiledProgram\" + compiledProgram);\n        console.log(\"benefitiary.pubKeyHash?.hex!)\" + ((_benefitiary_pubKeyHash = benefitiary.pubKeyHash) === null || _benefitiary_pubKeyHash === void 0 ? void 0 : _benefitiary_pubKeyHash.hex));\n        //const gameReward = new GameReward();\n        // Compile the vesting validator\n        //const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromBech32(\"addr1w8ts9k76vfj5fx856s0ytzgr92q5nsdn4kzm2dgn07ndzncq08zq9\");\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        console.dir(scriptAddress, {\n            depth: null\n        });\n        const datumObject = {\n            benefitiary: benefitiary.pubKeyHash\n        };\n        const gameDatum = createGameDatum(benefitiary.pubKeyHash.hex);\n        console.log(\"gameDatum\" + JSON.stringify(gameDatum));\n        // const gameDatum = new gameReward.types.Datum(\n        //   benefitiary.pubKeyHash,\n        // )\n        // Create the vesting claim redeemer\n        //  const redeember = (new gameReward.types.Redeemer.Claim(benefitiary.pubKeyHash))\n        //  ._toUplcData();\n        const claimRedeemer = createClaimRedeemer(benefitiary.pubKeyHash.hex);\n        console.log(\"claimRedeemerData\" + claimRedeemer.data);\n        console.log(\"claimRedeemer\" + claimRedeemer);\n        //console.log(filteredUtxos);\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        const sortedUtxos = await fetchUtxos(scriptAddress.toBech32());\n        const CLAIM_WINDOW = 20; // 20 seconds \n        const positionInCycle = calculateCountdown();\n        console.log(\"positionInCycle\" + positionInCycle);\n        window.onerror = ()=>positionInCycle < CLAIM_WINDOW;\n        //const dynamicReward = calculateReward(Number(remainingSupply), TOTAL_SUPPLY, BASE_REWARD);\n        const testValueBenefitiary = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(sortedUtxos.dynamicReward)\n            ]\n        ]);\n        //const totalAmountUtxo = getTokenAmountFromUtxos(sortedUtxos.selected, assetClass);\n        const amountToSendBack = BigInt(sortedUtxos.totalAmount) - BigInt(sortedUtxos.dynamicReward);\n        const firstPartToSendBack = amountToSendBack / 2n; // First part is half of the total amount\n        const secondPartToSendBack = amountToSendBack - firstPartToSendBack; // Second part is the remainder\n        console.log(\"First \" + firstPartToSendBack);\n        console.log(\"Sevond \" + secondPartToSendBack);\n        console.log(sortedUtxos.dynamicReward);\n        const valueContract1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                firstPartToSendBack\n            ]\n        ]);\n        const valueContract2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                secondPartToSendBack\n            ]\n        ]);\n        //tx.addInputs(utxos[0]);\n        tx.addInputs(sortedUtxos.selected, claimRedeemer.data);\n        tx.attachScript(uplcProgram);\n        var userClaimOutput = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(benefitiary, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueBenefitiary));\n        tx.addOutput(userClaimOutput);\n        //Shiiit, fix. Someone could rediredt the rest of the tokens\n        // const addressStr = \"addr_test1qrarqhmklnhwcw3q0zm6sgm3g3l7pua0y36sql9k5ru8dsucglsked5f5yrcf9e9xgxjgmt7xk52knh8h0dgayc00arqlh7g60\";\n        // const address = Address.fromBech32(addressStr);\n        // tx.addOutput(new TxOutput(\n        //   address,\n        //   new Value(undefined, testValueContract) // The amount being claimed\n        // ));\n        // Calculate total ADA in the selected script inputs\n        let totalAdaInInputs = BigInt(0);\n        sortedUtxos.selected.forEach((utxo)=>{\n            totalAdaInInputs += BigInt(utxo.output.value.lovelace);\n        });\n        // Distribute ADA equally (or as required) among script outputs\n        const adaPerScriptOutput = totalAdaInInputs / 2n; // Assuming two script outputs\\\n        if (amountToSendBack != BigInt(0)) {\n            var _benefitiary_pubKeyHash1, _benefitiary_pubKeyHash2;\n            var scriptUtxo1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(adaPerScriptOutput, valueContract1), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(0, [\n                new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)((_benefitiary_pubKeyHash1 = benefitiary.pubKeyHash) === null || _benefitiary_pubKeyHash1 === void 0 ? void 0 : _benefitiary_pubKeyHash1.hex))\n            ])));\n            tx.addOutput(scriptUtxo1);\n            var scriptUtxo2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(totalAdaInInputs - adaPerScriptOutput, valueContract2), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(0, [\n                new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)((_benefitiary_pubKeyHash2 = benefitiary.pubKeyHash) === null || _benefitiary_pubKeyHash2 === void 0 ? void 0 : _benefitiary_pubKeyHash2.hex))\n            ])));\n            tx.addOutput(scriptUtxo2);\n        }\n        //var inputFees = await walletHelper.pickUtxos(new Value(tokenAmountFees));\n        //tx.addInputs(inputFees[0]);\n        console.log(\"We attatched everything!\");\n        await tx.finalize(networkParams, benefitiary, utxos);\n        console.log(\"dali finalizirahme?\");\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"Dali q signirahme?\");\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        console.error(\"submit tx failed\", err);\n        throw err;\n    }\n}\nasync function send(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw console.error(\"walletAPI is not set\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        // const blockfrost = new BlockFrostIPFS({\n        //   network: network,\n        //   projectId: \"preprodJExO0MAMRgfpXz9Il4IqB2u9ddoylZBT\",\n        // });\n        console.log(\"gmmm\");\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        const policyId = \"3a8d42fbc0e40b1c72d3ba204651ffbc3e4d4afb116605e6599523d2\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name // Convert to hex string\n        });\n        console.log(assetClass);\n        const minAda = 1000000; // minimum lovelace to send\n        const minAdaVal = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(BigInt(minAda));\n        const testValueScript = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(125550)\n            ]\n        ]);\n        // Get wallet UTXOs\n        const utxos = await walletHelper.pickUtxos(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript));\n        console.log(utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const gameReward = new _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        // Compile the vesting validator\n        const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromHashes(compiledProgram.validatorHash);\n        //remove\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        // Construct the vesting datum\n        const gameDatum = new gameReward.types.Datum(benefitiary.pubKeyHash);\n        //const redeember = (new gameReward.types.Redeemer.Claim())._toUplcData();\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        tx.addInputs(utxos[0]);\n        tx.addOutput(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(gameDatum)));\n        // tx.addOutput(new TxOutput(\n        //   benefitiary,\n        //   minAdaVal,\n        // ));\n        console.log(\"We attatched everything!\");\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        // Send any change back to the buyer\n        await tx.finalize(networkParams, benefitiary, utxos[1]);\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"signed\");\n        // Submit the signed tx\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        throw console.error(\"submit tx failed\", err);\n    }\n}\nasync function fetchUtxos(scriptAddress) {\n    const response = await fetch(\"/api/getUtxos\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            scriptAddress\n        })\n    });\n    const data = await response.json(); // Raw JSON array from backend\n    // `Convert JSON back to TxInput objects\n    const selectedUtxos = data.selected.map((utxo)=>_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxInput.fromFullCbor(utxo));\n    const dynamicReward = BigInt(data.dynamicReward);\n    const totalAmount = BigInt(data.totalAmount);\n    console.log(\"selectedUtxos\" + selectedUtxos);\n    console.log(\"dynamicReward\" + dynamicReward);\n    console.log(\"totalAmount\" + totalAmount);\n    return {\n        selected: selectedUtxos,\n        totalAmount: totalAmount,\n        dynamicReward: dynamicReward\n    };\n}\nfunction createClaimRedeemer(pubKeyHashHex) {\n    // The \"Claim\" constructor might be tag=1 if it's the second in the enum\n    const tag = 1;\n    const field = [\n        new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(pubKeyHashHex))\n    ];\n    const constr = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(tag, field);\n    return new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Redeemer(constr);\n}\nfunction createGameDatum(benefitiaryHashHex) {\n    // If this struct has only one field, typically it's tag=0\n    const tag = 0;\n    const field = [\n        new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(benefitiaryHashHex))\n    ];\n    const cd = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(tag, field);\n    return _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(cd);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ2JGLGVBQWVBO0lBQ2pCO0FBQ0Y7QUFHQSxTQUFTVixvQkFBb0I4RCxhQUFxQjtJQUNoRCx3RUFBd0U7SUFDeEUsTUFBTUMsTUFBTTtJQUNaLE1BQU1DLFFBQVE7UUFBQyxJQUFJM0gsNkRBQWFBLENBQUNDLDhEQUFVQSxDQUFDd0g7S0FBZ0I7SUFDNUQsTUFBTUcsU0FBUyxJQUFJN0gsMERBQVVBLENBQUMySCxLQUFLQztJQUNuQyxPQUFPLElBQUkvSCx3REFBUUEsQ0FBQ2dJO0FBQ3RCO0FBRUEsU0FBU3JFLGdCQUFnQnNFLGtCQUEwQjtJQUNqRCwwREFBMEQ7SUFDMUQsTUFBTUgsTUFBTTtJQUNaLE1BQU1DLFFBQVE7UUFBQyxJQUFJM0gsNkRBQWFBLENBQUNDLDhEQUFVQSxDQUFDNEg7S0FBcUI7SUFDakUsTUFBTUMsS0FBSyxJQUFJL0gsMERBQVVBLENBQUMySCxLQUFLQztJQUMvQixPQUFPcEkscURBQUtBLENBQUNtRyxNQUFNLENBQUNvQztBQUN0QiIsInNvdXJjZXMiOlsiRDpcXFVsdGltYXRlLUNhcmRhbm8tU21hcnQtQ29udHJhY3RzXFxGbGFwcHlCaXJkR2FtZVxcaGVsaW9zXFxHYW1lUmV3YXJkXFxwdWJsaWNcXHdhbGxldEFjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXHJcbiAgICBOZXR3b3JrUGFyYW1zLFxyXG4gICAgVmFsdWUsXHJcbiAgICBUeE91dHB1dCxcclxuICAgIFR4LFxyXG4gICAgVHhJbnB1dCxcclxuICAgIENpcDMwV2FsbGV0LFxyXG4gICAgRGF0dW0sXHJcbiAgICBBc3NldHMsXHJcbiAgICBXYWxsZXRIZWxwZXIsXHJcbiAgICBNaW50aW5nUG9saWN5SGFzaCxcclxuICAgIFVwbGNQcm9ncmFtLFxyXG4gICAgUmVkZWVtZXIsXHJcbiAgICBBc3NldENsYXNzLFxyXG4gICAgUHViS2V5SGFzaCxcclxuICAgIEFkZHJlc3MsXHJcbiAgICBDb25zdHJEYXRhLFxyXG4gICAgTmF0aXZlU2NyaXB0LFxyXG4gICAgQnl0ZUFycmF5RGF0YSxcclxuICAgIGhleFRvQnl0ZXMsXHJcbiAgfSBmcm9tIFwiQGh5cGVyaW9uYnQvaGVsaW9zXCI7XHJcbiAgaW1wb3J0IHsgbmV0d29yaywgZ2V0TmV0d29ya1BhcmFtcyB9IGZyb20gJy4uL2NvbW1vbi9uZXR3b3JrJztcclxuICBpbXBvcnQgR2FtZVJld2FyZCBmcm9tICcuLi9jb250cmFjdHMvR2FtZVJld2FyZC5obCc7IC8vIEVuc3VyZSBjb3JyZWN0IHBhdGggdG8geW91ciBjb250cmFjdFxyXG4gIFxyXG4gIGNvbnN0IG9wdGltaXplID0gZmFsc2U7XHJcbiAgXHJcbiAgZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUNvdW50ZG93bigpOiBudW1iZXIge1xyXG4gIFxyXG4gICAgY29uc3QgVGltZUJlZ2luQ29udHJhY3QgPSAxNzM2MDczNjAwMDAwO1xyXG5cclxuICAgIGNvbnN0IFRpbWVOb3c6IG51bWJlciA9IE1hdGguZmxvb3IoRGF0ZS5ub3coKSk7IFxyXG4gICAgY29uc3QgQ1lDTEVfRFVSQVRJT04gPSA2MDAgLy8gMTAgbWludXRlcyBcclxuICAgIGNvbnN0IG9mZnNldEluTXMgPSA4OTY4MDtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lID0gVGltZU5vdyAtIChvZmZzZXRJbk1zKSAtIFRpbWVCZWdpbkNvbnRyYWN0O1xyXG4gICAgY29uc3QgZWxhcHNlZFRpbWVJblNlY29uZHMgPSBlbGFwc2VkVGltZSAvIDEwMDA7XHJcbiAgICBjb25zdCBwb3NpdGlvbkluQ3ljbGUgPSBlbGFwc2VkVGltZUluU2Vjb25kcyAlIENZQ0xFX0RVUkFUSU9OO1xyXG4gIFxyXG4gICAgcmV0dXJuIHBvc2l0aW9uSW5DeWNsZTtcclxuICB9IFxyXG4gIFxyXG4gIC8vIFRoZSBIZWxpb3MgY29udHJhY3Qgc2F5czogc3RydWN0IERhdHVtIHsgYmVuZWZpdGlhcnk6IFB1YktleUhhc2ggfVxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgR2FtZURhdHVtIHtcclxuICAgIGJlbmVmaXRpYXJ5OiBQdWJLZXlIYXNoOyAvLyBUaGUgcHViS2V5SGFzaCBhcyBhIGhleCBzdHJpbmdcclxuICB9XHJcblxyXG4gIC8vIFRoZSBIZWxpb3MgY29udHJhY3Qgc2F5czogZW51bSBSZWRlZW1lciB7IENhbmNlbCwgQ2xhaW0geyByZWNlcGlhbnQ6IFB1YktleUhhc2ggfSB9XHJcbiAgZXhwb3J0IGludGVyZmFjZSBHYW1lUmVkZWVtZXJDbGFpbSB7XHJcbiAgICBfX3RhZzogXCJDbGFpbVwiO1xyXG4gICAgcmVjZXBpYW50OiBzdHJpbmc7IC8vIFRoZSBzYW1lIHB1YktleUhhc2ggaW4gaGV4XHJcbiAgfVxyXG4gIGltcG9ydCBHQU1FX1JFV0FSRF9DQk9SX0pTT04gZnJvbSAnLi4vY29udHJhY3RzL0dhbWVSZXdhcmRDYm9yMS5qc29uJzsgLy8geyBjYm9ySGV4OiBcIjRlNGQwMTAwMDAuLi5cIiB9XHJcblxyXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGFpbVRva2Vucyh3YWxsZXRBUEk6IGFueSwgc2V0SXNMb2FkaW5nOiAodmFsOiBib29sZWFuKSA9PiB2b2lkLCBzZXRUeDogKHZhbDoge3R4SWQ6IHN0cmluZ30pID0+IHZvaWQpIHtcclxuICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICBpZiAoIXdhbGxldEFQSSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBBUEkgaXMgbm90IHNldC5cIik7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjaXAzMFdhbGxldEFQSSA9IG5ldyBDaXAzMFdhbGxldCh3YWxsZXRBUEkpO1xyXG5cclxuICAgICAgY29uc3Qgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcihjaXAzMFdhbGxldEFQSSk7XHJcbiAgICAgIC8vIFJlYWQgaW4gdGhlIG5ldHdvcmsgcGFyYW1ldGVyIGZpbGVcclxuICAgICAgY29uc3QgbmV0d29ya1BhcmFtc0pzb24gPSBhd2FpdCBnZXROZXR3b3JrUGFyYW1zKG5ldHdvcmspO1xyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zID0gbmV3IE5ldHdvcmtQYXJhbXMobmV0d29ya1BhcmFtc0pzb24pO1xyXG5cclxuICAgICAgY29uc3QgcG9saWN5SWQgPSBcIjNhOGQ0MmZiYzBlNDBiMWM3MmQzYmEyMDQ2NTFmZmJjM2U0ZDRhZmIxMTY2MDVlNjU5OTUyM2QyXCI7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBCdWZmZXIuZnJvbShcIkJFUlRcIiwgJ3V0ZjgnKS50b1N0cmluZygnaGV4Jyk7XHJcblxyXG4gICAgICBjb25zdCBtcGggPSBNaW50aW5nUG9saWN5SGFzaC5mcm9tSGV4KHBvbGljeUlkKTtcclxuXHJcbiAgICAgIGNvbnN0IGFzc2V0Q2xhc3MgPSBuZXcgQXNzZXRDbGFzcyh7XHJcbiAgICAgICAgbXBoOiBtcGgsIFxyXG4gICAgICAgIHRva2VuTmFtZTogbmFtZVxyXG4gICAgICB9KTsgXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGFzc2V0Q2xhc3MpXHJcblxyXG4gICAgICBjb25zdCB1dHhvcyA9IGF3YWl0IHdhbGxldEhlbHBlci5nZXRVdHhvcygpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInV0eG9zXCIgKyB1dHhvcyk7XHJcblxyXG4gICAgICAvLyBHZXQgY2hhbmdlIGFkZHJlc3NcclxuICAgICAgY29uc3QgYmVuZWZpdGlhcnkgPSBhd2FpdCB3YWxsZXRIZWxwZXIuY2hhbmdlQWRkcmVzcztcclxuICAgICAgLy8gTG9hZCBpbiB0aGUgdmVzdGluZyB2YWxpZGF0b3Igc2NyaXB0IChwcm9ncmFtKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgY2JvckhleCA9IEdBTUVfUkVXQVJEX0NCT1JfSlNPTi5jYm9ySGV4OyBcclxuICAgICAgLy9jb25zdCBjb21waWxlZFByb2dyYW0gPSBQcm9ncmFtLm5ldyhjYm9ySGV4KTsgXHJcbiAgICAgIC8vY29uc3QgdXBsY1Byb2dyYW0gPSBuZXcgTmF0aXZlU2NyaXB0KGNib3JIZXggYXMgdW5rbm93biBhcyBudW1iZXIpO1xyXG4gICAgICBjb25zdCB1cGxjUHJvZ3JhbSA9IFVwbGNQcm9ncmFtLmZyb21DYm9yKGNib3JIZXgpO1xyXG5cclxuICAgICAgLy9jb25zb2xlLmxvZyhcImNvbXBpbGVkUHJvZ3JhbVwiICsgY29tcGlsZWRQcm9ncmFtKTtcclxuICAgICAgY29uc29sZS5sb2coXCJiZW5lZml0aWFyeS5wdWJLZXlIYXNoPy5oZXghKVwiICsgYmVuZWZpdGlhcnkucHViS2V5SGFzaD8uaGV4ISlcclxuXHJcbiAgICAgIC8vY29uc3QgZ2FtZVJld2FyZCA9IG5ldyBHYW1lUmV3YXJkKCk7XHJcblxyXG4gICAgICAvLyBDb21waWxlIHRoZSB2ZXN0aW5nIHZhbGlkYXRvclxyXG4gICAgICAvL2NvbnN0IGNvbXBpbGVkUHJvZ3JhbSA9IGdhbWVSZXdhcmQuY29tcGlsZShvcHRpbWl6ZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2FsbGV0IGFkZHJlc3M6IFwiICsgYmVuZWZpdGlhcnkpXHJcbiAgICAgIGNvbnN0IHNjcmlwdEFkZHJlc3MgPSBBZGRyZXNzLmZyb21CZWNoMzIoXCJhZGRyMXc4dHM5azc2dmZqNWZ4ODU2czB5dHpncjkycTVuc2RuNGt6bTJkZ24wN25kem5jcTA4enE5XCIpXHJcbiAgICBcclxuICAgICAgY29uc29sZS5sb2coc2NyaXB0QWRkcmVzcy50b0JlY2gzMigpKTtcclxuICAgICAgY29uc29sZS5sb2coXCJTY3JpcHQgQWRkcmVzczpcIiArIHNjcmlwdEFkZHJlc3MpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmRpcihzY3JpcHRBZGRyZXNzLCB7IGRlcHRoOiBudWxsIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0dW1PYmplY3Q6IEdhbWVEYXR1bSA9IHtcclxuICAgICAgICBiZW5lZml0aWFyeTogYmVuZWZpdGlhcnkucHViS2V5SGFzaCFcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IGNyZWF0ZUdhbWVEYXR1bShiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImdhbWVEYXR1bVwiICsgSlNPTi5zdHJpbmdpZnkoZ2FtZURhdHVtKSlcclxuXHJcbiAgICAgIC8vIGNvbnN0IGdhbWVEYXR1bSA9IG5ldyBnYW1lUmV3YXJkLnR5cGVzLkRhdHVtKFxyXG4gICAgICAvLyAgIGJlbmVmaXRpYXJ5LnB1YktleUhhc2gsXHJcbiAgICAgIC8vIClcclxuXHJcbiAgICAgICAvLyBDcmVhdGUgdGhlIHZlc3RpbmcgY2xhaW0gcmVkZWVtZXJcclxuICAgICAgLy8gIGNvbnN0IHJlZGVlbWJlciA9IChuZXcgZ2FtZVJld2FyZC50eXBlcy5SZWRlZW1lci5DbGFpbShiZW5lZml0aWFyeS5wdWJLZXlIYXNoKSlcclxuICAgICAgLy8gIC5fdG9VcGxjRGF0YSgpO1xyXG5cclxuICAgICAgY29uc3QgY2xhaW1SZWRlZW1lciA9IGNyZWF0ZUNsYWltUmVkZWVtZXIoYmVuZWZpdGlhcnkucHViS2V5SGFzaCEuaGV4KTtcclxuICAgICAgY29uc29sZS5sb2coXCJjbGFpbVJlZGVlbWVyRGF0YVwiICsgY2xhaW1SZWRlZW1lci5kYXRhKVxyXG4gICAgICBjb25zb2xlLmxvZyhcImNsYWltUmVkZWVtZXJcIiArIGNsYWltUmVkZWVtZXIpXHJcbiAgICAgIC8vY29uc29sZS5sb2coZmlsdGVyZWRVdHhvcyk7XHJcbiAgICAgIGNvbnN0IHR4ID0gbmV3IFR4KCk7XHJcblxyXG4gICAgICBjb25zdCBzb3J0ZWRVdHhvcyA9IGF3YWl0IGZldGNoVXR4b3Moc2NyaXB0QWRkcmVzcy50b0JlY2gzMigpKVxyXG5cclxuICAgICAgY29uc3QgQ0xBSU1fV0lORE9XID0gMjA7IC8vIDIwIHNlY29uZHMgXHJcblxyXG4gICAgICBjb25zdCBwb3NpdGlvbkluQ3ljbGUgPSBjYWxjdWxhdGVDb3VudGRvd24oKTtcclxuICAgICAgY29uc29sZS5sb2coXCJwb3NpdGlvbkluQ3ljbGVcIiArIHBvc2l0aW9uSW5DeWNsZSk7XHJcbiAgICAgIHdpbmRvdy5vbmVycm9yID0gKCkgPT4gcG9zaXRpb25JbkN5Y2xlIDwgQ0xBSU1fV0lORE9XO1xyXG4gICAgICAvL2NvbnN0IGR5bmFtaWNSZXdhcmQgPSBjYWxjdWxhdGVSZXdhcmQoTnVtYmVyKHJlbWFpbmluZ1N1cHBseSksIFRPVEFMX1NVUFBMWSwgQkFTRV9SRVdBUkQpO1xyXG4gICAgICBjb25zdCB0ZXN0VmFsdWVCZW5lZml0aWFyeT0gbmV3IEFzc2V0cyhbW2Fzc2V0Q2xhc3MsIEJpZ0ludChzb3J0ZWRVdHhvcy5keW5hbWljUmV3YXJkKV1dKTtcclxuICAgICAgXHJcbiAgICAgIC8vY29uc3QgdG90YWxBbW91bnRVdHhvID0gZ2V0VG9rZW5BbW91bnRGcm9tVXR4b3Moc29ydGVkVXR4b3Muc2VsZWN0ZWQsIGFzc2V0Q2xhc3MpO1xyXG4gICAgICBjb25zdCBhbW91bnRUb1NlbmRCYWNrID0gQmlnSW50KHNvcnRlZFV0eG9zLnRvdGFsQW1vdW50KSAtIEJpZ0ludChzb3J0ZWRVdHhvcy5keW5hbWljUmV3YXJkKTtcclxuXHJcbiAgICAgIGNvbnN0IGZpcnN0UGFydFRvU2VuZEJhY2sgPSBhbW91bnRUb1NlbmRCYWNrIC8gMm47IC8vIEZpcnN0IHBhcnQgaXMgaGFsZiBvZiB0aGUgdG90YWwgYW1vdW50XHJcbiAgICAgIGNvbnN0IHNlY29uZFBhcnRUb1NlbmRCYWNrID0gYW1vdW50VG9TZW5kQmFjayAtIGZpcnN0UGFydFRvU2VuZEJhY2s7IC8vIFNlY29uZCBwYXJ0IGlzIHRoZSByZW1haW5kZXJcclxuICAgICAgY29uc29sZS5sb2coXCJGaXJzdCBcIiArIGZpcnN0UGFydFRvU2VuZEJhY2spXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU2V2b25kIFwiICsgc2Vjb25kUGFydFRvU2VuZEJhY2spXHJcbiAgICAgIGNvbnNvbGUubG9nKHNvcnRlZFV0eG9zLmR5bmFtaWNSZXdhcmQpXHJcblxyXG4gICAgICBjb25zdCB2YWx1ZUNvbnRyYWN0MT0gbmV3IEFzc2V0cyhbW2Fzc2V0Q2xhc3MsIGZpcnN0UGFydFRvU2VuZEJhY2tdXSk7XHJcbiAgICAgIGNvbnN0IHZhbHVlQ29udHJhY3QyPSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgc2Vjb25kUGFydFRvU2VuZEJhY2tdXSk7XHJcblxyXG4gICAgICAvL3R4LmFkZElucHV0cyh1dHhvc1swXSk7XHJcbiAgICAgIHR4LmFkZElucHV0cyhzb3J0ZWRVdHhvcy5zZWxlY3RlZCwgY2xhaW1SZWRlZW1lci5kYXRhKTtcclxuICAgICAgdHguYXR0YWNoU2NyaXB0KHVwbGNQcm9ncmFtKTtcclxuXHJcbiAgICAgIHZhciB1c2VyQ2xhaW1PdXRwdXQgPSBuZXcgVHhPdXRwdXQoXHJcbiAgICAgICAgYmVuZWZpdGlhcnksXHJcbiAgICAgICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlQmVuZWZpdGlhcnkpKTtcclxuXHJcbiAgICAgIHR4LmFkZE91dHB1dCh1c2VyQ2xhaW1PdXRwdXQpXHJcblxyXG4gICAgXHJcbiAgICAvL1NoaWlpdCwgZml4LiBTb21lb25lIGNvdWxkIHJlZGlyZWR0IHRoZSByZXN0IG9mIHRoZSB0b2tlbnNcclxuICAgIC8vIGNvbnN0IGFkZHJlc3NTdHIgPSBcImFkZHJfdGVzdDFxcmFycWhta2xuaHdjdzNxMHptNnNnbTNnM2w3cHVhMHkzNnNxbDlrNXJ1OGRzdWNnbHNrZWQ1ZjV5cmNmOWU5eGd4amdtdDd4azUya25oOGgwZGdheWMwMGFycWxoN2c2MFwiO1xyXG4gICAgLy8gY29uc3QgYWRkcmVzcyA9IEFkZHJlc3MuZnJvbUJlY2gzMihhZGRyZXNzU3RyKTtcclxuICAgIC8vIHR4LmFkZE91dHB1dChuZXcgVHhPdXRwdXQoXHJcbiAgICAvLyAgIGFkZHJlc3MsXHJcbiAgICAvLyAgIG5ldyBWYWx1ZSh1bmRlZmluZWQsIHRlc3RWYWx1ZUNvbnRyYWN0KSAvLyBUaGUgYW1vdW50IGJlaW5nIGNsYWltZWRcclxuICAgIC8vICkpO1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgQURBIGluIHRoZSBzZWxlY3RlZCBzY3JpcHQgaW5wdXRzXHJcbiAgICBsZXQgdG90YWxBZGFJbklucHV0cyA9IEJpZ0ludCgwKTtcclxuICAgIHNvcnRlZFV0eG9zLnNlbGVjdGVkLmZvckVhY2godXR4byA9PiB7XHJcbiAgICAgICAgdG90YWxBZGFJbklucHV0cyArPSBCaWdJbnQodXR4by5vdXRwdXQudmFsdWUubG92ZWxhY2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gRGlzdHJpYnV0ZSBBREEgZXF1YWxseSAob3IgYXMgcmVxdWlyZWQpIGFtb25nIHNjcmlwdCBvdXRwdXRzXHJcbiAgICBjb25zdCBhZGFQZXJTY3JpcHRPdXRwdXQgPSB0b3RhbEFkYUluSW5wdXRzIC8gMm47IC8vIEFzc3VtaW5nIHR3byBzY3JpcHQgb3V0cHV0c1xcXHJcblxyXG4gICAgaWYgKGFtb3VudFRvU2VuZEJhY2sgIT0gQmlnSW50KDApKXtcclxuICAgICAgdmFyIHNjcmlwdFV0eG8xID1uZXcgVHhPdXRwdXQoXHJcbiAgICAgICAgc2NyaXB0QWRkcmVzcyxcclxuICAgICAgICBuZXcgVmFsdWUoYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MSksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgRGF0dW0uaW5saW5lKFxyXG4gICAgICAgICAgbmV3IENvbnN0ckRhdGEoMCwgWyBuZXcgQnl0ZUFycmF5RGF0YShoZXhUb0J5dGVzKGJlbmVmaXRpYXJ5LnB1YktleUhhc2g/LmhleCEpKSBdKVxyXG4gICAgICAgIClcclxuICAgICAgICk7XHJcblxyXG4gICAgICAgdHguYWRkT3V0cHV0KHNjcmlwdFV0eG8xKTtcclxuXHJcbiAgICAgIHZhciBzY3JpcHRVdHhvMiA9IG5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZSh0b3RhbEFkYUluSW5wdXRzIC0gYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MiksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgRGF0dW0uaW5saW5lKFxyXG4gICAgICAgICAgbmV3IENvbnN0ckRhdGEoMCwgWyBuZXcgQnl0ZUFycmF5RGF0YShoZXhUb0J5dGVzKGJlbmVmaXRpYXJ5LnB1YktleUhhc2g/LmhleCEpKSBdKVxyXG4gICAgICAgIClcclxuICAgICAgICk7XHJcbiAgICBcclxuICAgICAgIHR4LmFkZE91dHB1dChzY3JpcHRVdHhvMik7XHJcbiAgICB9ICBcclxuXHJcbiAgICAgIC8vdmFyIGlucHV0RmVlcyA9IGF3YWl0IHdhbGxldEhlbHBlci5waWNrVXR4b3MobmV3IFZhbHVlKHRva2VuQW1vdW50RmVlcykpO1xyXG4gICAgICBcclxuICAgICAgLy90eC5hZGRJbnB1dHMoaW5wdXRGZWVzWzBdKTtcclxuICAgICAgY29uc29sZS5sb2coXCJXZSBhdHRhdGNoZWQgZXZlcnl0aGluZyFcIilcclxuXHJcbiAgICAgIFxyXG5cclxuICAgICAgYXdhaXQgdHguZmluYWxpemUobmV0d29ya1BhcmFtcywgYmVuZWZpdGlhcnksIHV0eG9zKTtcclxuICAgICAgY29uc29sZS5sb2coXCJkYWxpIGZpbmFsaXppcmFobWU/XCIpXHJcbiAgICAgIC8vIFNpZ24gdGhlIHVuc2lnbmVkIHR4IHRvIGdldCB0aGUgd2l0bmVzc1xyXG4gICAgICBjb25zdCBzaWduYXR1cmVzID0gYXdhaXQgY2lwMzBXYWxsZXRBUEkuc2lnblR4KHR4KTtcclxuICAgICAgdHguYWRkU2lnbmF0dXJlcyhzaWduYXR1cmVzKTtcclxuICAgICAgY29uc29sZS5sb2coXCJEYWxpIHEgc2lnbmlyYWhtZT9cIilcclxuXHJcbiAgICAgIGNvbnN0IHR4SGFzaCA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnN1Ym1pdFR4KHR4KTtcclxuXHJcbiAgICAgIHNldFR4KHsgdHhJZDogdHhIYXNoLmhleCB9KTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJzdWJtaXQgdHggZmFpbGVkXCIsIGVycik7XHJcbiAgICAgICAgdGhyb3cgZXJyOyBcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmQod2FsbGV0QVBJOiBhbnksIHNldElzTG9hZGluZzogKHZhbDogYm9vbGVhbikgPT4gdm9pZCwgc2V0VHg6ICh2YWw6IHt0eElkOiBzdHJpbmd9KSA9PiB2b2lkKSB7XHJcbiAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgaWYgKCF3YWxsZXRBUEkpIHtcclxuICAgICAgdGhyb3cgY29uc29sZS5lcnJvcihcIndhbGxldEFQSSBpcyBub3Qgc2V0XCIpO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgY2lwMzBXYWxsZXRBUEkgPSBuZXcgQ2lwMzBXYWxsZXQod2FsbGV0QVBJKTtcclxuICAgICAgLy8gY29uc3QgYmxvY2tmcm9zdCA9IG5ldyBCbG9ja0Zyb3N0SVBGUyh7XHJcbiAgICAgIC8vICAgbmV0d29yazogbmV0d29yayxcclxuICAgICAgLy8gICBwcm9qZWN0SWQ6IFwicHJlcHJvZEpFeE8wTUFNUmdmcFh6OUlsNElxQjJ1OWRkb3lsWkJUXCIsXHJcbiAgICAgIC8vIH0pO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImdtbW1cIilcclxuXHJcbiAgICAgIGNvbnN0IHdhbGxldEhlbHBlciA9IG5ldyBXYWxsZXRIZWxwZXIoY2lwMzBXYWxsZXRBUEkpO1xyXG5cclxuICAgICAgY29uc3QgcG9saWN5SWQgPSBcIjNhOGQ0MmZiYzBlNDBiMWM3MmQzYmEyMDQ2NTFmZmJjM2U0ZDRhZmIxMTY2MDVlNjU5OTUyM2QyXCI7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBCdWZmZXIuZnJvbShcIkJFUlRcIiwgJ3V0ZjgnKS50b1N0cmluZygnaGV4Jyk7XHJcblxyXG4gICAgICBjb25zdCBtcGggPSBNaW50aW5nUG9saWN5SGFzaC5mcm9tSGV4KHBvbGljeUlkKTtcclxuXHJcbiAgICAgIGNvbnN0IGFzc2V0Q2xhc3MgPSBuZXcgQXNzZXRDbGFzcyh7XHJcbiAgICAgICAgbXBoOiBtcGgsIC8vIFlvdXIgcG9saWN5IGhhc2hcclxuICAgICAgICB0b2tlbk5hbWU6IG5hbWUvLyBDb252ZXJ0IHRvIGhleCBzdHJpbmdcclxuICAgICAgfSk7IFxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhhc3NldENsYXNzKVxyXG5cclxuICAgICAgY29uc3QgbWluQWRhIDogbnVtYmVyID0gMV8wMDBfMDAwOyAvLyBtaW5pbXVtIGxvdmVsYWNlIHRvIHNlbmRcclxuICAgICAgY29uc3QgbWluQWRhVmFsID0gbmV3IFZhbHVlKEJpZ0ludChtaW5BZGEpKTtcclxuXHJcbiAgICAgIGNvbnN0IHRlc3RWYWx1ZVNjcmlwdCA9IG5ldyBBc3NldHMoW1thc3NldENsYXNzLCBCaWdJbnQoMTI1NTUwKV1dKTtcclxuXHJcbiAgICAgIC8vIEdldCB3YWxsZXQgVVRYT3NcclxuICAgICAgY29uc3QgdXR4b3MgPSBhd2FpdCB3YWxsZXRIZWxwZXIucGlja1V0eG9zKG5ldyBWYWx1ZSh1bmRlZmluZWQsIHRlc3RWYWx1ZVNjcmlwdCkpO1xyXG4gICAgICBjb25zb2xlLmxvZyh1dHhvcyk7XHJcblxyXG4gICAgICAvLyBHZXQgY2hhbmdlIGFkZHJlc3NcclxuICAgICAgY29uc3QgYmVuZWZpdGlhcnkgPSBhd2FpdCB3YWxsZXRIZWxwZXIuY2hhbmdlQWRkcmVzcztcclxuICAgICAgLy8gTG9hZCBpbiB0aGUgdmVzdGluZyB2YWxpZGF0b3Igc2NyaXB0IChwcm9ncmFtKVxyXG5cclxuICAgICAgY29uc3QgZ2FtZVJld2FyZCA9IG5ldyBHYW1lUmV3YXJkKCk7XHJcblxyXG4gICAgICAvLyBDb21waWxlIHRoZSB2ZXN0aW5nIHZhbGlkYXRvclxyXG4gICAgICBjb25zdCBjb21waWxlZFByb2dyYW0gPSBnYW1lUmV3YXJkLmNvbXBpbGUob3B0aW1pemUpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIldhbGxldCBhZGRyZXNzOiBcIiArIGJlbmVmaXRpYXJ5KVxyXG4gICAgICBjb25zdCBzY3JpcHRBZGRyZXNzID0gQWRkcmVzcy5mcm9tSGFzaGVzKGNvbXBpbGVkUHJvZ3JhbS52YWxpZGF0b3JIYXNoKVxyXG4gICAgXHJcbiAgICAgICAgLy9yZW1vdmVcclxuICAgICAgY29uc29sZS5sb2coc2NyaXB0QWRkcmVzcy50b0JlY2gzMigpKTtcclxuICAgICAgY29uc29sZS5sb2coXCJTY3JpcHQgQWRkcmVzczpcIiArIHNjcmlwdEFkZHJlc3MpXHJcbiAgICAgIFxyXG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIHZlc3RpbmcgZGF0dW1cclxuICAgICAgY29uc3QgZ2FtZURhdHVtID0gbmV3IGdhbWVSZXdhcmQudHlwZXMuRGF0dW0oXHJcbiAgICAgICAgYmVuZWZpdGlhcnkucHViS2V5SGFzaCxcclxuICAgICAgKVxyXG4gICAgXHJcbiAgICAvL2NvbnN0IHJlZGVlbWJlciA9IChuZXcgZ2FtZVJld2FyZC50eXBlcy5SZWRlZW1lci5DbGFpbSgpKS5fdG9VcGxjRGF0YSgpO1xyXG4gICAgXHJcbiAgICAgIGNvbnN0IHR4ID0gbmV3IFR4KCk7XHJcbiAgICAgIHR4LmFkZElucHV0cyh1dHhvc1swXSk7XHJcbiAgICAgIHR4LmFkZE91dHB1dChuZXcgVHhPdXRwdXQoXHJcbiAgICAgICAgc2NyaXB0QWRkcmVzcyxcclxuICAgICAgICBuZXcgVmFsdWUodW5kZWZpbmVkLCB0ZXN0VmFsdWVTY3JpcHQpLFxyXG4gICAgICAgIERhdHVtLmlubGluZShnYW1lRGF0dW0pXHJcbiAgICAgICkpO1xyXG5cclxuICAgICAgLy8gdHguYWRkT3V0cHV0KG5ldyBUeE91dHB1dChcclxuICAgICAgLy8gICBiZW5lZml0aWFyeSxcclxuICAgICAgLy8gICBtaW5BZGFWYWwsXHJcbiAgICAgIC8vICkpO1xyXG4gICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2UgYXR0YXRjaGVkIGV2ZXJ5dGhpbmchXCIpXHJcblxyXG4gICAgICAvLyBSZWFkIGluIHRoZSBuZXR3b3JrIHBhcmFtZXRlciBmaWxlXHJcbiAgICAgIGNvbnN0IG5ldHdvcmtQYXJhbXNKc29uID0gYXdhaXQgZ2V0TmV0d29ya1BhcmFtcyhuZXR3b3JrKTtcclxuICAgICAgY29uc3QgbmV0d29ya1BhcmFtcyA9IG5ldyBOZXR3b3JrUGFyYW1zKG5ldHdvcmtQYXJhbXNKc29uKTtcclxuXHJcbiAgICAgIC8vIFNlbmQgYW55IGNoYW5nZSBiYWNrIHRvIHRoZSBidXllclxyXG4gICAgICBhd2FpdCB0eC5maW5hbGl6ZShuZXR3b3JrUGFyYW1zLCBiZW5lZml0aWFyeSwgdXR4b3NbMV0pO1xyXG5cclxuICAgICAgLy8gU2lnbiB0aGUgdW5zaWduZWQgdHggdG8gZ2V0IHRoZSB3aXRuZXNzXHJcbiAgICAgIGNvbnN0IHNpZ25hdHVyZXMgPSBhd2FpdCBjaXAzMFdhbGxldEFQSS5zaWduVHgodHgpO1xyXG4gICAgICB0eC5hZGRTaWduYXR1cmVzKHNpZ25hdHVyZXMpO1xyXG5cclxuICAgICAgY29uc29sZS5sb2coXCJzaWduZWRcIik7XHJcbiAgICAgIC8vIFN1Ym1pdCB0aGUgc2lnbmVkIHR4XHJcbiAgICAgIGNvbnN0IHR4SGFzaCA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnN1Ym1pdFR4KHR4KTtcclxuXHJcbiAgICAgIHNldFR4KHsgdHhJZDogdHhIYXNoLmhleCB9KTtcclxuICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuXHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgIHRocm93IGNvbnNvbGUuZXJyb3IoXCJzdWJtaXQgdHggZmFpbGVkXCIsIGVycik7XHJcbiAgICB9XHJcbiAgfVxyXG4gICAgXHJcbiAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hVdHhvcyhzY3JpcHRBZGRyZXNzOiBzdHJpbmcpOiBQcm9taXNlPHsgc2VsZWN0ZWQ6IFR4SW5wdXRbXTsgdG90YWxBbW91bnQ6IGJpZ2ludCwgZHluYW1pY1Jld2FyZDogYmlnaW50IH0+IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9hcGkvZ2V0VXR4b3NgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBzY3JpcHRBZGRyZXNzfSksXHJcbiAgICB9KTtcclxuICBcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7IC8vIFJhdyBKU09OIGFycmF5IGZyb20gYmFja2VuZFxyXG4gIFxyXG4gICAgLy8gYENvbnZlcnQgSlNPTiBiYWNrIHRvIFR4SW5wdXQgb2JqZWN0c1xyXG4gICAgY29uc3Qgc2VsZWN0ZWRVdHhvcyA9IGRhdGEuc2VsZWN0ZWQubWFwKCh1dHhvOiBhbnkpID0+IFR4SW5wdXQuZnJvbUZ1bGxDYm9yKHV0eG8pKTtcclxuICAgIGNvbnN0IGR5bmFtaWNSZXdhcmQ6IGJpZ2ludCA9IEJpZ0ludChkYXRhLmR5bmFtaWNSZXdhcmQpO1xyXG4gICAgY29uc3QgdG90YWxBbW91bnQ6IGJpZ2ludCA9IEJpZ0ludChkYXRhLnRvdGFsQW1vdW50KTtcclxuICAgIGNvbnNvbGUubG9nKFwic2VsZWN0ZWRVdHhvc1wiKyBzZWxlY3RlZFV0eG9zKTtcclxuICAgIGNvbnNvbGUubG9nKFwiZHluYW1pY1Jld2FyZFwiICsgZHluYW1pY1Jld2FyZCk7XHJcbiAgICBjb25zb2xlLmxvZyhcInRvdGFsQW1vdW50XCIrIHRvdGFsQW1vdW50KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzZWxlY3RlZDogc2VsZWN0ZWRVdHhvcyxcclxuICAgICAgdG90YWxBbW91bnQ6IHRvdGFsQW1vdW50LFxyXG4gICAgICBkeW5hbWljUmV3YXJkOiBkeW5hbWljUmV3YXJkLFxyXG4gICAgfTtcclxuICB9XHJcbiAgXHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsYWltUmVkZWVtZXIocHViS2V5SGFzaEhleDogc3RyaW5nKTogUmVkZWVtZXIge1xyXG4gICAgLy8gVGhlIFwiQ2xhaW1cIiBjb25zdHJ1Y3RvciBtaWdodCBiZSB0YWc9MSBpZiBpdCdzIHRoZSBzZWNvbmQgaW4gdGhlIGVudW1cclxuICAgIGNvbnN0IHRhZyA9IDE7XHJcbiAgICBjb25zdCBmaWVsZCA9IFtuZXcgQnl0ZUFycmF5RGF0YShoZXhUb0J5dGVzKHB1YktleUhhc2hIZXgpKV07XHJcbiAgICBjb25zdCBjb25zdHIgPSBuZXcgQ29uc3RyRGF0YSh0YWcsIGZpZWxkKTtcclxuICAgIHJldHVybiBuZXcgUmVkZWVtZXIoY29uc3RyKTtcclxuICB9XHJcbiAgXHJcbiAgZnVuY3Rpb24gY3JlYXRlR2FtZURhdHVtKGJlbmVmaXRpYXJ5SGFzaEhleDogc3RyaW5nKTogRGF0dW0ge1xyXG4gICAgLy8gSWYgdGhpcyBzdHJ1Y3QgaGFzIG9ubHkgb25lIGZpZWxkLCB0eXBpY2FsbHkgaXQncyB0YWc9MFxyXG4gICAgY29uc3QgdGFnID0gMDtcclxuICAgIGNvbnN0IGZpZWxkID0gW25ldyBCeXRlQXJyYXlEYXRhKGhleFRvQnl0ZXMoYmVuZWZpdGlhcnlIYXNoSGV4KSldO1xyXG4gICAgY29uc3QgY2QgPSBuZXcgQ29uc3RyRGF0YSh0YWcsIGZpZWxkKTtcclxuICAgIHJldHVybiBEYXR1bS5pbmxpbmUoY2QpO1xyXG4gIH1cclxuIl0sIm5hbWVzIjpbIk5ldHdvcmtQYXJhbXMiLCJWYWx1ZSIsIlR4T3V0cHV0IiwiVHgiLCJUeElucHV0IiwiQ2lwMzBXYWxsZXQiLCJEYXR1bSIsIkFzc2V0cyIsIldhbGxldEhlbHBlciIsIk1pbnRpbmdQb2xpY3lIYXNoIiwiVXBsY1Byb2dyYW0iLCJSZWRlZW1lciIsIkFzc2V0Q2xhc3MiLCJBZGRyZXNzIiwiQ29uc3RyRGF0YSIsIkJ5dGVBcnJheURhdGEiLCJoZXhUb0J5dGVzIiwibmV0d29yayIsImdldE5ldHdvcmtQYXJhbXMiLCJHYW1lUmV3YXJkIiwib3B0aW1pemUiLCJjYWxjdWxhdGVDb3VudGRvd24iLCJUaW1lQmVnaW5Db250cmFjdCIsIlRpbWVOb3ciLCJNYXRoIiwiZmxvb3IiLCJEYXRlIiwibm93IiwiQ1lDTEVfRFVSQVRJT04iLCJvZmZzZXRJbk1zIiwiZWxhcHNlZFRpbWUiLCJlbGFwc2VkVGltZUluU2Vjb25kcyIsInBvc2l0aW9uSW5DeWNsZSIsIkdBTUVfUkVXQVJEX0NCT1JfSlNPTiIsImNsYWltVG9rZW5zIiwid2FsbGV0QVBJIiwic2V0SXNMb2FkaW5nIiwic2V0VHgiLCJFcnJvciIsImJlbmVmaXRpYXJ5IiwiY2lwMzBXYWxsZXRBUEkiLCJ3YWxsZXRIZWxwZXIiLCJuZXR3b3JrUGFyYW1zSnNvbiIsIm5ldHdvcmtQYXJhbXMiLCJwb2xpY3lJZCIsIm5hbWUiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJtcGgiLCJmcm9tSGV4IiwiYXNzZXRDbGFzcyIsInRva2VuTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJ1dHhvcyIsImdldFV0eG9zIiwiY2hhbmdlQWRkcmVzcyIsImNib3JIZXgiLCJ1cGxjUHJvZ3JhbSIsImZyb21DYm9yIiwicHViS2V5SGFzaCIsImhleCIsInNjcmlwdEFkZHJlc3MiLCJmcm9tQmVjaDMyIiwidG9CZWNoMzIiLCJkaXIiLCJkZXB0aCIsImRhdHVtT2JqZWN0IiwiZ2FtZURhdHVtIiwiY3JlYXRlR2FtZURhdHVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImNsYWltUmVkZWVtZXIiLCJjcmVhdGVDbGFpbVJlZGVlbWVyIiwiZGF0YSIsInR4Iiwic29ydGVkVXR4b3MiLCJmZXRjaFV0eG9zIiwiQ0xBSU1fV0lORE9XIiwid2luZG93Iiwib25lcnJvciIsInRlc3RWYWx1ZUJlbmVmaXRpYXJ5IiwiQmlnSW50IiwiZHluYW1pY1Jld2FyZCIsImFtb3VudFRvU2VuZEJhY2siLCJ0b3RhbEFtb3VudCIsImZpcnN0UGFydFRvU2VuZEJhY2siLCJzZWNvbmRQYXJ0VG9TZW5kQmFjayIsInZhbHVlQ29udHJhY3QxIiwidmFsdWVDb250cmFjdDIiLCJhZGRJbnB1dHMiLCJzZWxlY3RlZCIsImF0dGFjaFNjcmlwdCIsInVzZXJDbGFpbU91dHB1dCIsInVuZGVmaW5lZCIsImFkZE91dHB1dCIsInRvdGFsQWRhSW5JbnB1dHMiLCJmb3JFYWNoIiwidXR4byIsIm91dHB1dCIsInZhbHVlIiwibG92ZWxhY2UiLCJhZGFQZXJTY3JpcHRPdXRwdXQiLCJzY3JpcHRVdHhvMSIsImlubGluZSIsInNjcmlwdFV0eG8yIiwiZmluYWxpemUiLCJzaWduYXR1cmVzIiwic2lnblR4IiwiYWRkU2lnbmF0dXJlcyIsInR4SGFzaCIsInN1Ym1pdFR4IiwidHhJZCIsImVyciIsImVycm9yIiwic2VuZCIsIm1pbkFkYSIsIm1pbkFkYVZhbCIsInRlc3RWYWx1ZVNjcmlwdCIsInBpY2tVdHhvcyIsImdhbWVSZXdhcmQiLCJjb21waWxlZFByb2dyYW0iLCJjb21waWxlIiwiZnJvbUhhc2hlcyIsInZhbGlkYXRvckhhc2giLCJ0eXBlcyIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImpzb24iLCJzZWxlY3RlZFV0eG9zIiwibWFwIiwiZnJvbUZ1bGxDYm9yIiwicHViS2V5SGFzaEhleCIsInRhZyIsImZpZWxkIiwiY29uc3RyIiwiYmVuZWZpdGlhcnlIYXNoSGV4IiwiY2QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/walletActions.ts\n"));

/***/ })

});