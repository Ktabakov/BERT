"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/index",{

/***/ "./public/walletActions.ts":
/*!*********************************!*\
  !*** ./public/walletActions.ts ***!
  \*********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateCountdown: () => (/* binding */ calculateCountdown),\n/* harmony export */   claimTokens: () => (/* binding */ claimTokens),\n/* harmony export */   send: () => (/* binding */ send)\n/* harmony export */ });\n/* harmony import */ var _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @hyperionbt/helios */ \"./node_modules/@hyperionbt/helios/helios.js\");\n/* harmony import */ var _common_network__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../common/network */ \"./common/network.ts\");\n/* harmony import */ var _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../contracts/GameReward.hl */ \"./contracts/GameReward.hl\");\n/* harmony import */ var _contracts_GameRewardCbor_json__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../contracts/GameRewardCbor.json */ \"./contracts/GameRewardCbor.json\");\n/* provided dependency */ var Buffer = __webpack_require__(/*! buffer */ \"./node_modules/buffer/index.js\")[\"Buffer\"];\n\n\n // Ensure correct path to your contract\nconst optimize = false;\nfunction calculateCountdown() {\n    const TimeBeginContract = 1736073600000;\n    const TimeNow = Math.floor(Date.now());\n    const CYCLE_DURATION = 600 // 10 minutes \n    ;\n    const offsetInMs = 89680;\n    const elapsedTime = TimeNow - offsetInMs - TimeBeginContract;\n    const elapsedTimeInSeconds = elapsedTime / 1000;\n    const positionInCycle = elapsedTimeInSeconds % CYCLE_DURATION;\n    return positionInCycle;\n}\n // { cborHex: \"4e4d010000...\" }\nasync function claimTokens(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw new Error(\"Wallet API is not set.\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        const policyId = \"a3879594925e2ab170ed0c34204d84765411ad23e43e98771dd5a6d2\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name\n        });\n        console.log(assetClass);\n        const utxos = await walletHelper.getUtxos();\n        console.log(\"utxos\" + utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const cborHex = _contracts_GameRewardCbor_json__WEBPACK_IMPORTED_MODULE_2__.cborHex;\n        const compiledProgram = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Program.new(cborHex);\n        const uplcProgram = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NativeScript(cborHex);\n        console.log(\"compiledProgram\" + compiledProgram);\n        //const gameReward = new GameReward();\n        // Compile the vesting validator\n        //const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromBech32(\"addr1w98mjg5u7zq0puw33v3xd2y6q5s24xvu3lnhcc7z6lncn6s70fwnm\");\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        console.dir(scriptAddress, {\n            depth: null\n        });\n        const datumObject = {\n            benefitiary: benefitiary.pubKeyHash\n        };\n        const gameDatum = createGameDatum(benefitiary.pubKeyHash.hex);\n        console.log(\"gameDatum\" + gameDatum);\n        // const gameDatum = new gameReward.types.Datum(\n        //   benefitiary.pubKeyHash,\n        // )\n        // Create the vesting claim redeemer\n        //  const redeember = (new gameReward.types.Redeemer.Claim(benefitiary.pubKeyHash))\n        //  ._toUplcData();\n        const claimRedeemer = createClaimRedeemer(benefitiary.pubKeyHash.hex);\n        console.log(\"claimRedeemerData\" + claimRedeemer.data);\n        console.log(\"claimRedeemer\" + claimRedeemer);\n        //console.log(filteredUtxos);\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        const sortedUtxos = await fetchUtxos(scriptAddress.toBech32());\n        const CLAIM_WINDOW = 20; // 20 seconds \n        const positionInCycle = calculateCountdown();\n        console.log(\"positionInCycle\" + positionInCycle);\n        window.onerror = ()=>positionInCycle < CLAIM_WINDOW;\n        //const dynamicReward = calculateReward(Number(remainingSupply), TOTAL_SUPPLY, BASE_REWARD);\n        const testValueBenefitiary = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(sortedUtxos.dynamicReward)\n            ]\n        ]);\n        //const totalAmountUtxo = getTokenAmountFromUtxos(sortedUtxos.selected, assetClass);\n        const amountToSendBack = BigInt(sortedUtxos.totalAmount) - BigInt(sortedUtxos.dynamicReward);\n        const firstPartToSendBack = amountToSendBack / 2n; // First part is half of the total amount\n        const secondPartToSendBack = amountToSendBack - firstPartToSendBack; // Second part is the remainder\n        console.log(\"First \" + firstPartToSendBack);\n        console.log(\"Sevond \" + secondPartToSendBack);\n        console.log(sortedUtxos.dynamicReward);\n        const valueContract1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                firstPartToSendBack\n            ]\n        ]);\n        const valueContract2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                secondPartToSendBack\n            ]\n        ]);\n        //tx.addInputs(utxos[0]);\n        tx.addInputs(sortedUtxos.selected, claimRedeemer.data);\n        tx.attachScript(compiledProgram);\n        var userClaimOutput = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(benefitiary, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueBenefitiary));\n        tx.addOutput(userClaimOutput);\n        //Shiiit, fix. Someone could rediredt the rest of the tokens\n        // const addressStr = \"addr_test1qrarqhmklnhwcw3q0zm6sgm3g3l7pua0y36sql9k5ru8dsucglsked5f5yrcf9e9xgxjgmt7xk52knh8h0dgayc00arqlh7g60\";\n        // const address = Address.fromBech32(addressStr);\n        // tx.addOutput(new TxOutput(\n        //   address,\n        //   new Value(undefined, testValueContract) // The amount being claimed\n        // ));\n        // Calculate total ADA in the selected script inputs\n        let totalAdaInInputs = BigInt(0);\n        sortedUtxos.selected.forEach((utxo)=>{\n            totalAdaInInputs += BigInt(utxo.output.value.lovelace);\n        });\n        // Distribute ADA equally (or as required) among script outputs\n        const adaPerScriptOutput = totalAdaInInputs / 2n; // Assuming two script outputs\n        if (amountToSendBack != BigInt(0)) {\n            var scriptUtxo1 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(adaPerScriptOutput, valueContract1), gameDatum // Contract requires datum\n            );\n            tx.addOutput(scriptUtxo1);\n            var scriptUtxo2 = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(totalAdaInInputs - adaPerScriptOutput, valueContract2), gameDatum // Contract requires datum\n            );\n            tx.addOutput(scriptUtxo2);\n        }\n        //var inputFees = await walletHelper.pickUtxos(new Value(tokenAmountFees));\n        //tx.addInputs(inputFees[0]);\n        console.log(\"We attatched everything!\");\n        await tx.finalize(networkParams, benefitiary, utxos);\n        console.log(\"dali finalizirahme?\");\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"Dali q signirahme?\");\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        console.error(\"submit tx failed\", err);\n        throw err;\n    }\n}\nasync function send(walletAPI, setIsLoading, setTx) {\n    setIsLoading(true);\n    if (!walletAPI) {\n        throw console.error(\"walletAPI is not set\");\n    }\n    try {\n        const cip30WalletAPI = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Cip30Wallet(walletAPI);\n        // const blockfrost = new BlockFrostIPFS({\n        //   network: network,\n        //   projectId: \"preprodJExO0MAMRgfpXz9Il4IqB2u9ddoylZBT\",\n        // });\n        console.log(\"gmmm\");\n        const walletHelper = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.WalletHelper(cip30WalletAPI);\n        const policyId = \"a3879594925e2ab170ed0c34204d84765411ad23e43e98771dd5a6d2\";\n        const name = Buffer.from(\"BERT\", 'utf8').toString('hex');\n        const mph = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.MintingPolicyHash.fromHex(policyId);\n        const assetClass = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.AssetClass({\n            mph: mph,\n            tokenName: name // Convert to hex string\n        });\n        console.log(assetClass);\n        const minAda = 1000000; // minimum lovelace to send\n        const minAdaVal = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(BigInt(minAda));\n        const testValueScript = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Assets([\n            [\n                assetClass,\n                BigInt(125550)\n            ]\n        ]);\n        // Get wallet UTXOs\n        const utxos = await walletHelper.pickUtxos(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript));\n        console.log(utxos);\n        // Get change address\n        const benefitiary = await walletHelper.changeAddress;\n        // Load in the vesting validator script (program)\n        const gameReward = new _contracts_GameReward_hl__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        // Compile the vesting validator\n        const compiledProgram = gameReward.compile(optimize);\n        console.log(\"Wallet address: \" + benefitiary);\n        const scriptAddress = _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Address.fromHashes(compiledProgram.validatorHash);\n        //remove\n        console.log(scriptAddress.toBech32());\n        console.log(\"Script Address:\" + scriptAddress);\n        // Construct the vesting datum\n        const gameDatum = new gameReward.types.Datum(benefitiary.pubKeyHash);\n        //const redeember = (new gameReward.types.Redeemer.Claim())._toUplcData();\n        const tx = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Tx();\n        tx.addInputs(utxos[0]);\n        tx.addOutput(new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxOutput(scriptAddress, new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Value(undefined, testValueScript), _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(gameDatum)));\n        // tx.addOutput(new TxOutput(\n        //   benefitiary,\n        //   minAdaVal,\n        // ));\n        console.log(\"We attatched everything!\");\n        // Read in the network parameter file\n        const networkParamsJson = await (0,_common_network__WEBPACK_IMPORTED_MODULE_0__.getNetworkParams)(_common_network__WEBPACK_IMPORTED_MODULE_0__.network);\n        const networkParams = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.NetworkParams(networkParamsJson);\n        // Send any change back to the buyer\n        await tx.finalize(networkParams, benefitiary, utxos[1]);\n        // Sign the unsigned tx to get the witness\n        const signatures = await cip30WalletAPI.signTx(tx);\n        tx.addSignatures(signatures);\n        console.log(\"signed\");\n        // Submit the signed tx\n        const txHash = await cip30WalletAPI.submitTx(tx);\n        setTx({\n            txId: txHash.hex\n        });\n        setIsLoading(false);\n    } catch (err) {\n        setIsLoading(false);\n        throw console.error(\"submit tx failed\", err);\n    }\n}\nasync function fetchUtxos(scriptAddress) {\n    const response = await fetch(\"/api/getUtxos\", {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            scriptAddress\n        })\n    });\n    const data = await response.json(); // Raw JSON array from backend\n    // `Convert JSON back to TxInput objects\n    const selectedUtxos = data.selected.map((utxo)=>_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.TxInput.fromFullCbor(utxo));\n    const dynamicReward = BigInt(data.dynamicReward);\n    const totalAmount = BigInt(data.totalAmount);\n    console.log(\"selectedUtxos\" + selectedUtxos);\n    console.log(\"dynamicReward\" + dynamicReward);\n    console.log(\"totalAmount\" + totalAmount);\n    return {\n        selected: selectedUtxos,\n        totalAmount: totalAmount,\n        dynamicReward: dynamicReward\n    };\n}\nfunction createClaimRedeemer(pubKeyHashHex) {\n    // The \"Claim\" constructor might be tag=1 if it's the second in the enum\n    const tag = 1;\n    const field = [\n        new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(pubKeyHashHex))\n    ];\n    const constr = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(tag, field);\n    return new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Redeemer(constr);\n}\nfunction createGameDatum(benefitiaryHashHex) {\n    // If this struct has only one field, typically it's tag=0\n    const tag = 0;\n    const field = [\n        new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ByteArrayData((0,_hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.hexToBytes)(benefitiaryHashHex))\n    ];\n    const cd = new _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.ConstrData(tag, field);\n    return _hyperionbt_helios__WEBPACK_IMPORTED_MODULE_3__.Datum.inline(cd);\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNQyxLQUFLLElBQUloSSwwREFBVUEsQ0FBQzRILEtBQUtDO0lBQy9CLE9BQU9ySSxxREFBS0EsQ0FBQ3VILE1BQU0sQ0FBQ2lCO0FBQ3RCIiwic291cmNlcyI6WyJEOlxcVWx0aW1hdGUtQ2FyZGFuby1TbWFydC1Db250cmFjdHNcXEZsYXBweUJpcmRHYW1lXFxoZWxpb3NcXEdhbWVSZXdhcmRcXHB1YmxpY1xcd2FsbGV0QWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBcclxuICAgIE5ldHdvcmtQYXJhbXMsXHJcbiAgICBWYWx1ZSxcclxuICAgIFR4T3V0cHV0LFxyXG4gICAgVHgsXHJcbiAgICBUeElucHV0LFxyXG4gICAgQ2lwMzBXYWxsZXQsXHJcbiAgICBEYXR1bSxcclxuICAgIEFzc2V0cyxcclxuICAgIFdhbGxldEhlbHBlcixcclxuICAgIE1pbnRpbmdQb2xpY3lIYXNoLFxyXG4gICAgUHJvZ3JhbSxcclxuICAgIFJlZGVlbWVyLFxyXG4gICAgQXNzZXRDbGFzcyxcclxuICAgIFB1YktleUhhc2gsXHJcbiAgICBBZGRyZXNzLFxyXG4gICAgQ29uc3RyRGF0YSxcclxuICAgIE5hdGl2ZVNjcmlwdCxcclxuICAgIEJ5dGVBcnJheURhdGEsXHJcbiAgICBoZXhUb0J5dGVzLFxyXG4gIH0gZnJvbSBcIkBoeXBlcmlvbmJ0L2hlbGlvc1wiO1xyXG4gIGltcG9ydCB7IG5ldHdvcmssIGdldE5ldHdvcmtQYXJhbXMgfSBmcm9tICcuLi9jb21tb24vbmV0d29yayc7XHJcbiAgaW1wb3J0IEdhbWVSZXdhcmQgZnJvbSAnLi4vY29udHJhY3RzL0dhbWVSZXdhcmQuaGwnOyAvLyBFbnN1cmUgY29ycmVjdCBwYXRoIHRvIHlvdXIgY29udHJhY3RcclxuICBcclxuICBjb25zdCBvcHRpbWl6ZSA9IGZhbHNlO1xyXG4gIFxyXG4gIGV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVDb3VudGRvd24oKTogbnVtYmVyIHtcclxuICBcclxuICAgIGNvbnN0IFRpbWVCZWdpbkNvbnRyYWN0ID0gMTczNjA3MzYwMDAwMDtcclxuXHJcbiAgICBjb25zdCBUaW1lTm93OiBudW1iZXIgPSBNYXRoLmZsb29yKERhdGUubm93KCkpOyBcclxuICAgIGNvbnN0IENZQ0xFX0RVUkFUSU9OID0gNjAwIC8vIDEwIG1pbnV0ZXMgXHJcbiAgICBjb25zdCBvZmZzZXRJbk1zID0gODk2ODA7XHJcbiAgICBjb25zdCBlbGFwc2VkVGltZSA9IFRpbWVOb3cgLSAob2Zmc2V0SW5NcykgLSBUaW1lQmVnaW5Db250cmFjdDtcclxuICAgIGNvbnN0IGVsYXBzZWRUaW1lSW5TZWNvbmRzID0gZWxhcHNlZFRpbWUgLyAxMDAwO1xyXG4gICAgY29uc3QgcG9zaXRpb25JbkN5Y2xlID0gZWxhcHNlZFRpbWVJblNlY29uZHMgJSBDWUNMRV9EVVJBVElPTjtcclxuICBcclxuICAgIHJldHVybiBwb3NpdGlvbkluQ3ljbGU7XHJcbiAgfSBcclxuICBcclxuICAvLyBUaGUgSGVsaW9zIGNvbnRyYWN0IHNheXM6IHN0cnVjdCBEYXR1bSB7IGJlbmVmaXRpYXJ5OiBQdWJLZXlIYXNoIH1cclxuICBleHBvcnQgaW50ZXJmYWNlIEdhbWVEYXR1bSB7XHJcbiAgICBiZW5lZml0aWFyeTogUHViS2V5SGFzaDsgLy8gVGhlIHB1YktleUhhc2ggYXMgYSBoZXggc3RyaW5nXHJcbiAgfVxyXG5cclxuICAvLyBUaGUgSGVsaW9zIGNvbnRyYWN0IHNheXM6IGVudW0gUmVkZWVtZXIgeyBDYW5jZWwsIENsYWltIHsgcmVjZXBpYW50OiBQdWJLZXlIYXNoIH0gfVxyXG4gIGV4cG9ydCBpbnRlcmZhY2UgR2FtZVJlZGVlbWVyQ2xhaW0ge1xyXG4gICAgX190YWc6IFwiQ2xhaW1cIjtcclxuICAgIHJlY2VwaWFudDogc3RyaW5nOyAvLyBUaGUgc2FtZSBwdWJLZXlIYXNoIGluIGhleFxyXG4gIH1cclxuICBpbXBvcnQgR0FNRV9SRVdBUkRfQ0JPUl9KU09OIGZyb20gJy4uL2NvbnRyYWN0cy9HYW1lUmV3YXJkQ2Jvci5qc29uJzsgLy8geyBjYm9ySGV4OiBcIjRlNGQwMTAwMDAuLi5cIiB9XHJcblxyXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbGFpbVRva2Vucyh3YWxsZXRBUEk6IGFueSwgc2V0SXNMb2FkaW5nOiAodmFsOiBib29sZWFuKSA9PiB2b2lkLCBzZXRUeDogKHZhbDoge3R4SWQ6IHN0cmluZ30pID0+IHZvaWQpIHtcclxuICAgIHNldElzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICBpZiAoIXdhbGxldEFQSSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIldhbGxldCBBUEkgaXMgbm90IHNldC5cIik7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjaXAzMFdhbGxldEFQSSA9IG5ldyBDaXAzMFdhbGxldCh3YWxsZXRBUEkpO1xyXG5cclxuICAgICAgY29uc3Qgd2FsbGV0SGVscGVyID0gbmV3IFdhbGxldEhlbHBlcihjaXAzMFdhbGxldEFQSSk7XHJcbiAgICAgIC8vIFJlYWQgaW4gdGhlIG5ldHdvcmsgcGFyYW1ldGVyIGZpbGVcclxuICAgICAgY29uc3QgbmV0d29ya1BhcmFtc0pzb24gPSBhd2FpdCBnZXROZXR3b3JrUGFyYW1zKG5ldHdvcmspO1xyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zID0gbmV3IE5ldHdvcmtQYXJhbXMobmV0d29ya1BhcmFtc0pzb24pO1xyXG5cclxuICAgICAgY29uc3QgcG9saWN5SWQgPSBcImEzODc5NTk0OTI1ZTJhYjE3MGVkMGMzNDIwNGQ4NDc2NTQxMWFkMjNlNDNlOTg3NzFkZDVhNmQyXCI7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBCdWZmZXIuZnJvbShcIkJFUlRcIiwgJ3V0ZjgnKS50b1N0cmluZygnaGV4Jyk7XHJcblxyXG4gICAgICBjb25zdCBtcGggPSBNaW50aW5nUG9saWN5SGFzaC5mcm9tSGV4KHBvbGljeUlkKTtcclxuXHJcbiAgICAgIGNvbnN0IGFzc2V0Q2xhc3MgPSBuZXcgQXNzZXRDbGFzcyh7XHJcbiAgICAgICAgbXBoOiBtcGgsIFxyXG4gICAgICAgIHRva2VuTmFtZTogbmFtZVxyXG4gICAgICB9KTsgXHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGFzc2V0Q2xhc3MpXHJcblxyXG4gICAgICBjb25zdCB1dHhvcyA9IGF3YWl0IHdhbGxldEhlbHBlci5nZXRVdHhvcygpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInV0eG9zXCIgKyB1dHhvcyk7XHJcblxyXG4gICAgICAvLyBHZXQgY2hhbmdlIGFkZHJlc3NcclxuICAgICAgY29uc3QgYmVuZWZpdGlhcnkgPSBhd2FpdCB3YWxsZXRIZWxwZXIuY2hhbmdlQWRkcmVzcztcclxuICAgICAgLy8gTG9hZCBpbiB0aGUgdmVzdGluZyB2YWxpZGF0b3Igc2NyaXB0IChwcm9ncmFtKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgY2JvckhleCA9IEdBTUVfUkVXQVJEX0NCT1JfSlNPTi5jYm9ySGV4OyBcclxuICAgICAgY29uc3QgY29tcGlsZWRQcm9ncmFtID0gUHJvZ3JhbS5uZXcoY2JvckhleCk7IFxyXG4gICAgICBjb25zdCB1cGxjUHJvZ3JhbSA9IG5ldyBOYXRpdmVTY3JpcHQoY2JvckhleCBhcyBOdW1iZXIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNvbXBpbGVkUHJvZ3JhbVwiICsgY29tcGlsZWRQcm9ncmFtKTtcclxuICAgICAgXHJcbiAgICAgIC8vY29uc3QgZ2FtZVJld2FyZCA9IG5ldyBHYW1lUmV3YXJkKCk7XHJcblxyXG4gICAgICAvLyBDb21waWxlIHRoZSB2ZXN0aW5nIHZhbGlkYXRvclxyXG4gICAgICAvL2NvbnN0IGNvbXBpbGVkUHJvZ3JhbSA9IGdhbWVSZXdhcmQuY29tcGlsZShvcHRpbWl6ZSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2FsbGV0IGFkZHJlc3M6IFwiICsgYmVuZWZpdGlhcnkpXHJcbiAgICAgIGNvbnN0IHNjcmlwdEFkZHJlc3MgPSBBZGRyZXNzLmZyb21CZWNoMzIoXCJhZGRyMXc5OG1qZzV1N3pxMHB1dzMzdjN4ZDJ5NnE1czI0eHZ1M2xuaGNjN3o2bG5jbjZzNzBmd25tXCIpXHJcbiAgICBcclxuICAgICAgY29uc29sZS5sb2coc2NyaXB0QWRkcmVzcy50b0JlY2gzMigpKTtcclxuICAgICAgY29uc29sZS5sb2coXCJTY3JpcHQgQWRkcmVzczpcIiArIHNjcmlwdEFkZHJlc3MpXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmRpcihzY3JpcHRBZGRyZXNzLCB7IGRlcHRoOiBudWxsIH0pO1xyXG5cclxuICAgICAgY29uc3QgZGF0dW1PYmplY3Q6IEdhbWVEYXR1bSA9IHtcclxuICAgICAgICBiZW5lZml0aWFyeTogYmVuZWZpdGlhcnkucHViS2V5SGFzaCFcclxuICAgICAgfTtcclxuXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IGNyZWF0ZUdhbWVEYXR1bShiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImdhbWVEYXR1bVwiICsgZ2FtZURhdHVtKVxyXG5cclxuICAgICAgLy8gY29uc3QgZ2FtZURhdHVtID0gbmV3IGdhbWVSZXdhcmQudHlwZXMuRGF0dW0oXHJcbiAgICAgIC8vICAgYmVuZWZpdGlhcnkucHViS2V5SGFzaCxcclxuICAgICAgLy8gKVxyXG5cclxuICAgICAgIC8vIENyZWF0ZSB0aGUgdmVzdGluZyBjbGFpbSByZWRlZW1lclxyXG4gICAgICAvLyAgY29uc3QgcmVkZWVtYmVyID0gKG5ldyBnYW1lUmV3YXJkLnR5cGVzLlJlZGVlbWVyLkNsYWltKGJlbmVmaXRpYXJ5LnB1YktleUhhc2gpKVxyXG4gICAgICAvLyAgLl90b1VwbGNEYXRhKCk7XHJcblxyXG4gICAgICBjb25zdCBjbGFpbVJlZGVlbWVyID0gY3JlYXRlQ2xhaW1SZWRlZW1lcihiZW5lZml0aWFyeS5wdWJLZXlIYXNoIS5oZXgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNsYWltUmVkZWVtZXJEYXRhXCIgKyBjbGFpbVJlZGVlbWVyLmRhdGEpXHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xhaW1SZWRlZW1lclwiICsgY2xhaW1SZWRlZW1lcilcclxuICAgICAgLy9jb25zb2xlLmxvZyhmaWx0ZXJlZFV0eG9zKTtcclxuICAgICAgY29uc3QgdHggPSBuZXcgVHgoKTtcclxuXHJcbiAgICAgIGNvbnN0IHNvcnRlZFV0eG9zID0gYXdhaXQgZmV0Y2hVdHhvcyhzY3JpcHRBZGRyZXNzLnRvQmVjaDMyKCkpXHJcblxyXG4gICAgICBjb25zdCBDTEFJTV9XSU5ET1cgPSAyMDsgLy8gMjAgc2Vjb25kcyBcclxuXHJcbiAgICAgIGNvbnN0IHBvc2l0aW9uSW5DeWNsZSA9IGNhbGN1bGF0ZUNvdW50ZG93bigpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcInBvc2l0aW9uSW5DeWNsZVwiICsgcG9zaXRpb25JbkN5Y2xlKTtcclxuICAgICAgd2luZG93Lm9uZXJyb3IgPSAoKSA9PiBwb3NpdGlvbkluQ3ljbGUgPCBDTEFJTV9XSU5ET1c7XHJcbiAgICAgIC8vY29uc3QgZHluYW1pY1Jld2FyZCA9IGNhbGN1bGF0ZVJld2FyZChOdW1iZXIocmVtYWluaW5nU3VwcGx5KSwgVE9UQUxfU1VQUExZLCBCQVNFX1JFV0FSRCk7XHJcbiAgICAgIGNvbnN0IHRlc3RWYWx1ZUJlbmVmaXRpYXJ5PSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgQmlnSW50KHNvcnRlZFV0eG9zLmR5bmFtaWNSZXdhcmQpXV0pO1xyXG4gICAgICBcclxuICAgICAgLy9jb25zdCB0b3RhbEFtb3VudFV0eG8gPSBnZXRUb2tlbkFtb3VudEZyb21VdHhvcyhzb3J0ZWRVdHhvcy5zZWxlY3RlZCwgYXNzZXRDbGFzcyk7XHJcbiAgICAgIGNvbnN0IGFtb3VudFRvU2VuZEJhY2sgPSBCaWdJbnQoc29ydGVkVXR4b3MudG90YWxBbW91bnQpIC0gQmlnSW50KHNvcnRlZFV0eG9zLmR5bmFtaWNSZXdhcmQpO1xyXG5cclxuICAgICAgY29uc3QgZmlyc3RQYXJ0VG9TZW5kQmFjayA9IGFtb3VudFRvU2VuZEJhY2sgLyAybjsgLy8gRmlyc3QgcGFydCBpcyBoYWxmIG9mIHRoZSB0b3RhbCBhbW91bnRcclxuICAgICAgY29uc3Qgc2Vjb25kUGFydFRvU2VuZEJhY2sgPSBhbW91bnRUb1NlbmRCYWNrIC0gZmlyc3RQYXJ0VG9TZW5kQmFjazsgLy8gU2Vjb25kIHBhcnQgaXMgdGhlIHJlbWFpbmRlclxyXG4gICAgICBjb25zb2xlLmxvZyhcIkZpcnN0IFwiICsgZmlyc3RQYXJ0VG9TZW5kQmFjaylcclxuICAgICAgY29uc29sZS5sb2coXCJTZXZvbmQgXCIgKyBzZWNvbmRQYXJ0VG9TZW5kQmFjaylcclxuICAgICAgY29uc29sZS5sb2coc29ydGVkVXR4b3MuZHluYW1pY1Jld2FyZClcclxuXHJcbiAgICAgIGNvbnN0IHZhbHVlQ29udHJhY3QxPSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgZmlyc3RQYXJ0VG9TZW5kQmFja11dKTtcclxuICAgICAgY29uc3QgdmFsdWVDb250cmFjdDI9IG5ldyBBc3NldHMoW1thc3NldENsYXNzLCBzZWNvbmRQYXJ0VG9TZW5kQmFja11dKTtcclxuXHJcbiAgICAgIC8vdHguYWRkSW5wdXRzKHV0eG9zWzBdKTtcclxuICAgICAgdHguYWRkSW5wdXRzKHNvcnRlZFV0eG9zLnNlbGVjdGVkLCBjbGFpbVJlZGVlbWVyLmRhdGEpO1xyXG4gICAgICB0eC5hdHRhY2hTY3JpcHQoY29tcGlsZWRQcm9ncmFtKTtcclxuXHJcbiAgICAgIHZhciB1c2VyQ2xhaW1PdXRwdXQgPSBuZXcgVHhPdXRwdXQoXHJcbiAgICAgICAgYmVuZWZpdGlhcnksXHJcbiAgICAgICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlQmVuZWZpdGlhcnkpKTtcclxuXHJcbiAgICAgIHR4LmFkZE91dHB1dCh1c2VyQ2xhaW1PdXRwdXQpO1xyXG5cclxuICAgIFxyXG4gICAgLy9TaGlpaXQsIGZpeC4gU29tZW9uZSBjb3VsZCByZWRpcmVkdCB0aGUgcmVzdCBvZiB0aGUgdG9rZW5zXHJcbiAgICAvLyBjb25zdCBhZGRyZXNzU3RyID0gXCJhZGRyX3Rlc3QxcXJhcnFobWtsbmh3Y3czcTB6bTZzZ20zZzNsN3B1YTB5MzZzcWw5azVydThkc3VjZ2xza2VkNWY1eXJjZjllOXhneGpnbXQ3eGs1MmtuaDhoMGRnYXljMDBhcnFsaDdnNjBcIjtcclxuICAgIC8vIGNvbnN0IGFkZHJlc3MgPSBBZGRyZXNzLmZyb21CZWNoMzIoYWRkcmVzc1N0cik7XHJcbiAgICAvLyB0eC5hZGRPdXRwdXQobmV3IFR4T3V0cHV0KFxyXG4gICAgLy8gICBhZGRyZXNzLFxyXG4gICAgLy8gICBuZXcgVmFsdWUodW5kZWZpbmVkLCB0ZXN0VmFsdWVDb250cmFjdCkgLy8gVGhlIGFtb3VudCBiZWluZyBjbGFpbWVkXHJcbiAgICAvLyApKTtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIEFEQSBpbiB0aGUgc2VsZWN0ZWQgc2NyaXB0IGlucHV0c1xyXG4gICAgbGV0IHRvdGFsQWRhSW5JbnB1dHMgPSBCaWdJbnQoMCk7XHJcbiAgICBzb3J0ZWRVdHhvcy5zZWxlY3RlZC5mb3JFYWNoKHV0eG8gPT4ge1xyXG4gICAgICAgIHRvdGFsQWRhSW5JbnB1dHMgKz0gQmlnSW50KHV0eG8ub3V0cHV0LnZhbHVlLmxvdmVsYWNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIERpc3RyaWJ1dGUgQURBIGVxdWFsbHkgKG9yIGFzIHJlcXVpcmVkKSBhbW9uZyBzY3JpcHQgb3V0cHV0c1xyXG4gICAgY29uc3QgYWRhUGVyU2NyaXB0T3V0cHV0ID0gdG90YWxBZGFJbklucHV0cyAvIDJuOyAvLyBBc3N1bWluZyB0d28gc2NyaXB0IG91dHB1dHNcclxuXHJcbiAgICBpZiAoYW1vdW50VG9TZW5kQmFjayAhPSBCaWdJbnQoMCkpe1xyXG4gICAgICB2YXIgc2NyaXB0VXR4bzEgPW5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZShhZGFQZXJTY3JpcHRPdXRwdXQsIHZhbHVlQ29udHJhY3QxKSwgIC8vIFJlbWFpbmluZyB0cmVhc3VyeSB0b2tlbnNcclxuICAgICAgICBnYW1lRGF0dW0gLy8gQ29udHJhY3QgcmVxdWlyZXMgZGF0dW1cclxuICAgICAgICk7XHJcblxyXG4gICAgICAgdHguYWRkT3V0cHV0KHNjcmlwdFV0eG8xKTtcclxuXHJcbiAgICAgIHZhciBzY3JpcHRVdHhvMiA9IG5ldyBUeE91dHB1dChcclxuICAgICAgICBzY3JpcHRBZGRyZXNzLFxyXG4gICAgICAgIG5ldyBWYWx1ZSh0b3RhbEFkYUluSW5wdXRzIC0gYWRhUGVyU2NyaXB0T3V0cHV0LCB2YWx1ZUNvbnRyYWN0MiksICAvLyBSZW1haW5pbmcgdHJlYXN1cnkgdG9rZW5zXHJcbiAgICAgICAgZ2FtZURhdHVtIC8vIENvbnRyYWN0IHJlcXVpcmVzIGRhdHVtXHJcbiAgICAgICApO1xyXG4gICAgXHJcbiAgICAgICB0eC5hZGRPdXRwdXQoc2NyaXB0VXR4bzIpO1xyXG4gICAgfSAgXHJcblxyXG4gICAgICAvL3ZhciBpbnB1dEZlZXMgPSBhd2FpdCB3YWxsZXRIZWxwZXIucGlja1V0eG9zKG5ldyBWYWx1ZSh0b2tlbkFtb3VudEZlZXMpKTtcclxuICAgICAgXHJcbiAgICAgIC8vdHguYWRkSW5wdXRzKGlucHV0RmVlc1swXSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiV2UgYXR0YXRjaGVkIGV2ZXJ5dGhpbmchXCIpXHJcblxyXG4gICAgICBcclxuXHJcbiAgICAgIGF3YWl0IHR4LmZpbmFsaXplKG5ldHdvcmtQYXJhbXMsIGJlbmVmaXRpYXJ5LCB1dHhvcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiZGFsaSBmaW5hbGl6aXJhaG1lP1wiKVxyXG4gICAgICAvLyBTaWduIHRoZSB1bnNpZ25lZCB0eCB0byBnZXQgdGhlIHdpdG5lc3NcclxuICAgICAgY29uc3Qgc2lnbmF0dXJlcyA9IGF3YWl0IGNpcDMwV2FsbGV0QVBJLnNpZ25UeCh0eCk7XHJcbiAgICAgIHR4LmFkZFNpZ25hdHVyZXMoc2lnbmF0dXJlcyk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRGFsaSBxIHNpZ25pcmFobWU/XCIpXHJcblxyXG4gICAgICBjb25zdCB0eEhhc2ggPSBhd2FpdCBjaXAzMFdhbGxldEFQSS5zdWJtaXRUeCh0eCk7XHJcblxyXG4gICAgICBzZXRUeCh7IHR4SWQ6IHR4SGFzaC5oZXggfSk7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwic3VibWl0IHR4IGZhaWxlZFwiLCBlcnIpO1xyXG4gICAgICAgIHRocm93IGVycjsgXHJcbiAgICB9XHJcbiAgfVxyXG4gIFxyXG4gIGV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kKHdhbGxldEFQSTogYW55LCBzZXRJc0xvYWRpbmc6ICh2YWw6IGJvb2xlYW4pID0+IHZvaWQsIHNldFR4OiAodmFsOiB7dHhJZDogc3RyaW5nfSkgPT4gdm9pZCkge1xyXG4gICAgc2V0SXNMb2FkaW5nKHRydWUpO1xyXG5cclxuICAgIGlmICghd2FsbGV0QVBJKSB7XHJcbiAgICAgIHRocm93IGNvbnNvbGUuZXJyb3IoXCJ3YWxsZXRBUEkgaXMgbm90IHNldFwiKTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNpcDMwV2FsbGV0QVBJID0gbmV3IENpcDMwV2FsbGV0KHdhbGxldEFQSSk7XHJcbiAgICAgIC8vIGNvbnN0IGJsb2NrZnJvc3QgPSBuZXcgQmxvY2tGcm9zdElQRlMoe1xyXG4gICAgICAvLyAgIG5ldHdvcms6IG5ldHdvcmssXHJcbiAgICAgIC8vICAgcHJvamVjdElkOiBcInByZXByb2RKRXhPME1BTVJnZnBYejlJbDRJcUIydTlkZG95bFpCVFwiLFxyXG4gICAgICAvLyB9KTtcclxuICAgICAgY29uc29sZS5sb2coXCJnbW1tXCIpXHJcblxyXG4gICAgICBjb25zdCB3YWxsZXRIZWxwZXIgPSBuZXcgV2FsbGV0SGVscGVyKGNpcDMwV2FsbGV0QVBJKTtcclxuXHJcbiAgICAgIGNvbnN0IHBvbGljeUlkID0gXCJhMzg3OTU5NDkyNWUyYWIxNzBlZDBjMzQyMDRkODQ3NjU0MTFhZDIzZTQzZTk4NzcxZGQ1YTZkMlwiO1xyXG4gICAgICBjb25zdCBuYW1lID0gQnVmZmVyLmZyb20oXCJCRVJUXCIsICd1dGY4JykudG9TdHJpbmcoJ2hleCcpO1xyXG5cclxuICAgICAgY29uc3QgbXBoID0gTWludGluZ1BvbGljeUhhc2guZnJvbUhleChwb2xpY3lJZCk7XHJcblxyXG4gICAgICBjb25zdCBhc3NldENsYXNzID0gbmV3IEFzc2V0Q2xhc3Moe1xyXG4gICAgICAgIG1waDogbXBoLCAvLyBZb3VyIHBvbGljeSBoYXNoXHJcbiAgICAgICAgdG9rZW5OYW1lOiBuYW1lLy8gQ29udmVydCB0byBoZXggc3RyaW5nXHJcbiAgICAgIH0pOyBcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coYXNzZXRDbGFzcylcclxuXHJcbiAgICAgIGNvbnN0IG1pbkFkYSA6IG51bWJlciA9IDFfMDAwXzAwMDsgLy8gbWluaW11bSBsb3ZlbGFjZSB0byBzZW5kXHJcbiAgICAgIGNvbnN0IG1pbkFkYVZhbCA9IG5ldyBWYWx1ZShCaWdJbnQobWluQWRhKSk7XHJcblxyXG4gICAgICBjb25zdCB0ZXN0VmFsdWVTY3JpcHQgPSBuZXcgQXNzZXRzKFtbYXNzZXRDbGFzcywgQmlnSW50KDEyNTU1MCldXSk7XHJcblxyXG4gICAgICAvLyBHZXQgd2FsbGV0IFVUWE9zXHJcbiAgICAgIGNvbnN0IHV0eG9zID0gYXdhaXQgd2FsbGV0SGVscGVyLnBpY2tVdHhvcyhuZXcgVmFsdWUodW5kZWZpbmVkLCB0ZXN0VmFsdWVTY3JpcHQpKTtcclxuICAgICAgY29uc29sZS5sb2codXR4b3MpO1xyXG5cclxuICAgICAgLy8gR2V0IGNoYW5nZSBhZGRyZXNzXHJcbiAgICAgIGNvbnN0IGJlbmVmaXRpYXJ5ID0gYXdhaXQgd2FsbGV0SGVscGVyLmNoYW5nZUFkZHJlc3M7XHJcbiAgICAgIC8vIExvYWQgaW4gdGhlIHZlc3RpbmcgdmFsaWRhdG9yIHNjcmlwdCAocHJvZ3JhbSlcclxuXHJcbiAgICAgIGNvbnN0IGdhbWVSZXdhcmQgPSBuZXcgR2FtZVJld2FyZCgpO1xyXG5cclxuICAgICAgLy8gQ29tcGlsZSB0aGUgdmVzdGluZyB2YWxpZGF0b3JcclxuICAgICAgY29uc3QgY29tcGlsZWRQcm9ncmFtID0gZ2FtZVJld2FyZC5jb21waWxlKG9wdGltaXplKTtcclxuICAgICAgY29uc29sZS5sb2coXCJXYWxsZXQgYWRkcmVzczogXCIgKyBiZW5lZml0aWFyeSlcclxuICAgICAgY29uc3Qgc2NyaXB0QWRkcmVzcyA9IEFkZHJlc3MuZnJvbUhhc2hlcyhjb21waWxlZFByb2dyYW0udmFsaWRhdG9ySGFzaClcclxuICAgIFxyXG4gICAgICAgIC8vcmVtb3ZlXHJcbiAgICAgIGNvbnNvbGUubG9nKHNjcmlwdEFkZHJlc3MudG9CZWNoMzIoKSk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiU2NyaXB0IEFkZHJlc3M6XCIgKyBzY3JpcHRBZGRyZXNzKVxyXG4gICAgICBcclxuICAgICAgLy8gQ29uc3RydWN0IHRoZSB2ZXN0aW5nIGRhdHVtXHJcbiAgICAgIGNvbnN0IGdhbWVEYXR1bSA9IG5ldyBnYW1lUmV3YXJkLnR5cGVzLkRhdHVtKFxyXG4gICAgICAgIGJlbmVmaXRpYXJ5LnB1YktleUhhc2gsXHJcbiAgICAgIClcclxuICAgIFxyXG4gICAgLy9jb25zdCByZWRlZW1iZXIgPSAobmV3IGdhbWVSZXdhcmQudHlwZXMuUmVkZWVtZXIuQ2xhaW0oKSkuX3RvVXBsY0RhdGEoKTtcclxuICAgIFxyXG4gICAgICBjb25zdCB0eCA9IG5ldyBUeCgpO1xyXG4gICAgICB0eC5hZGRJbnB1dHModXR4b3NbMF0pO1xyXG4gICAgICB0eC5hZGRPdXRwdXQobmV3IFR4T3V0cHV0KFxyXG4gICAgICAgIHNjcmlwdEFkZHJlc3MsXHJcbiAgICAgICAgbmV3IFZhbHVlKHVuZGVmaW5lZCwgdGVzdFZhbHVlU2NyaXB0KSxcclxuICAgICAgICBEYXR1bS5pbmxpbmUoZ2FtZURhdHVtKVxyXG4gICAgICApKTtcclxuXHJcbiAgICAgIC8vIHR4LmFkZE91dHB1dChuZXcgVHhPdXRwdXQoXHJcbiAgICAgIC8vICAgYmVuZWZpdGlhcnksXHJcbiAgICAgIC8vICAgbWluQWRhVmFsLFxyXG4gICAgICAvLyApKTtcclxuICAgIFxyXG4gICAgICBjb25zb2xlLmxvZyhcIldlIGF0dGF0Y2hlZCBldmVyeXRoaW5nIVwiKVxyXG5cclxuICAgICAgLy8gUmVhZCBpbiB0aGUgbmV0d29yayBwYXJhbWV0ZXIgZmlsZVxyXG4gICAgICBjb25zdCBuZXR3b3JrUGFyYW1zSnNvbiA9IGF3YWl0IGdldE5ldHdvcmtQYXJhbXMobmV0d29yayk7XHJcbiAgICAgIGNvbnN0IG5ldHdvcmtQYXJhbXMgPSBuZXcgTmV0d29ya1BhcmFtcyhuZXR3b3JrUGFyYW1zSnNvbik7XHJcblxyXG4gICAgICAvLyBTZW5kIGFueSBjaGFuZ2UgYmFjayB0byB0aGUgYnV5ZXJcclxuICAgICAgYXdhaXQgdHguZmluYWxpemUobmV0d29ya1BhcmFtcywgYmVuZWZpdGlhcnksIHV0eG9zWzFdKTtcclxuXHJcbiAgICAgIC8vIFNpZ24gdGhlIHVuc2lnbmVkIHR4IHRvIGdldCB0aGUgd2l0bmVzc1xyXG4gICAgICBjb25zdCBzaWduYXR1cmVzID0gYXdhaXQgY2lwMzBXYWxsZXRBUEkuc2lnblR4KHR4KTtcclxuICAgICAgdHguYWRkU2lnbmF0dXJlcyhzaWduYXR1cmVzKTtcclxuXHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2lnbmVkXCIpO1xyXG4gICAgICAvLyBTdWJtaXQgdGhlIHNpZ25lZCB0eFxyXG4gICAgICBjb25zdCB0eEhhc2ggPSBhd2FpdCBjaXAzMFdhbGxldEFQSS5zdWJtaXRUeCh0eCk7XHJcblxyXG4gICAgICBzZXRUeCh7IHR4SWQ6IHR4SGFzaC5oZXggfSk7XHJcbiAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB0aHJvdyBjb25zb2xlLmVycm9yKFwic3VibWl0IHR4IGZhaWxlZFwiLCBlcnIpO1xyXG4gICAgfVxyXG4gIH1cclxuICAgIFxyXG4gIGFzeW5jIGZ1bmN0aW9uIGZldGNoVXR4b3Moc2NyaXB0QWRkcmVzczogc3RyaW5nKTogUHJvbWlzZTx7IHNlbGVjdGVkOiBUeElucHV0W107IHRvdGFsQW1vdW50OiBiaWdpbnQsIGR5bmFtaWNSZXdhcmQ6IGJpZ2ludCB9PiB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAvYXBpL2dldFV0eG9zYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgc2NyaXB0QWRkcmVzc30pLFxyXG4gICAgfSk7XHJcbiAgXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBSYXcgSlNPTiBhcnJheSBmcm9tIGJhY2tlbmRcclxuICBcclxuICAgIC8vIGBDb252ZXJ0IEpTT04gYmFjayB0byBUeElucHV0IG9iamVjdHNcclxuICAgIGNvbnN0IHNlbGVjdGVkVXR4b3MgPSBkYXRhLnNlbGVjdGVkLm1hcCgodXR4bzogYW55KSA9PiBUeElucHV0LmZyb21GdWxsQ2Jvcih1dHhvKSk7XHJcbiAgICBjb25zdCBkeW5hbWljUmV3YXJkOiBiaWdpbnQgPSBCaWdJbnQoZGF0YS5keW5hbWljUmV3YXJkKTtcclxuICAgIGNvbnN0IHRvdGFsQW1vdW50OiBiaWdpbnQgPSBCaWdJbnQoZGF0YS50b3RhbEFtb3VudCk7XHJcbiAgICBjb25zb2xlLmxvZyhcInNlbGVjdGVkVXR4b3NcIisgc2VsZWN0ZWRVdHhvcyk7XHJcbiAgICBjb25zb2xlLmxvZyhcImR5bmFtaWNSZXdhcmRcIiArIGR5bmFtaWNSZXdhcmQpO1xyXG4gICAgY29uc29sZS5sb2coXCJ0b3RhbEFtb3VudFwiKyB0b3RhbEFtb3VudCk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc2VsZWN0ZWQ6IHNlbGVjdGVkVXR4b3MsXHJcbiAgICAgIHRvdGFsQW1vdW50OiB0b3RhbEFtb3VudCxcclxuICAgICAgZHluYW1pY1Jld2FyZDogZHluYW1pY1Jld2FyZCxcclxuICAgIH07XHJcbiAgfVxyXG4gIFxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVDbGFpbVJlZGVlbWVyKHB1YktleUhhc2hIZXg6IHN0cmluZyk6IFJlZGVlbWVyIHtcclxuICAgIC8vIFRoZSBcIkNsYWltXCIgY29uc3RydWN0b3IgbWlnaHQgYmUgdGFnPTEgaWYgaXQncyB0aGUgc2Vjb25kIGluIHRoZSBlbnVtXHJcbiAgICBjb25zdCB0YWcgPSAxO1xyXG4gICAgY29uc3QgZmllbGQgPSBbbmV3IEJ5dGVBcnJheURhdGEoaGV4VG9CeXRlcyhwdWJLZXlIYXNoSGV4KSldO1xyXG4gICAgY29uc3QgY29uc3RyID0gbmV3IENvbnN0ckRhdGEodGFnLCBmaWVsZCk7XHJcbiAgICByZXR1cm4gbmV3IFJlZGVlbWVyKGNvbnN0cik7XHJcbiAgfVxyXG4gIFxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUdhbWVEYXR1bShiZW5lZml0aWFyeUhhc2hIZXg6IHN0cmluZyk6IERhdHVtIHtcclxuICAgIC8vIElmIHRoaXMgc3RydWN0IGhhcyBvbmx5IG9uZSBmaWVsZCwgdHlwaWNhbGx5IGl0J3MgdGFnPTBcclxuICAgIGNvbnN0IHRhZyA9IDA7XHJcbiAgICBjb25zdCBmaWVsZCA9IFtuZXcgQnl0ZUFycmF5RGF0YShoZXhUb0J5dGVzKGJlbmVmaXRpYXJ5SGFzaEhleCkpXTtcclxuICAgIGNvbnN0IGNkID0gbmV3IENvbnN0ckRhdGEodGFnLCBmaWVsZCk7XHJcbiAgICByZXR1cm4gRGF0dW0uaW5saW5lKGNkKTtcclxuICB9Il0sIm5hbWVzIjpbIk5ldHdvcmtQYXJhbXMiLCJWYWx1ZSIsIlR4T3V0cHV0IiwiVHgiLCJUeElucHV0IiwiQ2lwMzBXYWxsZXQiLCJEYXR1bSIsIkFzc2V0cyIsIldhbGxldEhlbHBlciIsIk1pbnRpbmdQb2xpY3lIYXNoIiwiUHJvZ3JhbSIsIlJlZGVlbWVyIiwiQXNzZXRDbGFzcyIsIkFkZHJlc3MiLCJDb25zdHJEYXRhIiwiTmF0aXZlU2NyaXB0IiwiQnl0ZUFycmF5RGF0YSIsImhleFRvQnl0ZXMiLCJuZXR3b3JrIiwiZ2V0TmV0d29ya1BhcmFtcyIsIkdhbWVSZXdhcmQiLCJvcHRpbWl6ZSIsImNhbGN1bGF0ZUNvdW50ZG93biIsIlRpbWVCZWdpbkNvbnRyYWN0IiwiVGltZU5vdyIsIk1hdGgiLCJmbG9vciIsIkRhdGUiLCJub3ciLCJDWUNMRV9EVVJBVElPTiIsIm9mZnNldEluTXMiLCJlbGFwc2VkVGltZSIsImVsYXBzZWRUaW1lSW5TZWNvbmRzIiwicG9zaXRpb25JbkN5Y2xlIiwiR0FNRV9SRVdBUkRfQ0JPUl9KU09OIiwiY2xhaW1Ub2tlbnMiLCJ3YWxsZXRBUEkiLCJzZXRJc0xvYWRpbmciLCJzZXRUeCIsIkVycm9yIiwiY2lwMzBXYWxsZXRBUEkiLCJ3YWxsZXRIZWxwZXIiLCJuZXR3b3JrUGFyYW1zSnNvbiIsIm5ldHdvcmtQYXJhbXMiLCJwb2xpY3lJZCIsIm5hbWUiLCJCdWZmZXIiLCJmcm9tIiwidG9TdHJpbmciLCJtcGgiLCJmcm9tSGV4IiwiYXNzZXRDbGFzcyIsInRva2VuTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJ1dHhvcyIsImdldFV0eG9zIiwiYmVuZWZpdGlhcnkiLCJjaGFuZ2VBZGRyZXNzIiwiY2JvckhleCIsImNvbXBpbGVkUHJvZ3JhbSIsIm5ldyIsInVwbGNQcm9ncmFtIiwic2NyaXB0QWRkcmVzcyIsImZyb21CZWNoMzIiLCJ0b0JlY2gzMiIsImRpciIsImRlcHRoIiwiZGF0dW1PYmplY3QiLCJwdWJLZXlIYXNoIiwiZ2FtZURhdHVtIiwiY3JlYXRlR2FtZURhdHVtIiwiaGV4IiwiY2xhaW1SZWRlZW1lciIsImNyZWF0ZUNsYWltUmVkZWVtZXIiLCJkYXRhIiwidHgiLCJzb3J0ZWRVdHhvcyIsImZldGNoVXR4b3MiLCJDTEFJTV9XSU5ET1ciLCJ3aW5kb3ciLCJvbmVycm9yIiwidGVzdFZhbHVlQmVuZWZpdGlhcnkiLCJCaWdJbnQiLCJkeW5hbWljUmV3YXJkIiwiYW1vdW50VG9TZW5kQmFjayIsInRvdGFsQW1vdW50IiwiZmlyc3RQYXJ0VG9TZW5kQmFjayIsInNlY29uZFBhcnRUb1NlbmRCYWNrIiwidmFsdWVDb250cmFjdDEiLCJ2YWx1ZUNvbnRyYWN0MiIsImFkZElucHV0cyIsInNlbGVjdGVkIiwiYXR0YWNoU2NyaXB0IiwidXNlckNsYWltT3V0cHV0IiwidW5kZWZpbmVkIiwiYWRkT3V0cHV0IiwidG90YWxBZGFJbklucHV0cyIsImZvckVhY2giLCJ1dHhvIiwib3V0cHV0IiwidmFsdWUiLCJsb3ZlbGFjZSIsImFkYVBlclNjcmlwdE91dHB1dCIsInNjcmlwdFV0eG8xIiwic2NyaXB0VXR4bzIiLCJmaW5hbGl6ZSIsInNpZ25hdHVyZXMiLCJzaWduVHgiLCJhZGRTaWduYXR1cmVzIiwidHhIYXNoIiwic3VibWl0VHgiLCJ0eElkIiwiZXJyIiwiZXJyb3IiLCJzZW5kIiwibWluQWRhIiwibWluQWRhVmFsIiwidGVzdFZhbHVlU2NyaXB0IiwicGlja1V0eG9zIiwiZ2FtZVJld2FyZCIsImNvbXBpbGUiLCJmcm9tSGFzaGVzIiwidmFsaWRhdG9ySGFzaCIsInR5cGVzIiwiaW5saW5lIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImpzb24iLCJzZWxlY3RlZFV0eG9zIiwibWFwIiwiZnJvbUZ1bGxDYm9yIiwicHViS2V5SGFzaEhleCIsInRhZyIsImZpZWxkIiwiY29uc3RyIiwiYmVuZWZpdGlhcnlIYXNoSGV4IiwiY2QiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/walletActions.ts\n"));

/***/ })

});